
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Utilities &#8212; apstools 1.7</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=8b12e3de" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=23a1f915"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/_utils';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/BCDA-APS/apstools/main/docs/source/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="synApps" href="synApps/index.html" />
    <link rel="prev" title="Plans" href="_plans.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.7" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">apstools 1.7</p>
  
</a></div>
    
      <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../install.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    API Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../applications/index.html">
    Applications
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../changes.html">
    Change History
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../license.html">
    License
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/BCDA-APS/apstools" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../install.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    API Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../applications/index.html">
    Applications
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../changes.html">
    Change History
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../license.html">
    License
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/BCDA-APS/apstools" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="_callbacks.html">Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="_devices.html">Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="_filewriters.html">File Writers</a></li>
<li class="toctree-l1"><a class="reference internal" href="_plans.html">Plans</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Utilities</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="synApps/index.html">synApps</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="synApps/__common.html">EPICS Record support: common structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_acalcout.html">EPICS base aCalcout record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_asyn.html">synApps asyn record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_busy.html">synApps busy record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_calcout.html">EPICS base calcout record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_db_2slit.html">EPICS synApps optics 2slit.db</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_epid.html">synApps epid record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_iocstats.html">synApps IOC statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_luascript.html">synApps luascript record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_save_data.html">synApps save data</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_scalcout.html">EPICS synApps calc scalcout record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_sscan.html">synApps sscan record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_sseq.html">synApps sseq record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_sub.html">EPICS base sub record &amp; synApps userAve records</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_swait.html">synApps swait record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_transform.html">synApps transform record</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">API Documentation</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Utilities</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="utilities">
<span id="id1"></span><h1>Utilities<a class="headerlink" href="#utilities" title="Link to this heading">#</a></h1>
<p>Assists measurement, data exploration, and the user experience.</p>
<p>Also consult the <a class="reference internal" href="../genindex.html"><span class="std std-ref">Index</span></a> under the <em>apstools</em> heading
for links to the Exceptions, and Utilities described
here.</p>
<section id="utilities-by-activity">
<h2>Utilities by Activity<a class="headerlink" href="#utilities-by-activity" title="Link to this heading">#</a></h2>
<section id="aps-data-management">
<span id="utils-aps-dm"></span><h3>APS Data Management<a class="headerlink" href="#aps-data-management" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_setup" title="apstools.utils.aps_data_management.dm_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_setup</span></code></a>(setup_file)</p></td>
<td><p>Name the APS Data Management bash script that activates its conda environment.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_cat" title="apstools.utils.aps_data_management.dm_api_cat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_cat</span></code></a>()</p></td>
<td><p>Return the APS Data Management Catalog API object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_daq" title="apstools.utils.aps_data_management.dm_api_daq"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_daq</span></code></a>()</p></td>
<td><p>Return the APS Data Management Data Acquisition API object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_dataset_cat" title="apstools.utils.aps_data_management.dm_api_dataset_cat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_dataset_cat</span></code></a>()</p></td>
<td><p>Return the APS Data Management Dataset Metadata Catalog API object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_ds" title="apstools.utils.aps_data_management.dm_api_ds"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_ds</span></code></a>()</p></td>
<td><p>Return the APS Data Management Data Storage API object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_file" title="apstools.utils.aps_data_management.dm_api_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_file</span></code></a>()</p></td>
<td><p>Return the APS Data Management File API object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_filecat" title="apstools.utils.aps_data_management.dm_api_filecat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_filecat</span></code></a>()</p></td>
<td><p>Return the APS Data Management Metadata Catalog Service API object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_proc" title="apstools.utils.aps_data_management.dm_api_proc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_proc</span></code></a>()</p></td>
<td><p>Return the APS Data Management Processing API object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.DM_WorkflowCache" title="apstools.utils.aps_data_management.DM_WorkflowCache"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DM_WorkflowCache</span></code></a>()</p></td>
<td><p>Keep track of one or more APS Data Management workflows for bluesky plans.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="finding">
<span id="utils-finding"></span><h3>Finding<a class="headerlink" href="#finding" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbyname" title="apstools.utils.pvregistry.findbyname"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbyname</span></code></a>(oname[, force_rebuild, ns])</p></td>
<td><p>Find the ophyd (dotted name) object associated with the given ophyd name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbypv" title="apstools.utils.pvregistry.findbypv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbypv</span></code></a>(pvname[, force_rebuild, ns])</p></td>
<td><p>Find all ophyd objects associated with the given EPICS PV.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.findCatalogsInNamespace" title="apstools.utils.catalog.findCatalogsInNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findCatalogsInNamespace</span></code></a>()</p></td>
<td><p>Return a dictionary of databroker catalogs in the default namespace.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="listing">
<span id="utils-listing"></span><h3>Listing<a class="headerlink" href="#listing" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.device_info.listdevice" title="apstools.utils.device_info.listdevice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listdevice</span></code></a>(obj[, scope, cname, dname, ...])</p></td>
<td><p>Describe the signal information from device <code class="docutils literal notranslate"><span class="pre">obj</span></code> in a pandas DataFrame.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.listobjects" title="apstools.utils.misc.listobjects"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listobjects</span></code></a>([show_pv, printing, verbose, ...])</p></td>
<td><p>Show all the ophyd Signal and Device objects defined as globals.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_plans.listplans" title="apstools.utils.list_plans.listplans"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listplans</span></code></a>([base, trunc, table_style])</p></td>
<td><p>List all plans.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listRunKeys" title="apstools.utils.list_runs.listRunKeys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listRunKeys</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Convenience function to list all keys (column names) in the scan's stream (default: primary).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns" title="apstools.utils.list_runs.ListRuns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ListRuns</span></code></a>([cat, query, keys, missing, num, ...])</p></td>
<td><p>List the runs from the given catalog according to some options.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listruns" title="apstools.utils.list_runs.listruns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listruns</span></code></a>([cat, keys, missing, num, ...])</p></td>
<td><p>List runs from catalog.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="reporting">
<span id="utils-reporting"></span><h3>Reporting<a class="headerlink" href="#reporting" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.print_RE_md" title="apstools.utils.misc.print_RE_md"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_RE_md</span></code></a>([dictionary, fmt, printing])</p></td>
<td><p>custom print the RunEngine metadata in a table</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.log_utils.file_log_handler" title="apstools.utils.log_utils.file_log_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_log_handler</span></code></a>(file_name_base[, maxBytes, ...])</p></td>
<td><p>Record logging output to a file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.log_utils.get_log_path" title="apstools.utils.log_utils.get_log_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_log_path</span></code></a>()</p></td>
<td><p>Return a path to <cite>./.logs</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.log_utils.setup_IPython_console_logging" title="apstools.utils.log_utils.setup_IPython_console_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_IPython_console_logging</span></code></a>([logger, ...])</p></td>
<td><p>Record all input (<code class="docutils literal notranslate"><span class="pre">In</span></code>) and output (<code class="docutils literal notranslate"><span class="pre">Out</span></code>) from IPython console.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.slit_core.SlitGeometry" title="apstools.utils.slit_core.SlitGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SlitGeometry</span></code></a>(width, height, x, y)</p></td>
<td><p>Slit size and center as a named tuple</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.log_utils.stream_log_handler" title="apstools.utils.log_utils.stream_log_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stream_log_handler</span></code></a>([formatter, level])</p></td>
<td><p>Record logging output to a stream (such as the console).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="other-utilities">
<span id="utils-other"></span><h3>Other Utilities<a class="headerlink" href="#other-utilities" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.statistics.array_index" title="apstools.utils.statistics.array_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">array_index</span></code></a>(arr, value)</p></td>
<td><p>Return the index for the first occurence of value in arr.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.cleanupText" title="apstools.utils.misc.cleanupText"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanupText</span></code></a>(text[, replace])</p></td>
<td><p>Convert text so it can be used as a dictionary key.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.connect_pvlist" title="apstools.utils.misc.connect_pvlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_pvlist</span></code></a>(pvlist[, wait, timeout, ...])</p></td>
<td><p>Given list of EPICS PV names, return dict of EpicsSignal objects.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_setup" title="apstools.utils.aps_data_management.dm_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_setup</span></code></a>(setup_file)</p></td>
<td><p>Name the APS Data Management bash script that activates its conda environment.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.dynamic_import" title="apstools.utils.misc.dynamic_import"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dynamic_import</span></code></a>(full_path)</p></td>
<td><p>Import the object given its import path as text.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.email.EmailNotifications" title="apstools.utils.email.EmailNotifications"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EmailNotifications</span></code></a>([sender])</p></td>
<td><p>send email notifications when requested</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.statistics.factor_fwhm" title="apstools.utils.statistics.factor_fwhm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">factor_fwhm</span></code></a></p></td>
<td><p>FWHM <span class="math notranslate nohighlight">\(=2\sqrt{2\ln{2}}\cdot\sigma_c\)</span></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.statistics.peak_full_width" title="apstools.utils.statistics.peak_full_width"><code class="xref py py-obj docutils literal notranslate"><span class="pre">peak_full_width</span></code></a>(x, y[, positive])</p></td>
<td><p>Assess <em>apparent</em> FWHM by inspecting the data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.select_live_plot" title="apstools.utils.plot.select_live_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_live_plot</span></code></a>(bec, signal)</p></td>
<td><p>Get the <em>first</em> live plot that matches <code class="docutils literal notranslate"><span class="pre">signal</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.select_mpl_figure" title="apstools.utils.plot.select_mpl_figure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_mpl_figure</span></code></a>(x, y)</p></td>
<td><p>Get the MatPlotLib Figure window for y vs x.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_by_name" title="apstools.utils.plot.trim_plot_by_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_by_name</span></code></a>([n, plots])</p></td>
<td><p>Find the plot(s) by name and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_lines" title="apstools.utils.plot.trim_plot_lines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_lines</span></code></a>(bec, n, x, y)</p></td>
<td><p>Find the plot with axes x and y and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.trim_string_for_EPICS" title="apstools.utils.misc.trim_string_for_EPICS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_string_for_EPICS</span></code></a>(msg)</p></td>
<td><p>String must not exceed EPICS PV length.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.time_constants.ts2iso" title="apstools.utils.time_constants.ts2iso"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ts2iso</span></code></a>(ts[, sep])</p></td>
<td><p>Convert Python timestamp (float) to IS8601 time in current time zone.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.unix" title="apstools.utils.misc.unix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unix</span></code></a>(command[, raises])</p></td>
<td><p>Run a UNIX command, returns (stdout, stderr).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.apsu_controls_subnet.warn_if_not_aps_controls_subnet" title="apstools.utils.apsu_controls_subnet.warn_if_not_aps_controls_subnet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">warn_if_not_aps_controls_subnet</span></code></a>()</p></td>
<td><p>APS-U controls are on private subnets.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.statistics.xy_statistics" title="apstools.utils.statistics.xy_statistics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">xy_statistics</span></code></a>(x[, y])</p></td>
<td><p>Compute statistical measures of a 1-D array (or weighted array), using <em>numpy</em>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="general">
<span id="utils-general"></span><h3>General<a class="headerlink" href="#general" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.call_signature_decorator" title="apstools.utils.misc.call_signature_decorator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">call_signature_decorator</span></code></a>(f)</p></td>
<td><p>Get the names of all function parameters supplied by the caller.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.cleanupText" title="apstools.utils.misc.cleanupText"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanupText</span></code></a>(text[, replace])</p></td>
<td><p>Convert text so it can be used as a dictionary key.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="_plans.html#apstools.plans.command_list.command_list_as_table" title="apstools.plans.command_list.command_list_as_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">command_list_as_table</span></code></a>(commands[, show_raw])</p></td>
<td><p>format a command list as a pyRestTable.Table object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.connect_pvlist" title="apstools.utils.misc.connect_pvlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_pvlist</span></code></a>(pvlist[, wait, timeout, ...])</p></td>
<td><p>Given list of EPICS PV names, return dict of EpicsSignal objects.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.copy_filtered_catalog" title="apstools.utils.catalog.copy_filtered_catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_filtered_catalog</span></code></a>(source_cat, target_cat)</p></td>
<td><p>copy filtered runs from source_cat to target_cat</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.query.db_query" title="apstools.utils.query.db_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">db_query</span></code></a>(db, query)</p></td>
<td><p>Searches the databroker v2 database.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.dictionary_table" title="apstools.utils.misc.dictionary_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dictionary_table</span></code></a>(dictionary, **kwargs)</p></td>
<td><p>Return a text table from <code class="docutils literal notranslate"><span class="pre">dictionary</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.dynamic_import" title="apstools.utils.misc.dynamic_import"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dynamic_import</span></code></a>(full_path)</p></td>
<td><p>Import the object given its import path as text.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.email.EmailNotifications" title="apstools.utils.email.EmailNotifications"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EmailNotifications</span></code></a>([sender])</p></td>
<td><p>send email notifications when requested</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelDatabaseFileBase" title="apstools.utils.spreadsheet.ExcelDatabaseFileBase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelDatabaseFileBase</span></code></a>([ignore_extra])</p></td>
<td><p>base class: read-only support for Excel files, treat them like databases</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric" title="apstools.utils.spreadsheet.ExcelDatabaseFileGeneric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelDatabaseFileGeneric</span></code></a>(filename[, ...])</p></td>
<td><p>Generic (read-only) handling of Excel spreadsheet-as-database</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelReadError" title="apstools.utils.spreadsheet.ExcelReadError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelReadError</span></code></a></p></td>
<td><p>Exception when reading Excel spreadsheet.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbyname" title="apstools.utils.pvregistry.findbyname"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbyname</span></code></a>(oname[, force_rebuild, ns])</p></td>
<td><p>Find the ophyd (dotted name) object associated with the given ophyd name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbypv" title="apstools.utils.pvregistry.findbypv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbypv</span></code></a>(pvname[, force_rebuild, ns])</p></td>
<td><p>Find all ophyd objects associated with the given EPICS PV.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.findCatalogsInNamespace" title="apstools.utils.catalog.findCatalogsInNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findCatalogsInNamespace</span></code></a>()</p></td>
<td><p>Return a dictionary of databroker catalogs in the default namespace.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.full_dotted_name" title="apstools.utils.misc.full_dotted_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_dotted_name</span></code></a>(obj)</p></td>
<td><p>Return the full dotted name</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.getCatalog" title="apstools.utils.catalog.getCatalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getCatalog</span></code></a>([ref])</p></td>
<td><p>Return a catalog object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDatabase" title="apstools.utils.catalog.getDatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDatabase</span></code></a>([db, catalog_name])</p></td>
<td><p>Return Bluesky database using keyword guides or default choice.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDefaultCatalog" title="apstools.utils.catalog.getDefaultCatalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultCatalog</span></code></a>()</p></td>
<td><p>Return the default databroker catalog.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDefaultDatabase" title="apstools.utils.catalog.getDefaultDatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultDatabase</span></code></a>()</p></td>
<td><p>Find the &quot;default&quot; database (has the most recent run).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.profile_support.getDefaultNamespace" title="apstools.utils.profile_support.getDefaultNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultNamespace</span></code></a>([attr])</p></td>
<td><p>get the IPython shell's namespace dictionary (or globals() if not found)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.descriptor_support.get_stream_data_map" title="apstools.utils.descriptor_support.get_stream_data_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_stream_data_map</span></code></a>(start_detectors, ...[, ...])</p></td>
<td><p>Return the names of the run's detector and motor signals.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.getRunData" title="apstools.utils.list_runs.getRunData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getRunData</span></code></a>(scan_id[, db, stream, query, use_v1])</p></td>
<td><p>Convenience function to get the run's data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.getRunDataValue" title="apstools.utils.list_runs.getRunDataValue"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getRunDataValue</span></code></a>(scan_id, key[, db, stream, ...])</p></td>
<td><p>Convenience function to get value of key in run stream.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.getStreamValues" title="apstools.utils.catalog.getStreamValues"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getStreamValues</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Get values from a previous scan stream in a databroker catalog.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.profile_support.ipython_profile_name" title="apstools.utils.profile_support.ipython_profile_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ipython_profile_name</span></code></a>()</p></td>
<td><p>return the name of the current ipython profile or <code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.itemizer" title="apstools.utils.misc.itemizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">itemizer</span></code></a>(fmt, items)</p></td>
<td><p>Format a list of items.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.device_info.listdevice" title="apstools.utils.device_info.listdevice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listdevice</span></code></a>(obj[, scope, cname, dname, ...])</p></td>
<td><p>Describe the signal information from device <code class="docutils literal notranslate"><span class="pre">obj</span></code> in a pandas DataFrame.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.listobjects" title="apstools.utils.misc.listobjects"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listobjects</span></code></a>([show_pv, printing, verbose, ...])</p></td>
<td><p>Show all the ophyd Signal and Device objects defined as globals.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_plans.listplans" title="apstools.utils.list_plans.listplans"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listplans</span></code></a>([base, trunc, table_style])</p></td>
<td><p>List all plans.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listRunKeys" title="apstools.utils.list_runs.listRunKeys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listRunKeys</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Convenience function to list all keys (column names) in the scan's stream (default: primary).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns" title="apstools.utils.list_runs.ListRuns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ListRuns</span></code></a>([cat, query, keys, missing, num, ...])</p></td>
<td><p>List the runs from the given catalog according to some options.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listruns" title="apstools.utils.list_runs.listruns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listruns</span></code></a>([cat, keys, missing, num, ...])</p></td>
<td><p>List runs from catalog.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.mmap_dict.MMap" title="apstools.utils.mmap_dict.MMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MMap</span></code></a>(**kwargs)</p></td>
<td><p>Dictionary with keys accessible as attributes (read-only).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters" title="apstools.utils.override_parameters.OverrideParameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OverrideParameters</span></code></a>()</p></td>
<td><p>Define parameters that can be overridden from a user configuration file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.pairwise" title="apstools.utils.misc.pairwise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pairwise</span></code></a>(iterable)</p></td>
<td><p>break a list (or other iterable) into pairs</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.plotxy" title="apstools.utils.plot.plotxy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotxy</span></code></a>(runs, xname, yname[, append, cat, ...])</p></td>
<td><p>Plot y vs x from a bluesky run.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.print_RE_md" title="apstools.utils.misc.print_RE_md"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_RE_md</span></code></a>([dictionary, fmt, printing])</p></td>
<td><p>custom print the RunEngine metadata in a table</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.quantify_md_key_use" title="apstools.utils.catalog.quantify_md_key_use"><code class="xref py py-obj docutils literal notranslate"><span class="pre">quantify_md_key_use</span></code></a>([key, db, catalog_name, ...])</p></td>
<td><p>Print table of different <code class="docutils literal notranslate"><span class="pre">key</span></code> values and how many times each appears.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.redefine_motor_position" title="apstools.utils.misc.redefine_motor_position"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redefine_motor_position</span></code></a>(motor, new_position)</p></td>
<td><p>Set EPICS motor record's user coordinate to <code class="docutils literal notranslate"><span class="pre">new_position</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.render" title="apstools.utils.misc.render"><code class="xref py py-obj docutils literal notranslate"><span class="pre">render</span></code></a>(value[, sig_figs])</p></td>
<td><p>Round-off floating-point numbers to sig_figs.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.replay" title="apstools.utils.misc.replay"><code class="xref py py-obj docutils literal notranslate"><span class="pre">replay</span></code></a>(headers[, callback, sort])</p></td>
<td><p>Replay the document stream from one (or more) scans (headers).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.memory.rss_mem" title="apstools.utils.memory.rss_mem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rss_mem</span></code></a>()</p></td>
<td><p>return memory used by this process</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.run_in_thread" title="apstools.utils.misc.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_in_thread</span></code></a>(func)</p></td>
<td><p>(decorator) run <code class="docutils literal notranslate"><span class="pre">func</span></code> in thread</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.safe_ophyd_name" title="apstools.utils.misc.safe_ophyd_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">safe_ophyd_name</span></code></a>(text)</p></td>
<td><p>make text safe to be used as an ophyd object name</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.select_live_plot" title="apstools.utils.plot.select_live_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_live_plot</span></code></a>(bec, signal)</p></td>
<td><p>Get the <em>first</em> live plot that matches <code class="docutils literal notranslate"><span class="pre">signal</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.select_mpl_figure" title="apstools.utils.plot.select_mpl_figure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_mpl_figure</span></code></a>(x, y)</p></td>
<td><p>Get the MatPlotLib Figure window for y vs x.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.split_quoted_line" title="apstools.utils.misc.split_quoted_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">split_quoted_line</span></code></a>(line)</p></td>
<td><p>splits a line into words some of which might be quoted</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.stored_dict.StoredDict" title="apstools.utils.stored_dict.StoredDict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StoredDict</span></code></a>(file[, delay, title, serializable])</p></td>
<td><p>A MutableMapping which syncs it contents to storage.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.summarize_runs" title="apstools.utils.list_runs.summarize_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summarize_runs</span></code></a>([since, db])</p></td>
<td><p>Report bluesky run metrics from the databroker.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.text_encode" title="apstools.utils.misc.text_encode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">text_encode</span></code></a>(source)</p></td>
<td><p>Encode <code class="docutils literal notranslate"><span class="pre">source</span></code> using the default codepoint.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.to_unicode_or_bust" title="apstools.utils.misc.to_unicode_or_bust"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_unicode_or_bust</span></code></a>(obj[, encoding])</p></td>
<td><p>from: <a class="reference external" href="http://farmdev.com/talks/unicode/">http://farmdev.com/talks/unicode/</a>  .</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_by_name" title="apstools.utils.plot.trim_plot_by_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_by_name</span></code></a>([n, plots])</p></td>
<td><p>Find the plot(s) by name and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_lines" title="apstools.utils.plot.trim_plot_lines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_lines</span></code></a>(bec, n, x, y)</p></td>
<td><p>Find the plot with axes x and y and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.trim_string_for_EPICS" title="apstools.utils.misc.trim_string_for_EPICS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_string_for_EPICS</span></code></a>(msg)</p></td>
<td><p>String must not exceed EPICS PV length.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.unix" title="apstools.utils.misc.unix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unix</span></code></a>(command[, raises])</p></td>
<td><p>Run a UNIX command, returns (stdout, stderr).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="module-apstools.utils.aps_data_management">
<span id="submodules"></span><h2>Submodules<a class="headerlink" href="#module-apstools.utils.aps_data_management" title="Link to this heading">#</a></h2>
<p>Setup for for this beam line’s APS Data Management Python API client.</p>
<p>FIRST</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dm_setup(setup_file)</span></code> function <strong>must</strong> be called first,
before any other calls to the <code class="docutils literal notranslate"><span class="pre">dm</span></code> package.  The <code class="docutils literal notranslate"><span class="pre">setup_file</span></code>
argument is the bash script that activates the APS Data Management
conda environment for the workstation.  That file contains definitions
of environment variables needed by the functions below.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_setup" title="apstools.utils.aps_data_management.dm_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_setup</span></code></a>(setup_file)</p></td>
<td><p>Name the APS Data Management bash script that activates its conda environment.</p></td>
</tr>
</tbody>
</table>
</div>
<p>FUNCTIONS</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.build_run_metadata_dict" title="apstools.utils.aps_data_management.build_run_metadata_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_run_metadata_dict</span></code></a>(user_md, **dm_kwargs)</p></td>
<td><p>Return a dictionary for use as Bluesky run metadata.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_add_workflow" title="apstools.utils.aps_data_management.dm_add_workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_add_workflow</span></code></a>(workflow_file)</p></td>
<td><p>Add APS Data Management workflow from file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_cat" title="apstools.utils.aps_data_management.dm_api_cat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_cat</span></code></a>()</p></td>
<td><p>Return the APS Data Management Catalog API object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_daq" title="apstools.utils.aps_data_management.dm_api_daq"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_daq</span></code></a>()</p></td>
<td><p>Return the APS Data Management Data Acquisition API object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_dataset_cat" title="apstools.utils.aps_data_management.dm_api_dataset_cat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_dataset_cat</span></code></a>()</p></td>
<td><p>Return the APS Data Management Dataset Metadata Catalog API object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_ds" title="apstools.utils.aps_data_management.dm_api_ds"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_ds</span></code></a>()</p></td>
<td><p>Return the APS Data Management Data Storage API object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_file" title="apstools.utils.aps_data_management.dm_api_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_file</span></code></a>()</p></td>
<td><p>Return the APS Data Management File API object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_filecat" title="apstools.utils.aps_data_management.dm_api_filecat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_filecat</span></code></a>()</p></td>
<td><p>Return the APS Data Management Metadata Catalog Service API object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_api_proc" title="apstools.utils.aps_data_management.dm_api_proc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_api_proc</span></code></a>()</p></td>
<td><p>Return the APS Data Management Processing API object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_daq_wait_upload_plan" title="apstools.utils.aps_data_management.dm_daq_wait_upload_plan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_daq_wait_upload_plan</span></code></a>(id[, period])</p></td>
<td><p>plan: Wait for DAQ uploads to finish.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_file_ready_to_process" title="apstools.utils.aps_data_management.dm_file_ready_to_process"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_file_ready_to_process</span></code></a>(experimentFilePath, ...)</p></td>
<td><p>Does DM determine the named file is ready for processing?</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_get_daqs" title="apstools.utils.aps_data_management.dm_get_daqs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_get_daqs</span></code></a>(experimentName)</p></td>
<td><p>Return list of APS Data Management DAQ(s) for this experiment.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_get_experiment_datadir_active_daq" title="apstools.utils.aps_data_management.dm_get_experiment_datadir_active_daq"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_get_experiment_datadir_active_daq</span></code></a>(...)</p></td>
<td><p>Return the daqInfo dict for the active DAQ, or 'None'.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_get_experiment_file" title="apstools.utils.aps_data_management.dm_get_experiment_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_get_experiment_file</span></code></a>(experiment_name, ...)</p></td>
<td><p>Get experiment file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_get_experiment_path" title="apstools.utils.aps_data_management.dm_get_experiment_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_get_experiment_path</span></code></a>(experiment_name)</p></td>
<td><p>Return the storageDirectory for the named APS Data Management experiment as a path.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_get_experiments" title="apstools.utils.aps_data_management.dm_get_experiments"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_get_experiments</span></code></a>([keys, table, default_value])</p></td>
<td><p>Get the most recent APS Data Management experiments (for the current station).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_get_workflow" title="apstools.utils.aps_data_management.dm_get_workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_get_workflow</span></code></a>(workflow_name)</p></td>
<td><p>Get named APS Data Management workflow.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_source_environ" title="apstools.utils.aps_data_management.dm_source_environ"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_source_environ</span></code></a>()</p></td>
<td><p>Add APS Data Management environment variable definitions to this process.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_start_daq" title="apstools.utils.aps_data_management.dm_start_daq"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_start_daq</span></code></a>(experimentName, dataDirectory, ...)</p></td>
<td><p>Start APS DM data acquisition (real-time directory monitoring and file upload).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_station_name" title="apstools.utils.aps_data_management.dm_station_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_station_name</span></code></a>()</p></td>
<td><p>Return the APS Data Management station name or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_stop_daq" title="apstools.utils.aps_data_management.dm_stop_daq"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_stop_daq</span></code></a>(experimentName, dataDirectory)</p></td>
<td><p>Stop APS DM data acquisition (real-time directory monitoring and file upload).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_update_workflow" title="apstools.utils.aps_data_management.dm_update_workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_update_workflow</span></code></a>(workflow_file)</p></td>
<td><p>Update APS Data Management workflow from file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_upload" title="apstools.utils.aps_data_management.dm_upload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_upload</span></code></a>(experimentName, dataDirectory, ...)</p></td>
<td><p>Start APS DM data acquisition file upload.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.get_workflow_last_stage" title="apstools.utils.aps_data_management.get_workflow_last_stage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_workflow_last_stage</span></code></a>(workflow_name)</p></td>
<td><p>Return the name of the last stage in the named APS Data Management workflow.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.share_bluesky_metadata_with_dm" title="apstools.utils.aps_data_management.share_bluesky_metadata_with_dm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">share_bluesky_metadata_with_dm</span></code></a>(...[, ...])</p></td>
<td><p>Once a bluesky run ends, share its metadata with APS DM.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.validate_experiment_dataDirectory" title="apstools.utils.aps_data_management.validate_experiment_dataDirectory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_experiment_dataDirectory</span></code></a>(...)</p></td>
<td><p>These bluesky plans use the experiment's 'dataDirectory'.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.wait_dm_upload" title="apstools.utils.aps_data_management.wait_dm_upload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">wait_dm_upload</span></code></a>(experiment_name, experiment_file)</p></td>
<td><p>(bluesky plan) Wait for APS DM data acquisition to upload a file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.DM_WorkflowCache" title="apstools.utils.aps_data_management.DM_WorkflowCache"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DM_WorkflowCache</span></code></a>()</p></td>
<td><p>Keep track of one or more APS Data Management workflows for bluesky plans.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="field-list simple">
<dt class="field-odd">see<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://git.aps.anl.gov/DM/dm-docs/-/wikis/DM/Beamline-Services/Workflow-Processing-Service">https://git.aps.anl.gov/DM/dm-docs/-/wikis/DM/Beamline-Services/Workflow-Processing-Service</a></p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.DM_WorkflowCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">DM_WorkflowCache</span></span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#DM_WorkflowCache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.DM_WorkflowCache" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Keep track of one or more APS Data Management workflows for bluesky plans.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.DM_WorkflowCache.define_workflow" title="apstools.utils.aps_data_management.DM_WorkflowCache.define_workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">define_workflow</span></code></a>(key, connector)</p></td>
<td><p>Add a DM_WorkflowConnector object to be managed.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.DM_WorkflowCache.print_cache_summary" title="apstools.utils.aps_data_management.DM_WorkflowCache.print_cache_summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_cache_summary</span></code></a>([title])</p></td>
<td><p>Summarize (in a table) the DM workflows in the cache.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.DM_WorkflowCache.report_dm_workflow_output" title="apstools.utils.aps_data_management.DM_WorkflowCache.report_dm_workflow_output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">report_dm_workflow_output</span></code></a>(final_stage_id)</p></td>
<td><p>Print a final (summary) report about a single DM workflow.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.DM_WorkflowCache.wait_workflows" title="apstools.utils.aps_data_management.DM_WorkflowCache.wait_workflows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">wait_workflows</span></code></a>([period, wait])</p></td>
<td><p>(plan) Wait (if <code class="docutils literal notranslate"><span class="pre">True</span></code>) for existing workflows to finish.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.DM_WorkflowCache._update_processing_data" title="apstools.utils.aps_data_management.DM_WorkflowCache._update_processing_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_update_processing_data</span></code></a>()</p></td>
<td><p>Update all the workflows in the cache (from the DM server).</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.DM_WorkflowCache._update_processing_data">
<span class="sig-name descname"><span class="pre">_update_processing_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#DM_WorkflowCache._update_processing_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.DM_WorkflowCache._update_processing_data" title="Link to this definition">#</a></dt>
<dd><p>Update all the workflows in the cache (from the DM server).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.DM_WorkflowCache.define_workflow">
<span class="sig-name descname"><span class="pre">define_workflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#DM_WorkflowCache.define_workflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.DM_WorkflowCache.define_workflow" title="Link to this definition">#</a></dt>
<dd><p>Add a DM_WorkflowConnector object to be managed.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>key <em>str</em>:</dt><dd><p>Identifying text for this workflow object.</p>
</dd>
<dt>connector <em>object</em>:</dt><dd><p>Instance of DM_WorkflowConnector.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.DM_WorkflowCache.print_cache_summary">
<span class="sig-name descname"><span class="pre">print_cache_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Summary'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#DM_WorkflowCache.print_cache_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.DM_WorkflowCache.print_cache_summary" title="Link to this definition">#</a></dt>
<dd><p>Summarize (in a table) the DM workflows in the cache.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.DM_WorkflowCache.report_dm_workflow_output">
<span class="sig-name descname"><span class="pre">report_dm_workflow_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">final_stage_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#DM_WorkflowCache.report_dm_workflow_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.DM_WorkflowCache.report_dm_workflow_output" title="Link to this definition">#</a></dt>
<dd><p>Print a final (summary) report about a single DM workflow.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>final_stage_id <em>str</em>:</dt><dd><p>Text key of the last stage in the workflow.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.DM_WorkflowCache.wait_workflows">
<span class="sig-name descname"><span class="pre">wait_workflows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#DM_WorkflowCache.wait_workflows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.DM_WorkflowCache.wait_workflows" title="Link to this definition">#</a></dt>
<dd><p>(plan) Wait (if <code class="docutils literal notranslate"><span class="pre">True</span></code>) for existing workflows to finish.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>period <em>float</em>:</dt><dd><p>Time between reports while waiting for all workflows to finish processing.
Default: 10 seconds.</p>
</dd>
<dt>wait <em>bool</em>:</dt><dd><p>Should RE wait for all workflows to finish?
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.build_run_metadata_dict">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">build_run_metadata_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_md</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dm_kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#build_run_metadata_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.build_run_metadata_dict" title="Link to this definition">#</a></dt>
<dd><p>Return a dictionary for use as Bluesky run metadata.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_add_workflow">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_add_workflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workflow_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_add_workflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_add_workflow" title="Link to this definition">#</a></dt>
<dd><p>Add APS Data Management workflow from file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_api_cat">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_api_cat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_api_cat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_api_cat" title="Link to this definition">#</a></dt>
<dd><p>Return the APS Data Management Catalog API object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_api_daq">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_api_daq</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_api_daq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_api_daq" title="Link to this definition">#</a></dt>
<dd><p>Return the APS Data Management Data Acquisition API object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_api_dataset_cat">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_api_dataset_cat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_api_dataset_cat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_api_dataset_cat" title="Link to this definition">#</a></dt>
<dd><p>Return the APS Data Management Dataset Metadata Catalog API object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_api_ds">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_api_ds</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_api_ds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_api_ds" title="Link to this definition">#</a></dt>
<dd><p>Return the APS Data Management Data Storage API object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_api_file">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_api_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_api_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_api_file" title="Link to this definition">#</a></dt>
<dd><p>Return the APS Data Management File API object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_api_filecat">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_api_filecat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_api_filecat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_api_filecat" title="Link to this definition">#</a></dt>
<dd><p>Return the APS Data Management Metadata Catalog Service API object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_api_proc">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_api_proc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_api_proc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_api_proc" title="Link to this definition">#</a></dt>
<dd><p>Return the APS Data Management Processing API object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_daq_wait_upload_plan">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_daq_wait_upload_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_daq_wait_upload_plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_daq_wait_upload_plan" title="Link to this definition">#</a></dt>
<dd><p>plan: Wait for DAQ uploads to finish.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_file_ready_to_process">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_file_ready_to_process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experimentFilePath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experimentName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrieveMd5Sum</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_file_ready_to_process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_file_ready_to_process" title="Link to this definition">#</a></dt>
<dd><p>Does DM determine the named file is ready for processing?</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_get_daqs">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_get_daqs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experimentName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_get_daqs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_get_daqs" title="Link to this definition">#</a></dt>
<dd><p>Return list of APS Data Management DAQ(s) for this experiment.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>experimentName <em>str</em>:</dt><dd><p>Name of the APS Data Management experiment.</p>
</dd>
</dl>
<p>RETURNS</p>
<blockquote>
<div><p>List of matching DAQ dictionaries.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_get_experiment_datadir_active_daq">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_get_experiment_datadir_active_daq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experiment_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_get_experiment_datadir_active_daq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_get_experiment_datadir_active_daq" title="Link to this definition">#</a></dt>
<dd><p>Return the daqInfo dict for the active DAQ, or ‘None’.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_get_experiment_file">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_get_experiment_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experiment_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_get_experiment_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_get_experiment_file" title="Link to this definition">#</a></dt>
<dd><p>Get experiment file.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>experiment_name <em>str</em>:</dt><dd><p>Name of the APS Data Management experiment.  The experiment must exist.</p>
</dd>
<dt>experiment_file <em>str</em>:</dt><dd><p>Name (with path) of the experiment file.</p>
</dd>
</dl>
<p>RETURNS</p>
<p>FileMetadata object.</p>
<p>RAISES</p>
<blockquote>
<div><ul class="simple">
<li><p>InvalidRequest – in case experiment name or file path have not been provided</p></li>
<li><p>AuthorizationError – in case user is not authorized to manage DM station</p></li>
<li><p>ObjectNotFound – in case file with a given path does not exist</p></li>
<li><p>DmException – in case of any other errors</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_get_experiment_path">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_get_experiment_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experiment_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_get_experiment_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_get_experiment_path" title="Link to this definition">#</a></dt>
<dd><p>Return the storageDirectory for the named APS Data Management experiment as a path.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>experiment_name <em>str</em>:</dt><dd><p>Name of the APS Data Management experiment.  The experiment must exist.</p>
</dd>
</dl>
<p>RETURNS</p>
<p>Data directory for the experiment, as pathlib.Path object.</p>
<p>RAISES</p>
<dl class="simple">
<dt>dm.ObjectNotFound:</dt><dd><p>When experiment is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_get_experiments">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_get_experiments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['id',</span> <span class="pre">'name',</span> <span class="pre">'startDate',</span> <span class="pre">'experimentType',</span> <span class="pre">'experimentStation']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-na-'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_get_experiments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_get_experiments" title="Link to this definition">#</a></dt>
<dd><p>Get the most recent APS Data Management experiments (for the current station).</p>
<p>Return result as either a list or a pyRestTable object (see <code class="docutils literal notranslate"><span class="pre">table</span></code>).</p>
<p>PARAMETERS:</p>
<dl class="simple">
<dt>keys <em>[str]</em>:</dt><dd><p>Data keys to be shown in the table.</p>
</dd>
<dt>table <em>bool</em>:</dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">False</span></code> (default), return a Python list.
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return a pyRestTable <code class="docutils literal notranslate"><span class="pre">Table()</span></code> object.</p>
</dd>
<dt>default_value <em>str</em>:</dt><dd><p>Table value if no data available for that key.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_get_workflow">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_get_workflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workflow_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_get_workflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_get_workflow" title="Link to this definition">#</a></dt>
<dd><p>Get named APS Data Management workflow.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_setup">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">setup_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_setup" title="Link to this definition">#</a></dt>
<dd><p>Name the APS Data Management bash script that activates its conda environment.</p>
<p>The return result is the ‘owner’ of the DM workflows.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_source_environ">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_source_environ</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_source_environ"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_source_environ" title="Link to this definition">#</a></dt>
<dd><p>Add APS Data Management environment variable definitions to this process.</p>
<p>This function reads the bash script, searching for lines that start with
“export “. Such lines define bash shell environment variables in the bash
script.  This function adds those environment variables to the current
environment.</p>
<p>BASH COMMAND SUGGESTIONS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dm</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">dm</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">sh</span>

<span class="n">source</span> <span class="o">~/</span><span class="n">DM</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">dm</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The suggestions follow a pattern: <code class="docutils literal notranslate"><span class="pre">${DM_ROOT}/etc/dm.setup.sh</span></code> where
<code class="docutils literal notranslate"><span class="pre">DM_ROOT</span></code> is the location of the DM tools as installed in the current user
account.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_start_daq">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_start_daq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experimentName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataDirectory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">daqInfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_start_daq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_start_daq" title="Link to this definition">#</a></dt>
<dd><p>Start APS DM data acquisition (real-time directory monitoring and file upload).</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>experimentName <em>str</em>:</dt><dd><p>Name of the APS Data Management experiment.</p>
</dd>
<dt>dataDirectory:</dt><dd><p>data directory URL</p>
</dd>
<dt>daqInfo <em>dict</em>:</dt><dd><p>Dictionary of optional metadata (key/value pairs) describing data acquisition.
See <a class="reference external" href="https://git.aps.anl.gov/DM/dm-docs/-/wikis/DM/Beamline-Services/API-Reference/DAQ-Service#dm.daq_web_service.api.experimentDaqApi.ExperimentDaqApi.startDaq">https://git.aps.anl.gov/DM/dm-docs/-/wikis/DM/Beamline-Services/API-Reference/DAQ-Service#dm.daq_web_service.api.experimentDaqApi.ExperimentDaqApi.startDaq</a>
for details.</p>
</dd>
</dl>
<p>RETURNS</p>
<ul class="simple">
<li><p>daqInfo dictionary</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_station_name">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_station_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_station_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_station_name" title="Link to this definition">#</a></dt>
<dd><p>Return the APS Data Management station name or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_stop_daq">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_stop_daq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experimentName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataDirectory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_stop_daq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_stop_daq" title="Link to this definition">#</a></dt>
<dd><p>Stop APS DM data acquisition (real-time directory monitoring and file upload).</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>experimentName <em>str</em>:</dt><dd><p>Name of the APS Data Management experiment.</p>
</dd>
<dt>dataDirectory:</dt><dd><p>data directory URL</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_update_workflow">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_update_workflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workflow_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_update_workflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_update_workflow" title="Link to this definition">#</a></dt>
<dd><p>Update APS Data Management workflow from file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_upload">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experimentName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataDirectory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">daqInfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_upload" title="Link to this definition">#</a></dt>
<dd><p>Start APS DM data acquisition file upload.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>experimentName <em>str</em>:</dt><dd><p>Name of the APS Data Management experiment.</p>
</dd>
<dt>dataDirectory:</dt><dd><p>data directory URL</p>
</dd>
<dt>daqInfo <em>dict</em>:</dt><dd><p>Dictionary of optional metadata (key/value pairs) describing data acquisition.
See <a class="reference external" href="https://git.aps.anl.gov/DM/dm-docs/-/wikis/DM/Beamline-Services/API-Reference/DAQ-Service#dm.daq_web_service.api.experimentDaqApi.ExperimentDaqApi.startDaq">https://git.aps.anl.gov/DM/dm-docs/-/wikis/DM/Beamline-Services/API-Reference/DAQ-Service#dm.daq_web_service.api.experimentDaqApi.ExperimentDaqApi.startDaq</a>
for details.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <code class="docutils literal notranslate"><span class="pre">wait_dm_upload()</span></code> function in this module.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.get_workflow_last_stage">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">get_workflow_last_stage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workflow_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#get_workflow_last_stage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.get_workflow_last_stage" title="Link to this definition">#</a></dt>
<dd><p>Return the name of the last stage in the named APS Data Management workflow.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.share_bluesky_metadata_with_dm">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">share_bluesky_metadata_with_dm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experimentName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workflow_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">should_raise</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#share_bluesky_metadata_with_dm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.share_bluesky_metadata_with_dm" title="Link to this definition">#</a></dt>
<dd><p>Once a bluesky run ends, share its metadata with APS DM.</p>
<p>Only upload if we have a workflow.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.validate_experiment_dataDirectory">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">validate_experiment_dataDirectory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dm_experiment_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#validate_experiment_dataDirectory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.validate_experiment_dataDirectory" title="Link to this definition">#</a></dt>
<dd><p>These bluesky plans use the experiment’s ‘dataDirectory’.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.wait_dm_upload">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">wait_dm_upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experiment_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">600</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poll_period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">30</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#wait_dm_upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.wait_dm_upload" title="Link to this definition">#</a></dt>
<dd><p>(bluesky plan) Wait for APS DM data acquisition to upload a file.</p>
<p>PARAMETERS</p>
<ul class="simple">
<li><p>experiment_name <em>str</em>: Name of the APS Data Management experiment.</p></li>
<li><p>experiment_file <em>str</em> Name (and path) of file  in DM.</p></li>
<li><p>timeout <em>float</em>: Number of seconds to wait before raising a ‘TimeoutError’.</p></li>
<li><p>poll_period <em>float</em>: Number of seconds to wait before check DM again.</p></li>
</ul>
<p>RAISES</p>
<ul class="simple">
<li><p>TimeoutError: if DM does not identify file within ‘timeout’ (seconds).</p></li>
</ul>
</dd></dl>

<p id="module-apstools.utils.apsu_controls_subnet">APS-U controls are on private subnets.  Check and advise as applicable.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.apsu_controls_subnet.warn_if_not_aps_controls_subnet" title="apstools.utils.apsu_controls_subnet.warn_if_not_aps_controls_subnet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">warn_if_not_aps_controls_subnet</span></code></a>()</p></td>
<td><p>APS-U controls are on private subnets.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.apsu_controls_subnet.warn_if_not_aps_controls_subnet">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.apsu_controls_subnet.</span></span><span class="sig-name descname"><span class="pre">warn_if_not_aps_controls_subnet</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/apsu_controls_subnet.html#warn_if_not_aps_controls_subnet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.apsu_controls_subnet.warn_if_not_aps_controls_subnet" title="Link to this definition">#</a></dt>
<dd><p>APS-U controls are on private subnets.  Check and advise as applicable.</p>
<p>Call this function early in the startup procedure. It could explain easily
the reason for subsequent EPICS PV connection failures.</p>
<p>For workstations on subnets that do not match the criteria, this function
should not post any warnings.</p>
</dd></dl>

<section id="working-with-databroker-catalogs">
<span id="module-apstools.utils.catalog"></span><h3>Working with databroker catalogs<a class="headerlink" href="#working-with-databroker-catalogs" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.copy_filtered_catalog" title="apstools.utils.catalog.copy_filtered_catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_filtered_catalog</span></code></a>(source_cat, target_cat)</p></td>
<td><p>copy filtered runs from source_cat to target_cat</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.findCatalogsInNamespace" title="apstools.utils.catalog.findCatalogsInNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findCatalogsInNamespace</span></code></a>()</p></td>
<td><p>Return a dictionary of databroker catalogs in the default namespace.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.getCatalog" title="apstools.utils.catalog.getCatalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getCatalog</span></code></a>([ref])</p></td>
<td><p>Return a catalog object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDatabase" title="apstools.utils.catalog.getDatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDatabase</span></code></a>([db, catalog_name])</p></td>
<td><p>Return Bluesky database using keyword guides or default choice.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDefaultCatalog" title="apstools.utils.catalog.getDefaultCatalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultCatalog</span></code></a>()</p></td>
<td><p>Return the default databroker catalog.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDefaultDatabase" title="apstools.utils.catalog.getDefaultDatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultDatabase</span></code></a>()</p></td>
<td><p>Find the &quot;default&quot; database (has the most recent run).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.getStreamValues" title="apstools.utils.catalog.getStreamValues"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getStreamValues</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Get values from a previous scan stream in a databroker catalog.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.quantify_md_key_use" title="apstools.utils.catalog.quantify_md_key_use"><code class="xref py py-obj docutils literal notranslate"><span class="pre">quantify_md_key_use</span></code></a>([key, db, catalog_name, ...])</p></td>
<td><p>Print table of different <code class="docutils literal notranslate"><span class="pre">key</span></code> values and how many times each appears.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.copy_filtered_catalog">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">copy_filtered_catalog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_cat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_cat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#copy_filtered_catalog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.copy_filtered_catalog" title="Link to this definition">#</a></dt>
<dd><p>copy filtered runs from source_cat to target_cat</p>
<p>PARAMETERS</p>
<dl>
<dt>source_cat</dt><dd><p><em>obj</em> :
instance of <cite>databroker.Broker</cite> or <cite>databroker.catalog[name]</cite></p>
</dd>
<dt>target_cat</dt><dd><p><em>obj</em> :
instance of <cite>databroker.Broker</cite> or <cite>databroker.catalog[name]</cite></p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
(default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>)</p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
</dl>
<p>example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">copy_filtered_catalog</span><span class="p">(</span>
    <span class="n">databroker</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">named</span><span class="p">(</span><span class="s2">&quot;mongodb_config&quot;</span><span class="p">),</span>
    <span class="n">databroker</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;test1&quot;</span><span class="p">],</span>
    <span class="p">{</span><span class="s1">&#39;plan_name&#39;</span><span class="p">:</span> <span class="s1">&#39;snapshot&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.findCatalogsInNamespace">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">findCatalogsInNamespace</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#findCatalogsInNamespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.findCatalogsInNamespace" title="Link to this definition">#</a></dt>
<dd><p>Return a dictionary of databroker catalogs in the default namespace.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.getCatalog">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">getCatalog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#getCatalog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.getCatalog" title="Link to this definition">#</a></dt>
<dd><p>Return a catalog object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.getDatabase">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">getDatabase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catalog_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#getDatabase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.getDatabase" title="Link to this definition">#</a></dt>
<dd><p>Return Bluesky database using keyword guides or default choice.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>
(default: see <code class="docutils literal notranslate"><span class="pre">catalog_name</span></code> keyword argument)</p>
</dd>
<dt>catalog_name</dt><dd><p><em>str</em> :
Name of databroker v2 catalog, used when supplied
<code class="docutils literal notranslate"><span class="pre">db</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.
(default: catalog with most recent run timestamp)</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>object or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.getDefaultCatalog">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">getDefaultCatalog</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#getDefaultCatalog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.getDefaultCatalog" title="Link to this definition">#</a></dt>
<dd><p>Return the default databroker catalog.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.getDefaultDatabase">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">getDefaultDatabase</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#getDefaultDatabase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.getDefaultDatabase" title="Link to this definition">#</a></dt>
<dd><p>Find the “default” database (has the most recent run).</p>
<p>Note that here, <em>database</em> and <em>catalog</em> mean the same.</p>
<p>This routine looks at all the database instances defined in the
current session (console or notebook).  If there is only one or no
database instances defined as objects in the current session, the
choice is simple.  When there is more than one database instance in
the current session, then the one with the most recent run timestamp
is selected.  In the case (as happens when starting with a new
database) that the current database has <strong>no</strong> runs <em>and</em> another
database instance is defined in the session <em>and</em> that additional
database has runs in it (such as the previous database), then the
database with the newest run timestamp (and not the newer empty
database) will be chosen.</p>
<p>RETURNS</p>
<dl class="simple">
<dt>object or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.getStreamValues">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">getStreamValues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_fragment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'baseline'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_v1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#getStreamValues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.getStreamValues" title="Link to this definition">#</a></dt>
<dd><p>Get values from a previous scan stream in a databroker catalog.</p>
<p>Optionally, select only those data with names including <code class="docutils literal notranslate"><span class="pre">key_fragment</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If the output is truncated, use
<code class="docutils literal notranslate"><span class="pre">pd.set_option('display.max_rows',</span> <span class="pre">300)</span></code>
to increase the number of rows displayed.</p>
</div>
<p>PARAMETERS</p>
<dl>
<dt>scan_id</dt><dd><p><em>int</em> or <em>str</em> :
Scan (run) identifier.
Positive integer value is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> from run’s metadata.
Negative integer value is since most recent run in databroker.
String is run’s <code class="docutils literal notranslate"><span class="pre">uid</span></code> unique identifier (can abbreviate to
the first characters needed to assure it is unique).</p>
</dd>
<dt>key_fragment</dt><dd><p><em>str</em> :
Part or all of key name to be found in selected stream.
For instance, if you specify <code class="docutils literal notranslate"><span class="pre">key_fragment=&quot;lakeshore&quot;</span></code>,
it will return all the keys that include <code class="docutils literal notranslate"><span class="pre">lakeshore</span></code>.</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.
Default: will search existing session for instance.</p>
</dd>
<dt>stream</dt><dd><p><em>str</em> :
Name of the bluesky data stream to obtain the data.
Default: ‘baseline’</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
<dt>use_v1</dt><dd><p><em>bool</em> :
Chooses databroker API version between ‘v1’ or ‘v2’.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> (meaning use the v1 API)</p>
</dd>
</dl>
<p>RETURNS</p>
<dl>
<dt><em>object</em> :</dt><dd><p>pandas DataFrame with values from selected stream, search_string, and query</p>
<p>see: <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html</a></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.5.1.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.quantify_md_key_use">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">quantify_md_key_use</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catalog_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">since</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">until</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#quantify_md_key_use"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.quantify_md_key_use" title="Link to this definition">#</a></dt>
<dd><p>Print table of different <code class="docutils literal notranslate"><span class="pre">key</span></code> values and how many times each appears.</p>
<p>PARAMETERS</p>
<dl>
<dt>key <em>str</em> :</dt><dd><p>one of the metadata keys in a run’s start document
(default: <code class="docutils literal notranslate"><span class="pre">plan_name</span></code>)</p>
</dd>
<dt>db <em>object</em> :</dt><dd><p>Instance of databroker v1 <code class="docutils literal notranslate"><span class="pre">Broker</span></code> or v2 <code class="docutils literal notranslate"><span class="pre">catalog</span></code>
(default: see <code class="docutils literal notranslate"><span class="pre">catalog_name</span></code> keyword argument)</p>
</dd>
<dt>catalog_name <em>str</em> :</dt><dd><p>Name of databroker v2 catalog, used when supplied <code class="docutils literal notranslate"><span class="pre">db</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.
(default: <code class="docutils literal notranslate"><span class="pre">mongodb_config</span></code>)</p>
</dd>
<dt>since <em>str</em> :</dt><dd><p>include runs that started on or after this ISO8601 time
(default: <code class="docutils literal notranslate"><span class="pre">1995-01-01</span></code>)</p>
</dd>
<dt>until <em>str</em> :</dt><dd><p>include runs that started before this ISO8601 time
(default: <code class="docutils literal notranslate"><span class="pre">2100-12-31</span></code>)</p>
</dd>
<dt>query <em>dict</em> :</dt><dd><p>mongo query dictionary, used to filter the results
(default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>)</p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
</dl>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;proposal_id&quot;</span><span class="p">)</span>
<span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;plan_name&quot;</span><span class="p">,</span> <span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;9idc&quot;</span><span class="p">,</span> <span class="n">since</span><span class="o">=</span><span class="s2">&quot;2020-07&quot;</span><span class="p">)</span>
<span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;beamline_id&quot;</span><span class="p">,</span> <span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;9idc&quot;</span><span class="p">)</span>
<span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;beamline_id&quot;</span><span class="p">,</span>
                    <span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;9idc&quot;</span><span class="p">,</span>
                    <span class="n">query</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;plan_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Flyscan&#39;</span><span class="p">},</span>
                    <span class="n">since</span><span class="o">=</span><span class="s2">&quot;2020&quot;</span><span class="p">,</span>
                    <span class="n">until</span><span class="o">=</span><span class="s2">&quot;2020-06-21 21:51&quot;</span><span class="p">)</span>
<span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;8id&quot;</span><span class="p">,</span> <span class="n">since</span><span class="o">=</span><span class="s2">&quot;2020-01&quot;</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="s2">&quot;2020-03&quot;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;apstools_test&quot;</span><span class="p">)</span>
<span class="o">=========</span> <span class="o">=====</span>
<span class="n">plan_name</span> <span class="c1">#runs</span>
<span class="o">=========</span> <span class="o">=====</span>
<span class="n">count</span>     <span class="mi">26</span>
<span class="n">scan</span>      <span class="mi">27</span>
<span class="o">=========</span> <span class="o">=====</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;usaxs_test&quot;</span><span class="p">)</span>
<span class="o">==========================</span> <span class="o">=====</span>
<span class="n">plan_name</span>                  <span class="c1">#runs</span>
<span class="o">==========================</span> <span class="o">=====</span>
<span class="n">Flyscan</span>                    <span class="mi">1</span>
<span class="n">TuneAxis</span><span class="o">.</span><span class="n">tune</span>              <span class="mi">1</span>
<span class="n">count</span>                      <span class="mi">1</span>
<span class="n">measure_USAXS_Transmission</span> <span class="mi">1</span>
<span class="n">run_Excel_file</span>             <span class="mi">1</span>
<span class="n">snapshot</span>                   <span class="mi">1</span>
<span class="n">tune_a2rp</span>                  <span class="mi">1</span>
<span class="n">tune_ar</span>                    <span class="mi">1</span>
<span class="n">tune_m2rp</span>                  <span class="mi">1</span>
<span class="n">tune_mr</span>                    <span class="mi">1</span>
<span class="o">==========================</span> <span class="o">=====</span>
</pre></div>
</div>
</dd></dl>

<section id="parsing-descriptor-documents">
<span id="module-apstools.utils.descriptor_support"></span><h3>Parsing descriptor documents<a class="headerlink" href="#parsing-descriptor-documents" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.descriptor_support.get_stream_data_map" title="apstools.utils.descriptor_support.get_stream_data_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_stream_data_map</span></code></a>(start_detectors, ...[, ...])</p></td>
<td><p>Return the names of the run's detector and motor signals.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.descriptor_support.get_stream_data_map">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.descriptor_support.</span></span><span class="sig-name descname"><span class="pre">get_stream_data_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_detectors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_motors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">descriptor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report_unknown</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/apstools/utils/descriptor_support.html#get_stream_data_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.descriptor_support.get_stream_data_map" title="Link to this definition">#</a></dt>
<dd><p>Return the names of the run’s detector and motor signals.</p>
<p>This function is used when processing the descriptor document of a run.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>start_detectors: list[str]</dt><dd><p>List of detectors provided to the plan (reported in start document).</p>
</dd>
<dt>start_motors: list[str]</dt><dd><p>List of motors provided to the plan (reported in start document).</p>
</dd>
<dt>descriptor: dict</dt><dd><p>The bluesky run ‘descriptor’ document published by the RunEngine.</p>
</dd>
<dt>report_unknown: bool</dt><dd><p>Should this function raise a KeyError if a signal is not found?
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
<p>RETURNS</p>
<p>Dictionary with keys: ‘detectors’, ‘motors’, ‘unassigned’.
Values are lists of signal names.</p>
<p>(new in release 1.7.4)</p>
</dd></dl>

<section id="device-information">
<span id="module-apstools.utils.device_info"></span><h3>Device information<a class="headerlink" href="#device-information" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.device_info.listdevice" title="apstools.utils.device_info.listdevice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listdevice</span></code></a>(obj[, scope, cname, dname, ...])</p></td>
<td><p>Describe the signal information from device <code class="docutils literal notranslate"><span class="pre">obj</span></code> in a pandas DataFrame.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.device_info.listdevice">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.device_info.</span></span><span class="sig-name descname"><span class="pre">listdevice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_pv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_datetime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_ancient</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_column_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">TableStyle.pyRestTable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_call_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/device_info.html#listdevice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.device_info.listdevice" title="Link to this definition">#</a></dt>
<dd><p>Describe the signal information from device <code class="docutils literal notranslate"><span class="pre">obj</span></code> in a pandas DataFrame.</p>
<p>Look through all subcomponents to find all the signals to be
shown. Components that are disconnected will be skipped and a
warning logged.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">listdevice</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span>
<span class="go">======================= ======= ==========================</span>
<span class="go">data name               value   timestamp                 </span>
<span class="go">======================= ======= ==========================</span>
<span class="go">m1                      0.0     2024-08-28 09:41:08.364137</span>
<span class="go">m1_user_setpoint        0.0     2024-08-28 09:41:08.364137</span>
<span class="go">m1_user_offset          0.0     2024-08-28 11:46:56.116048</span>
<span class="go">m1_user_offset_dir      0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_offset_freeze_switch 0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_set_use_switch       0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_velocity             1.0     2024-08-28 09:41:08.364137</span>
<span class="go">m1_acceleration         0.2     2024-08-28 09:41:08.364137</span>
<span class="go">m1_motor_egu            degrees 2024-08-28 09:41:08.364137</span>
<span class="go">m1_motor_is_moving      0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_motor_done_move      1       2024-08-28 11:46:56.116057</span>
<span class="go">m1_high_limit_switch    0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_low_limit_switch     0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_high_limit_travel    1000.0  2024-08-28 11:46:56.116048</span>
<span class="go">m1_low_limit_travel     -1000.0 2024-08-28 11:46:56.116048</span>
<span class="go">m1_direction_of_travel  0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_motor_stop           0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_home_forward         0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_home_reverse         0       2024-08-28 09:41:08.364137</span>
<span class="go">m1_steps_per_revolution 2000    2024-08-28 09:41:08.364137</span>
<span class="go">======================= ======= ==========================</span>
</pre></div>
</div>
<p>PARAMETERS</p>
<dl>
<dt>obj</dt><dd><p><em>object</em> : Instance of ophyd Signal or Device.</p>
</dd>
<dt>scope</dt><dd><p><em>str</em> or None : Scope of content to be shown.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;full&quot;</span></code> (or <code class="docutils literal notranslate"><span class="pre">None</span></code>) shows all Signal components</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;epics&quot;</span></code> shows only EPICS-based Signals</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;read&quot;</span></code> shows only the signals returned by <code class="docutils literal notranslate"><span class="pre">obj.read()</span></code></p></li>
</ul>
<p>default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt>cname</dt><dd><p><em>bool</em> : Show the _control_ (Python, dotted) name in column <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
<dt>dname</dt><dd><p><em>bool</em> : Show the _data_ (databroker, with underlines) name in
column <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">name</span></code>.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
<dt>show_pv</dt><dd><p><em>bool</em> : Show the EPICS process variable (PV) name in
column <code class="docutils literal notranslate"><span class="pre">PV</span></code>.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Special case when <code class="docutils literal notranslate"><span class="pre">show_pv=True</span></code>:
If <code class="docutils literal notranslate"><span class="pre">cname</span></code> is not provided, it will be set <code class="docutils literal notranslate"><span class="pre">True</span></code>.
If <code class="docutils literal notranslate"><span class="pre">dname</span></code> is not provided, it will be set <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div>
</dd>
<dt>use_datetime <em>bool</em> :</dt><dd><p>Show the EPICS timestamp (time of last update) in
column <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
<dt>show_ancient <em>bool</em> :</dt><dd><p>Show uninitialized EPICS process variables.</p>
<p>In EPICS, an uninitialized PV has a timestamp of 1990-01-01 UTC.
This option enables or suppresses ancient values identified
by timestamp from 1989.  These are values only defined in
the original <code class="docutils literal notranslate"><span class="pre">.db</span></code> file.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
<dt>max_column_width <em>int</em> or <em>None</em> :</dt><dd><p>Truncate long columns to no more than this length.  If not default,
then table will be formatted using pyRestTable.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">None</span></code> (will use <code class="docutils literal notranslate"><span class="pre">50</span></code>)</p>
</dd>
<dt>table_style <em>object</em> :</dt><dd><p>Either <code class="docutils literal notranslate"><span class="pre">apstools.utils.TableStyle.pandas</span></code> (default) or
using values from <code class="xref py py-class docutils literal notranslate"><span class="pre">apstools.utils.TableStyle</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> wll truncate long text
to at most 50 characters.</p>
</div>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="docutils literal notranslate"><span class="pre">listdevice()</span></code> in <a class="reference internal" href="../examples/ho_list_control_objects.html"><span class="doc">What are the objects to control?</span></a></p>
</div>
</dd></dl>

<section id="email-support">
<span id="module-apstools.utils.email"></span><h3>email Support<a class="headerlink" href="#email-support" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.email.EmailNotifications" title="apstools.utils.email.EmailNotifications"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EmailNotifications</span></code></a>([sender])</p></td>
<td><p>send email notifications when requested</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.email.EmailNotifications">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.email.</span></span><span class="sig-name descname"><span class="pre">EmailNotifications</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sender</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/email.html#EmailNotifications"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.email.EmailNotifications" title="Link to this definition">#</a></dt>
<dd><p>send email notifications when requested</p>
<p id="index-0">use default OS mail utility (so no credentials needed)</p>
<p>EXAMPLE</p>
<p>Send email(s) when <cite>feedback_limits_approached</cite>
(a hypothetical boolean) is <cite>True</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># setup</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">apstools.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">EmailNotifications</span>

<span class="n">SENDER_EMAIL</span> <span class="o">=</span> <span class="s2">&quot;instrument_user@email.host.tld&quot;</span>

<span class="n">email_notices</span> <span class="o">=</span> <span class="n">EmailNotifications</span><span class="p">(</span><span class="n">SENDER_EMAIL</span><span class="p">)</span>
<span class="n">email_notices</span><span class="o">.</span><span class="n">add_addresses</span><span class="p">(</span>
    <span class="c1"># This list receives email when send() is called.</span>
    <span class="s2">&quot;joe.user@goodmail.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;instrument_team@email.host.tld&quot;</span><span class="p">,</span>
    <span class="c1"># others?</span>
<span class="p">)</span>

<span class="c1"># ... later</span>

<span class="k">if</span> <span class="n">feedback_limits_approached</span><span class="p">:</span>
    <span class="c1"># send emails to list</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;Feedback problem&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Feedback is very close to its limits.&quot;</span>
    <span class="n">email_notices</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<section id="statistical-peak-analysis-functions">
<span id="module-apstools.utils.image_analysis"></span><h3>Statistical peak analysis functions<a class="headerlink" href="#statistical-peak-analysis-functions" title="Link to this heading">#</a></h3>
<p>Uses <em>pysumreg</em> package (<a class="reference external" href="https://prjemian.github.io/pysumreg/">https://prjemian.github.io/pysumreg/</a>) to obtain summary
statistics.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.image_analysis.analyze_1D" title="apstools.utils.image_analysis.analyze_1D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">analyze_1D</span></code></a>(y_arr[, x_arr])</p></td>
<td><p>Measures of 1D data peak center &amp; width.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.image_analysis.analyze_2D" title="apstools.utils.image_analysis.analyze_2D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">analyze_2D</span></code></a>(image)</p></td>
<td><p>Analyze 2-D (image) data.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.image_analysis.analyze_1D">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.image_analysis.</span></span><span class="sig-name descname"><span class="pre">analyze_1D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_arr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/image_analysis.html#analyze_1D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.image_analysis.analyze_1D" title="Link to this definition">#</a></dt>
<dd><p>Measures of 1D data peak center &amp; width.</p>
<p>Return result is a dictionary prepared by the
<code class="docutils literal notranslate"><span class="pre">to_dict(use_registers=True)</span></code> method of the
<code class="docutils literal notranslate"><span class="pre">pysumreg.SummationRegisters()</span></code> class.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;mean_x&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;mean_y&#39;</span><span class="p">:</span> <span class="mf">7.2</span><span class="p">,</span>
<span class="s1">&#39;stddev_x&#39;</span><span class="p">:</span> <span class="mf">1.5811388300841898</span><span class="p">,</span> <span class="s1">&#39;stddev_y&#39;</span><span class="p">:</span> <span class="mf">3.3466401061363027</span><span class="p">,</span>
<span class="s1">&#39;slope&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;intercept&#39;</span><span class="p">:</span> <span class="mf">7.2</span><span class="p">,</span> <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="s1">&#39;centroid&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">1.1547005383792515</span><span class="p">,</span>
<span class="s1">&#39;min_x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;max_x&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;min_y&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;max_y&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
<span class="s1">&#39;x_at_max_y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span> <span class="mi">36</span><span class="p">,</span> <span class="s1">&#39;XX&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span>
<span class="s1">&#39;XXY&#39;</span><span class="p">:</span> <span class="mi">192</span><span class="p">,</span> <span class="s1">&#39;YY&#39;</span><span class="p">:</span> <span class="mi">304</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.image_analysis.analyze_2D">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.image_analysis.</span></span><span class="sig-name descname"><span class="pre">analyze_2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/image_analysis.html#analyze_2D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.image_analysis.analyze_2D" title="Link to this definition">#</a></dt>
<dd><p>Analyze 2-D (image) data.</p>
<p>Return result is a dictionary with the statistical results for a peak
analysis, grouped in pairs (row, column) as it makes sense given
<code class="docutils literal notranslate"><span class="pre">frame[rows][columns]</span></code>.
The <span class="math notranslate nohighlight">\(x\)</span> values are the index number along the respective axis.</p>
<p>For this image data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This is the analysis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
 <span class="s1">&#39;centroid&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">2.1628</span><span class="p">,</span> <span class="mf">1.814</span><span class="p">),</span>
 <span class="s1">&#39;sigma&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.1192</span><span class="p">,</span> <span class="mf">0.8695</span><span class="p">),</span>
 <span class="s1">&#39;peak_position&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
 <span class="s1">&#39;max_y&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<section id="directory-of-the-known-plans">
<span id="module-apstools.utils.list_plans"></span><h3>Directory of the known plans<a class="headerlink" href="#directory-of-the-known-plans" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_plans.listplans" title="apstools.utils.list_plans.listplans"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listplans</span></code></a>([base, trunc, table_style])</p></td>
<td><p>List all plans.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_plans.listplans">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_plans.</span></span><span class="sig-name descname"><span class="pre">listplans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trunc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">TableStyle.pyRestTable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_plans.html#listplans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_plans.listplans" title="Link to this definition">#</a></dt>
<dd><p>List all plans.  (Actually, lists all generator functions).</p>
<p>NOTE: Can only detect generator functions.
Bluesky plans are generator functions that generate
<code class="docutils literal notranslate"><span class="pre">bluesky.Msg</span></code> objects.  There is a PR to define
a decorator that identifies a generator function
as a bluesky plan.</p>
<p>PARAMETERS</p>
<dl>
<dt>base <em>object</em> or <em>None</em> :</dt><dd><p>Object that contains plan methods (if <code class="docutils literal notranslate"><span class="pre">None</span></code>, use global namespace.)
(default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
</dd>
<dt>trunc <em>int</em> :</dt><dd><p>Truncate long docstrings to no more than <code class="docutils literal notranslate"><span class="pre">trunc</span></code> characters.
(default: 50)</p>
</dd>
<dt>table_style <em>object</em> :</dt><dd><p>Either <code class="docutils literal notranslate"><span class="pre">TableStyle.pyRestTable</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">TableStyle.pandas</span></code>,
using values from <code class="xref py py-class docutils literal notranslate"><span class="pre">apstools.utils.TableStyle</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> wll truncate long text to at most 50 characters.</p>
</div>
</dd>
</dl>
</dd></dl>

<section id="directory-of-bluesky-runs">
<span id="module-apstools.utils.list_runs"></span><h3>Directory of bluesky runs<a class="headerlink" href="#directory-of-bluesky-runs" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.getRunData" title="apstools.utils.list_runs.getRunData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getRunData</span></code></a>(scan_id[, db, stream, query, use_v1])</p></td>
<td><p>Convenience function to get the run's data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.getRunDataValue" title="apstools.utils.list_runs.getRunDataValue"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getRunDataValue</span></code></a>(scan_id, key[, db, stream, ...])</p></td>
<td><p>Convenience function to get value of key in run stream.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listRunKeys" title="apstools.utils.list_runs.listRunKeys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listRunKeys</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Convenience function to list all keys (column names) in the scan's stream (default: primary).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns" title="apstools.utils.list_runs.ListRuns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ListRuns</span></code></a>([cat, query, keys, missing, num, ...])</p></td>
<td><p>List the runs from the given catalog according to some options.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listruns" title="apstools.utils.list_runs.listruns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listruns</span></code></a>([cat, keys, missing, num, ...])</p></td>
<td><p>List runs from catalog.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.summarize_runs" title="apstools.utils.list_runs.summarize_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summarize_runs</span></code></a>([since, db])</p></td>
<td><p>Report bluesky run metrics from the databroker.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.list_runs.ListRuns">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">ListRuns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">since</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sortby</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'time'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timefmt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'%Y-%m-%d</span> <span class="pre">%H:%M:%S'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">until</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hints_override</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#ListRuns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.ListRuns" title="Link to this definition">#</a></dt>
<dd><p>List the runs from the given catalog according to some options.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ListRuns</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
</pre></div>
</div>
<p>PUBLIC METHODS</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns.to_dataframe" title="apstools.utils.list_runs.ListRuns.to_dataframe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dataframe</span></code></a>()</p></td>
<td><p><strong>Deprecated</strong>: Output as pandas DataFrame object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns.to_table" title="apstools.utils.list_runs.ListRuns.to_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_table</span></code></a>([fmt])</p></td>
<td><p><strong>Deprecated</strong>: Output as pyRestTable object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns.parse_runs" title="apstools.utils.list_runs.ListRuns.parse_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_runs</span></code></a>()</p></td>
<td><p>Parse the runs for the given metadata keys.</p></td>
</tr>
</tbody>
</table>
</div>
<p>INTERNAL METHODS</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">_get_by_key</span></code>(md, key)</p></td>
<td><p>Get run's metadata value by key.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">_check_cat</span></code>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">_apply_search_filters</span></code>()</p></td>
<td><p>Search for runs from the catalog.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">_check_keys</span></code>()</p></td>
<td><p>Check that self.keys is a list of strings.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.list_runs.ListRuns.parse_runs">
<span class="sig-name descname"><span class="pre">parse_runs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#ListRuns.parse_runs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.ListRuns.parse_runs" title="Link to this definition">#</a></dt>
<dd><p>Parse the runs for the given metadata keys.  Return a dict.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.list_runs.ListRuns.to_dataframe">
<span class="sig-name descname"><span class="pre">to_dataframe</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#ListRuns.to_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.ListRuns.to_dataframe" title="Link to this definition">#</a></dt>
<dd><p><strong>Deprecated</strong>: Output as pandas DataFrame object</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.6.14.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.list_runs.ListRuns.to_table">
<span class="sig-name descname"><span class="pre">to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#ListRuns.to_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.ListRuns.to_table" title="Link to this definition">#</a></dt>
<dd><p><strong>Deprecated</strong>: Output as pyRestTable object.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.6.14.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.getRunData">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">getRunData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'primary'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_v1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#getRunData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.getRunData" title="Link to this definition">#</a></dt>
<dd><p>Convenience function to get the run’s data.  Default is the <code class="docutils literal notranslate"><span class="pre">primary</span></code> stream.</p>
<p>PARAMETERS</p>
<dl>
<dt>scan_id</dt><dd><p><em>int</em> or <em>str</em> :
Scan (run) identifier.
Positive integer value is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> from run’s metadata.
Negative integer value is since most recent run in databroker.
String is run’s <code class="docutils literal notranslate"><span class="pre">uid</span></code> unique identifier (can abbreviate to
the first characters needed to assure it is unique).</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.
Default: will search existing session for instance.</p>
</dd>
<dt>stream</dt><dd><p><em>str</em> :
Name of the bluesky data stream to obtain the data.
Default: ‘primary’</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
<dt>use_v1</dt><dd><p><em>bool</em> :
Chooses databroker API version between ‘v1’ or ‘v2’.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> (meaning use the v1 API)</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.5.1.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.getRunDataValue">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">getRunDataValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'primary'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_v1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#getRunDataValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.getRunDataValue" title="Link to this definition">#</a></dt>
<dd><p>Convenience function to get value of key in run stream.</p>
<p>Defaults are last value of key in primary stream.</p>
<p>PARAMETERS</p>
<dl>
<dt>scan_id</dt><dd><p><em>int</em> or <em>str</em> :
Scan (run) identifier.
Positive integer value is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> from run’s metadata.
Negative integer value is since most recent run in databroker.
String is run’s <code class="docutils literal notranslate"><span class="pre">uid</span></code> unique identifier (can abbreviate to
the first characters needed to assure it is unique).</p>
</dd>
<dt>key</dt><dd><p><em>str</em> :
Name of the key (data column) in the table of the stream’s data.
Must match <em>identically</em>.</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.
Default: will search existing session for instance.</p>
</dd>
<dt>stream</dt><dd><p><em>str</em> :
Name of the bluesky data stream to obtain the data.
Default: ‘primary’</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
<dt>idx</dt><dd><p><em>int</em> or <em>str</em> :
List index of value to be returned from column of table.
Can be <code class="docutils literal notranslate"><span class="pre">0</span></code> for first value, <code class="docutils literal notranslate"><span class="pre">-1</span></code> for last value, <code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code>
for average value, or <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> for the full list of values.
Default: <code class="docutils literal notranslate"><span class="pre">-1</span></code></p>
</dd>
<dt>use_v1</dt><dd><p><em>bool</em> :
Chooses databroker API version between ‘v1’ or ‘v2’.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> (meaning use the v1 API)</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.5.1.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.listRunKeys">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">listRunKeys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_fragment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'primary'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_v1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#listRunKeys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.listRunKeys" title="Link to this definition">#</a></dt>
<dd><p>Convenience function to list all keys (column names) in the scan’s stream (default: primary).</p>
<p>PARAMETERS</p>
<dl>
<dt>scan_id</dt><dd><p><em>int</em> or <em>str</em> :
Scan (run) identifier.
Positive integer value is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> from run’s metadata.
Negative integer value is since most recent run in databroker.
String is run’s <code class="docutils literal notranslate"><span class="pre">uid</span></code> unique identifier (can abbreviate to
the first characters needed to assure it is unique).</p>
</dd>
<dt>key_fragment</dt><dd><p><em>str</em> :
Part or all of key name to be found in selected stream.
For instance, if you specify <code class="docutils literal notranslate"><span class="pre">key_fragment=&quot;lakeshore&quot;</span></code>,
it will return all the keys that include <code class="docutils literal notranslate"><span class="pre">lakeshore</span></code>.</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.
Default: will search existing session for instance.</p>
</dd>
<dt>stream</dt><dd><p><em>str</em> :
Name of the bluesky data stream to obtain the data.
Default: ‘primary’</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
<dt>strict</dt><dd><p><em>bool</em> :
Should the <code class="docutils literal notranslate"><span class="pre">key_fragment</span></code> be matched identically (<code class="docutils literal notranslate"><span class="pre">strict=True</span></code>)
or matched by lower case comparison (<code class="docutils literal notranslate"><span class="pre">strict=False</span></code>)?
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
<dt>use_v1</dt><dd><p><em>bool</em> :
Chooses databroker API version between ‘v1’ or ‘v2’.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> (meaning use the v1 API)</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.5.1.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.listruns">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">listruns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">since</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sortby</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'time'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tablefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">TableStyle.pyRestTable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%Y-%m-%d</span> <span class="pre">%H:%M:%S'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">until</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hints_override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">query</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#listruns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.listruns" title="Link to this definition">#</a></dt>
<dd><p>List runs from catalog.</p>
<p>This function provides a thin interface to the highly-reconfigurable
<code class="docutils literal notranslate"><span class="pre">ListRuns()</span></code> class in this package.</p>
<p>PARAMETERS</p>
<dl>
<dt>cat</dt><dd><p><em>object</em> :
Instance of databroker v1 or v2 catalog.</p>
</dd>
<dt>keys</dt><dd><p><em>str</em> or <em>[str]</em> or None:
Include these additional keys from the start document.
(default: <code class="docutils literal notranslate"><span class="pre">None</span></code> means <code class="docutils literal notranslate"><span class="pre">&quot;scan_id</span> <span class="pre">time</span> <span class="pre">plan_name</span> <span class="pre">detectors&quot;</span></code>)</p>
</dd>
<dt>missing</dt><dd><p><em>str</em>:
Test to report when a value is not available.
(default: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p>
</dd>
<dt>hints_override <em>bool</em>:</dt><dd><p>For a key that appears in both the metadata and the hints,
override the metadata value if the same key is found in the hints.
(default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p>
</dd>
<dt>ids</dt><dd><p><em>[int]</em> or <em>[str]</em>:
List of <code class="docutils literal notranslate"><span class="pre">uid</span></code> or <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> value(s).
Can mix different kinds in the same list.
Also can specify offsets (e.g., <code class="docutils literal notranslate"><span class="pre">-1</span></code>).
According to the rules for <code class="docutils literal notranslate"><span class="pre">databroker</span></code> catalogs,
a string is a <code class="docutils literal notranslate"><span class="pre">uid</span></code> (partial representations allowed),
an int is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> if positive or an offset if negative.
(default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
</dd>
<dt>num</dt><dd><p><em>int</em> :
Make the table include the <code class="docutils literal notranslate"><span class="pre">num</span></code> most recent runs.
(default: <code class="docutils literal notranslate"><span class="pre">20</span></code>)</p>
</dd>
<dt>printing <em>bool</em> or <em>str</em> :</dt><dd><p>Deprecated.</p>
</dd>
<dt>reverse</dt><dd><p><em>bool</em> :
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, sort in descending order by <code class="docutils literal notranslate"><span class="pre">sortby</span></code>.
(default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
</dd>
<dt>since</dt><dd><p><em>str</em> :
include runs that started on or after this ISO8601 time
(default: <code class="docutils literal notranslate"><span class="pre">&quot;1995-01-01&quot;</span></code>)</p>
</dd>
<dt>sortby</dt><dd><p><em>str</em> :
Sort columns by this key, found by exact match in either
the <code class="docutils literal notranslate"><span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">stop</span></code> document.
(default: <code class="docutils literal notranslate"><span class="pre">&quot;time&quot;</span></code>)</p>
</dd>
<dt>tablefmt <em>str</em> :</dt><dd><p>Deprecated.  Use <code class="docutils literal notranslate"><span class="pre">table_style</span></code> instead.</p>
</dd>
<dt>table_style <em>object</em> :</dt><dd><p>Either <code class="docutils literal notranslate"><span class="pre">TableStyle.pyRestTable</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">TableStyle.pandas</span></code>,
using values from <code class="xref py py-class docutils literal notranslate"><span class="pre">apstools.utils.TableStyle</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> wll truncate long text to at most 50 characters.</p>
</div>
</dd>
<dt>timefmt</dt><dd><p><em>str</em> :
The <code class="docutils literal notranslate"><span class="pre">time</span></code> key (also includes keys <code class="docutils literal notranslate"><span class="pre">&quot;start.time&quot;</span></code> and  <code class="docutils literal notranslate"><span class="pre">&quot;stop.time&quot;</span></code>)
will be formatted by the <code class="docutils literal notranslate"><span class="pre">self.timefmt</span></code> value.
See <a class="reference external" href="https://strftime.org/">https://strftime.org/</a> for examples.  The special <code class="docutils literal notranslate"><span class="pre">timefmt=&quot;raw&quot;</span></code>
is used to report time as the raw value (floating point time as used in
python’s <code class="docutils literal notranslate"><span class="pre">time.time()</span></code>).
(default: <code class="docutils literal notranslate"><span class="pre">&quot;%Y-%m-%d</span> <span class="pre">%H:%M:%S&quot;,</span></code>)</p>
</dd>
<dt>until</dt><dd><p><em>str</em> :
include runs that started before this ISO8601 time
(default: <code class="docutils literal notranslate"><span class="pre">2100-12-31</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">**query</span></code></dt><dd><p><em>dict</em> :
Any additional keyword arguments will be passed to
the databroker to refine the search for matching runs
using the <code class="docutils literal notranslate"><span class="pre">mongoquery</span></code> package.</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>object:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">pd.DataFrame()</span></code> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.summarize_runs">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">summarize_runs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">since</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#summarize_runs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.summarize_runs" title="Link to this definition">#</a></dt>
<dd><p>Report bluesky run metrics from the databroker.</p>
<ul class="simple">
<li><p>How many different plans?</p></li>
<li><p>How many runs?</p></li>
<li><p>How many times each run was used?</p></li>
<li><p>How frequently?  (TODO:)</p></li>
</ul>
<p>PARAMETERS</p>
<dl class="simple">
<dt>since</dt><dd><p><em>str</em> :
Report all runs since this ISO8601 date &amp; time
(default: <code class="docutils literal notranslate"><span class="pre">1995</span></code>)</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Instance of <code class="docutils literal notranslate"><span class="pre">databroker.Broker()</span></code>
(default: <code class="docutils literal notranslate"><span class="pre">db</span></code> from the IPython shell)</p>
</dd>
</dl>
</dd></dl>

<section id="support-for-logging">
<span id="module-apstools.utils.log_utils"></span><h3>Support for logging<a class="headerlink" href="#support-for-logging" title="Link to this heading">#</a></h3>
<p>There is a guide describing <a class="reference internal" href="../examples/ho_session_logs.html#howto-session-logs"><span class="std std-ref">How to setup logging</span></a>.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.log_utils.file_log_handler" title="apstools.utils.log_utils.file_log_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_log_handler</span></code></a>(file_name_base[, maxBytes, ...])</p></td>
<td><p>Record logging output to a file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.log_utils.get_log_path" title="apstools.utils.log_utils.get_log_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_log_path</span></code></a>()</p></td>
<td><p>Return a path to <cite>./.logs</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.log_utils.setup_IPython_console_logging" title="apstools.utils.log_utils.setup_IPython_console_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_IPython_console_logging</span></code></a>([logger, ...])</p></td>
<td><p>Record all input (<code class="docutils literal notranslate"><span class="pre">In</span></code>) and output (<code class="docutils literal notranslate"><span class="pre">Out</span></code>) from IPython console.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.log_utils.stream_log_handler" title="apstools.utils.log_utils.stream_log_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stream_log_handler</span></code></a>([formatter, level])</p></td>
<td><p>Record logging output to a stream (such as the console).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.log_utils.file_log_handler">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">file_log_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name_base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxBytes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backupCount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/log_utils.html#file_log_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.log_utils.file_log_handler" title="Link to this definition">#</a></dt>
<dd><p>Record logging output to a file.</p>
<p>PARAMETERS</p>
<dl>
<dt>file_name_base<span class="classifier"><em>str</em></span></dt><dd><p>Part of the name to store the log file. Full name is
<code class="docutils literal notranslate"><span class="pre">f&quot;&lt;log_path&gt;/{file_name_base}.log&quot;</span></code> in present working directory.</p>
</dd>
<dt>log_path<span class="classifier"><em>str</em></span></dt><dd><p>Part of the name to store the log file. Full name is
<code class="docutils literal notranslate"><span class="pre">f&quot;&lt;log_path&gt;/{file_name_base}.log&quot;</span></code> in present working directory.
default: (the present working directory)/LOG_DIR_BASE</p>
</dd>
<dt>level<span class="classifier"><em>int</em></span></dt><dd><p>Threshold for reporting messages with this logger. Logging messages
which are less severe than <code class="docutils literal notranslate"><span class="pre">level</span></code> will be ignored.
default: 10 (<code class="docutils literal notranslate"><span class="pre">logging.DEBUG</span></code> or <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>)
see: <a class="reference external" href="https://docs.python.org/3/library/logging.html#levels">https://docs.python.org/3/library/logging.html#levels</a></p>
</dd>
<dt>maxBytes<span class="classifier">(optional) <em>int</em></span></dt><dd><p>Log file <em>rollover</em> begins whenever the current log file is nearly
<em>maxBytes</em> in length.  A new file is written when the current line will
push the current file beyond this limit.
default: 0</p>
</dd>
<dt>backupCount<span class="classifier">(optional) <em>int</em></span></dt><dd><p>When <em>backupCount</em> is non-zero, the system will keep up to <em>backupCount</em>
numbered log files (with added extensions <cite>.1</cite>, ‘.2`, …).  The current
log file always has no numbered extension.  The previous log file is the
one with the lowest extension number.
default: 0</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When either <code class="docutils literal notranslate"><span class="pre">maxBytes</span></code> or <code class="docutils literal notranslate"><span class="pre">backupCount</span></code> are zero,
log file rollover never occurs, so you generally want to set
<code class="docutils literal notranslate"><span class="pre">backupCount</span></code> to at least 1, and have a non-zero <code class="docutils literal notranslate"><span class="pre">maxBytes</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.log_utils.get_log_path">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">get_log_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/log_utils.html#get_log_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.log_utils.get_log_path" title="Link to this definition">#</a></dt>
<dd><p>Return a path to <cite>./.logs</cite>. Create directory if it does not exist.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.log_utils.setup_IPython_console_logging">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">setup_IPython_console_logging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ipython_console.log'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/log_utils.html#setup_IPython_console_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.log_utils.setup_IPython_console_logging" title="Link to this definition">#</a></dt>
<dd><p>Record all input (<code class="docutils literal notranslate"><span class="pre">In</span></code>) and output (<code class="docutils literal notranslate"><span class="pre">Out</span></code>) from IPython console.</p>
<p>PARAMETERS</p>
<dl>
<dt>logger</dt><dd><p><em>object</em>:
Instance of <code class="docutils literal notranslate"><span class="pre">logging.Logger</span></code>.</p>
</dd>
<dt>filename</dt><dd><p><em>str</em>:
Name of the log file.
(default: <code class="docutils literal notranslate"><span class="pre">ipython_console.log</span></code>)</p>
</dd>
<dt>log_path<span class="classifier"><em>str</em></span></dt><dd><p>Directory to store the log file. Full name is
<code class="docutils literal notranslate"><span class="pre">f&quot;&lt;log_path&gt;/{file_name_base}.log&quot;</span></code>.
default: (the present working directory)/LOG_DIR_BASE</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.log_utils.stream_log_handler">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">stream_log_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formatter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'INFO'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/log_utils.html#stream_log_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.log_utils.stream_log_handler" title="Link to this definition">#</a></dt>
<dd><p>Record logging output to a stream (such as the console).</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>formatter</dt><dd><p><em>object</em>:
Instance of <code class="docutils literal notranslate"><span class="pre">logging.Formatter</span></code>.</p>
</dd>
<dt>level</dt><dd><p><em>str</em>:
Name of the logging level to report.
(default: <code class="docutils literal notranslate"><span class="pre">INFO</span></code>)</p>
</dd>
</dl>
</dd></dl>

<section id="diagnostic-support-for-memory">
<span id="module-apstools.utils.memory"></span><h3>Diagnostic Support for Memory<a class="headerlink" href="#diagnostic-support-for-memory" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.memory.rss_mem" title="apstools.utils.memory.rss_mem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rss_mem</span></code></a>()</p></td>
<td><p>return memory used by this process</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.memory.rss_mem">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.memory.</span></span><span class="sig-name descname"><span class="pre">rss_mem</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/memory.html#rss_mem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.memory.rss_mem" title="Link to this definition">#</a></dt>
<dd><p>return memory used by this process</p>
</dd></dl>

<section id="miscellaneous-support">
<span id="module-apstools.utils.misc"></span><h3>Miscellaneous Support<a class="headerlink" href="#miscellaneous-support" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.call_signature_decorator" title="apstools.utils.misc.call_signature_decorator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">call_signature_decorator</span></code></a>(f)</p></td>
<td><p>Get the names of all function parameters supplied by the caller.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.cleanupText" title="apstools.utils.misc.cleanupText"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanupText</span></code></a>(text[, replace])</p></td>
<td><p>Convert text so it can be used as a dictionary key.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.connect_pvlist" title="apstools.utils.misc.connect_pvlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_pvlist</span></code></a>(pvlist[, wait, timeout, ...])</p></td>
<td><p>Given list of EPICS PV names, return dict of EpicsSignal objects.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.count_child_devices_and_signals" title="apstools.utils.misc.count_child_devices_and_signals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count_child_devices_and_signals</span></code></a>(device)</p></td>
<td><p>Dict with number of children of this device.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.count_common_subdirs" title="apstools.utils.misc.count_common_subdirs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count_common_subdirs</span></code></a>(p1, p2)</p></td>
<td><p>Count how many subdirectories are common to both file paths.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.dictionary_table" title="apstools.utils.misc.dictionary_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dictionary_table</span></code></a>(dictionary, **kwargs)</p></td>
<td><p>Return a text table from <code class="docutils literal notranslate"><span class="pre">dictionary</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.dynamic_import" title="apstools.utils.misc.dynamic_import"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dynamic_import</span></code></a>(full_path)</p></td>
<td><p>Import the object given its import path as text.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.full_dotted_name" title="apstools.utils.misc.full_dotted_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_dotted_name</span></code></a>(obj)</p></td>
<td><p>Return the full dotted name</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.itemizer" title="apstools.utils.misc.itemizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">itemizer</span></code></a>(fmt, items)</p></td>
<td><p>Format a list of items.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.listobjects" title="apstools.utils.misc.listobjects"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listobjects</span></code></a>([show_pv, printing, verbose, ...])</p></td>
<td><p>Show all the ophyd Signal and Device objects defined as globals.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.pairwise" title="apstools.utils.misc.pairwise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pairwise</span></code></a>(iterable)</p></td>
<td><p>break a list (or other iterable) into pairs</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.print_RE_md" title="apstools.utils.misc.print_RE_md"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_RE_md</span></code></a>([dictionary, fmt, printing])</p></td>
<td><p>custom print the RunEngine metadata in a table</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.redefine_motor_position" title="apstools.utils.misc.redefine_motor_position"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redefine_motor_position</span></code></a>(motor, new_position)</p></td>
<td><p>Set EPICS motor record's user coordinate to <code class="docutils literal notranslate"><span class="pre">new_position</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.render" title="apstools.utils.misc.render"><code class="xref py py-obj docutils literal notranslate"><span class="pre">render</span></code></a>(value[, sig_figs])</p></td>
<td><p>Round-off floating-point numbers to sig_figs.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.replay" title="apstools.utils.misc.replay"><code class="xref py py-obj docutils literal notranslate"><span class="pre">replay</span></code></a>(headers[, callback, sort])</p></td>
<td><p>Replay the document stream from one (or more) scans (headers).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.run_in_thread" title="apstools.utils.misc.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_in_thread</span></code></a>(func)</p></td>
<td><p>(decorator) run <code class="docutils literal notranslate"><span class="pre">func</span></code> in thread</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.safe_ophyd_name" title="apstools.utils.misc.safe_ophyd_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">safe_ophyd_name</span></code></a>(text)</p></td>
<td><p>make text safe to be used as an ophyd object name</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.split_quoted_line" title="apstools.utils.misc.split_quoted_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">split_quoted_line</span></code></a>(line)</p></td>
<td><p>splits a line into words some of which might be quoted</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.text_encode" title="apstools.utils.misc.text_encode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">text_encode</span></code></a>(source)</p></td>
<td><p>Encode <code class="docutils literal notranslate"><span class="pre">source</span></code> using the default codepoint.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.to_unicode_or_bust" title="apstools.utils.misc.to_unicode_or_bust"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_unicode_or_bust</span></code></a>(obj[, encoding])</p></td>
<td><p>from: <a class="reference external" href="http://farmdev.com/talks/unicode/">http://farmdev.com/talks/unicode/</a>  .</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.trim_string_for_EPICS" title="apstools.utils.misc.trim_string_for_EPICS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_string_for_EPICS</span></code></a>(msg)</p></td>
<td><p>String must not exceed EPICS PV length.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.unix" title="apstools.utils.misc.unix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unix</span></code></a>(command[, raises])</p></td>
<td><p>Run a UNIX command, returns (stdout, stderr).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.call_signature_decorator">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">call_signature_decorator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#call_signature_decorator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.call_signature_decorator" title="Link to this definition">#</a></dt>
<dd><p>Get the names of all function parameters supplied by the caller.</p>
<p>This is used to differentiate user-supplied parameters from as-defined
parameters with the same value.</p>
<p>HOW TO USE THIS DECORATOR:</p>
<p>Decorate a function or method with this decorator <em>and</em> add an additional
<cite>_call_args=None</cite> kwarg to the function. The function can test <cite>_call_args</cite>
if a specific kwarg was supplied by the caller.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@call_signature_decorator</span>
<span class="k">def</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_call_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="s1">&#39;c&#39;</span> <span class="ow">in</span> <span class="n">_call_args</span><span class="p">:</span>  <span class="c1"># Caller supplied this kwarg?</span>
        <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With <code class="docutils literal notranslate"><span class="pre">call_signature_decorator</span></code>, it is not possible to get the names
of the positional arguments.  Since positional parameters are not specified by
name, such capability is not expected to become a requirement.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">See<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://stackoverflow.com/questions/14749328#58166804">https://stackoverflow.com/questions/14749328#58166804</a>
(how-to-check-whether-optional-function-parameter-is-set)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.cleanupText">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">cleanupText</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#cleanupText"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.cleanupText" title="Link to this definition">#</a></dt>
<dd><p>Convert text so it can be used as a dictionary key.</p>
<p>Given some input text string, return a clean version
remove troublesome characters, perhaps other cleanup as well.
This is best done with regular expression pattern matching.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.connect_pvlist">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">connect_pvlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poll_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#connect_pvlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.connect_pvlist" title="Link to this definition">#</a></dt>
<dd><p>Given list of EPICS PV names, return dict of EpicsSignal objects.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>pvlist</dt><dd><p><em>[str]</em> :
list of EPICS PV names</p>
</dd>
<dt>wait</dt><dd><p><em>bool</em> :
should wait for EpicsSignal objects to connect
(default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
</dd>
<dt>timeout</dt><dd><p><em>float</em> :
maximum time to wait for PV connections, seconds
(default: 2.0)</p>
</dd>
<dt>poll_interval</dt><dd><p><em>float</em> :
time to sleep between checks for PV connections, seconds
(default: 0.1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.count_child_devices_and_signals">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">count_child_devices_and_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#count_child_devices_and_signals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.count_child_devices_and_signals" title="Link to this definition">#</a></dt>
<dd><p>Dict with number of children of this device.  Keys: Device and Signal.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.count_common_subdirs">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">count_common_subdirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#count_common_subdirs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.count_common_subdirs" title="Link to this definition">#</a></dt>
<dd><p>Count how many subdirectories are common to both file paths.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.dictionary_table">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">dictionary_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictionary</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#dictionary_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.dictionary_table" title="Link to this definition">#</a></dt>
<dd><p>Return a text table from <code class="docutils literal notranslate"><span class="pre">dictionary</span></code>.</p>
<p>Dictionary keys in first column, values in second.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>dictionary</dt><dd><p><em>dict</em> :
Python dictionary</p>
</dd>
</dl>
<p>Note:  Keyword arguments parameters
are kept for compatibility with previous
versions of apstools.  They are ignored now.</p>
<p>RETURNS</p>
<dl class="simple">
<dt>table</dt><dd><p><em>object</em> or <code class="docutils literal notranslate"><span class="pre">None</span></code> :
<code class="docutils literal notranslate"><span class="pre">pyRestTable.Table()</span></code> object (multiline text table)
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if dictionary has no contents</p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">RE</span><span class="o">.</span><span class="n">md</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;login_id&#39;</span><span class="p">:</span> <span class="s1">&#39;jemian:wow.aps.anl.gov&#39;</span><span class="p">,</span> <span class="s1">&#39;beamline_id&#39;</span><span class="p">:</span> <span class="s1">&#39;developer&#39;</span><span class="p">,</span> <span class="s1">&#39;proposal_id&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">:</span> <span class="mi">19072</span><span class="p">,</span> <span class="s1">&#39;scan_id&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;bluesky&#39;</span><span class="p">:</span> <span class="s1">&#39;1.5.2&#39;</span><span class="p">,</span> <span class="s1">&#39;ophyd&#39;</span><span class="p">:</span> <span class="s1">&#39;1.3.3&#39;</span><span class="p">,</span> <span class="s1">&#39;apstools&#39;</span><span class="p">:</span> <span class="s1">&#39;1.1.5&#39;</span><span class="p">,</span> <span class="s1">&#39;epics&#39;</span><span class="p">:</span> <span class="s1">&#39;3.3.3&#39;</span><span class="p">}}</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">dictionary_table</span><span class="p">(</span><span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">))</span>
<span class="o">===========</span> <span class="o">=============================================================================</span>
<span class="n">key</span>         <span class="n">value</span>
<span class="o">===========</span> <span class="o">=============================================================================</span>
<span class="n">beamline_id</span> <span class="n">developer</span>
<span class="n">login_id</span>    <span class="n">jemian</span><span class="p">:</span><span class="n">wow</span><span class="o">.</span><span class="n">aps</span><span class="o">.</span><span class="n">anl</span><span class="o">.</span><span class="n">gov</span>
<span class="n">pid</span>         <span class="mi">19072</span>
<span class="n">proposal_id</span> <span class="kc">None</span>
<span class="n">scan_id</span>     <span class="mi">10</span>
<span class="n">version</span>     <span class="p">{</span><span class="s1">&#39;bluesky&#39;</span><span class="p">:</span> <span class="s1">&#39;1.5.2&#39;</span><span class="p">,</span> <span class="s1">&#39;ophyd&#39;</span><span class="p">:</span> <span class="s1">&#39;1.3.3&#39;</span><span class="p">,</span> <span class="s1">&#39;apstools&#39;</span><span class="p">:</span> <span class="s1">&#39;1.1.5&#39;</span><span class="p">,</span> <span class="s1">&#39;epics&#39;</span><span class="p">:</span> <span class="s1">&#39;3.3.3&#39;</span><span class="p">}</span>
<span class="o">===========</span> <span class="o">=============================================================================</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.dynamic_import">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">dynamic_import</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">type</span></span></span><a class="reference internal" href="../_modules/apstools/utils/misc.html#dynamic_import"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.dynamic_import" title="Link to this definition">#</a></dt>
<dd><p>Import the object given its import path as text.</p>
<p>Motivated by specification of class names for plugins
when using <code class="docutils literal notranslate"><span class="pre">apstools.devices.ad_creator()</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="n">dynamic_import</span><span class="p">(</span><span class="s2">&quot;ophyd.EpicsMotor&quot;</span><span class="p">)</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">obj</span><span class="p">(</span><span class="s2">&quot;gp:m1&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;m1&quot;</span><span class="p">)</span>

<span class="n">IocStats</span> <span class="o">=</span> <span class="n">dynamic_import</span><span class="p">(</span><span class="s2">&quot;instrument.devices.ioc_stats.IocInfoDevice&quot;</span><span class="p">)</span>
<span class="n">gp_stats</span> <span class="o">=</span> <span class="n">IocStats</span><span class="p">(</span><span class="s2">&quot;gp:&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;gp_stats&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.full_dotted_name">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">full_dotted_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#full_dotted_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.full_dotted_name" title="Link to this definition">#</a></dt>
<dd><p>Return the full dotted name</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.dotted_name</span></code> property does not include the
name of the root object.  This routine adds that.</p>
<p>see: <a class="github reference external" href="https://github.com/bluesky/ophyd/pull/797">bluesky/ophyd#797</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.itemizer">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">itemizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#itemizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.itemizer" title="Link to this definition">#</a></dt>
<dd><p>Format a list of items.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.listobjects">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">listobjects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_pv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">child_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">child_signals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">TableStyle.pyRestTable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#listobjects"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.listobjects" title="Link to this definition">#</a></dt>
<dd><p>Show all the ophyd Signal and Device objects defined as globals.</p>
<p>PARAMETERS</p>
<dl>
<dt>show_pv</dt><dd><p><em>bool</em> :
If True, also show relevant EPICS PV, if available.
(default: True)</p>
</dd>
<dt>printing <em>bool</em> :</dt><dd><p>Deprecated.</p>
</dd>
<dt>verbose</dt><dd><p><em>bool</em> :
If True, also show <code class="docutils literal notranslate"><span class="pre">str(obj</span></code>.
(default: False)</p>
</dd>
<dt>symbols</dt><dd><p><em>dict</em> :
If None, use global symbol table.
If not None, use provided dictionary.
(default: <code class="docutils literal notranslate"><span class="pre">globals()</span></code>)</p>
</dd>
<dt>child_devices</dt><dd><p><em>bool</em> :
If True, also show how many Devices are children of this device.
(default: False)</p>
</dd>
<dt>child_signals</dt><dd><p><em>bool</em> :
If True, also show how many Signals are children of this device.
(default: False)</p>
</dd>
<dt>table_style <em>object</em> :</dt><dd><p>Either <code class="docutils literal notranslate"><span class="pre">apstools.utils.TableStyle.pandas</span></code> (default) or
using values from <code class="xref py py-class docutils literal notranslate"><span class="pre">apstools.utils.TableStyle</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> wll truncate long text
to at most 50 characters.</p>
</div>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>object:</dt><dd><p>Instance of <code class="docutils literal notranslate"><span class="pre">pyRestTable.Table()</span></code></p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">listobjects</span><span class="p">()</span>
<span class="o">========</span> <span class="o">================================</span> <span class="o">=============</span>
<span class="n">name</span>     <span class="n">ophyd</span> <span class="n">structure</span>                  <span class="n">EPICS</span> <span class="n">PV</span>
<span class="o">========</span> <span class="o">================================</span> <span class="o">=============</span>
<span class="n">adsimdet</span> <span class="n">MySingleTriggerSimDetector</span>       <span class="n">vm7SIM1</span><span class="p">:</span>
<span class="n">m1</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m1</span>
<span class="n">m2</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m2</span>
<span class="n">m3</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m3</span>
<span class="n">m4</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m4</span>
<span class="n">m5</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m5</span>
<span class="n">m6</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m6</span>
<span class="n">m7</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m7</span>
<span class="n">m8</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m8</span>
<span class="n">noisy</span>    <span class="n">EpicsSignalRO</span>                    <span class="n">vm7</span><span class="p">:</span><span class="n">userCalc1</span>
<span class="n">scaler</span>   <span class="n">ScalerCH</span>                         <span class="n">vm7</span><span class="p">:</span><span class="n">scaler1</span>
<span class="n">shutter</span>  <span class="n">SimulatedApsPssShutterWithStatus</span>
<span class="o">========</span> <span class="o">================================</span> <span class="o">=============</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">pyRestTable</span><span class="o">.</span><span class="n">rest_table</span><span class="o">.</span><span class="n">Table</span> <span class="n">at</span> <span class="mh">0x7fa4398c7cf8</span><span class="o">&gt;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.1.8.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.pairwise">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">pairwise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#pairwise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.pairwise" title="Link to this definition">#</a></dt>
<dd><p>break a list (or other iterable) into pairs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">s0</span><span class="p">,</span> <span class="n">s1</span><span class="p">),</span> <span class="p">(</span><span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">),</span> <span class="p">(</span><span class="n">s4</span><span class="p">,</span> <span class="n">s5</span><span class="p">),</span> <span class="o">...</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">71</span><span class="p">]:</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">pairwise</span><span class="p">(</span><span class="s2">&quot;a b c d e fg&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()):</span>
    <span class="o">...</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="o">...</span><span class="p">:</span>
<span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;fg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.print_RE_md">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">print_RE_md</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictionary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'simple'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#print_RE_md"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.print_RE_md" title="Link to this definition">#</a></dt>
<dd><p>custom print the RunEngine metadata in a table</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>dictionary</dt><dd><p><em>dict</em> :
Python dictionary</p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">print_RE_md</span><span class="p">()</span>
<span class="n">RunEngine</span> <span class="n">metadata</span> <span class="n">dictionary</span><span class="p">:</span>
<span class="o">========================</span> <span class="o">===================================</span>
<span class="n">key</span>                      <span class="n">value</span>
<span class="o">========================</span> <span class="o">===================================</span>
<span class="n">EPICS_CA_MAX_ARRAY_BYTES</span> <span class="mi">1280000</span>
<span class="n">EPICS_HOST_ARCH</span>          <span class="n">linux</span><span class="o">-</span><span class="n">x86_64</span>
<span class="n">beamline_id</span>              <span class="n">APS</span> <span class="n">USAXS</span> <span class="mi">9</span><span class="o">-</span><span class="n">ID</span><span class="o">-</span><span class="n">C</span>
<span class="n">login_id</span>                 <span class="n">usaxs</span><span class="p">:</span><span class="n">usaxscontrol</span><span class="o">.</span><span class="n">xray</span><span class="o">.</span><span class="n">aps</span><span class="o">.</span><span class="n">anl</span><span class="o">.</span><span class="n">gov</span>
<span class="n">pid</span>                      <span class="mi">67933</span>
<span class="n">proposal_id</span>              <span class="n">testing</span> <span class="n">Bluesky</span> <span class="n">installation</span>
<span class="n">scan_id</span>                  <span class="mi">0</span>
<span class="n">versions</span>                 <span class="o">========</span> <span class="o">=====</span>
                         <span class="n">key</span>      <span class="n">value</span>
                         <span class="o">========</span> <span class="o">=====</span>
                         <span class="n">apstools</span> <span class="mf">1.1.3</span>
                         <span class="n">bluesky</span>  <span class="mf">1.5.2</span>
                         <span class="n">epics</span>    <span class="mf">3.3.1</span>
                         <span class="n">ophyd</span>    <span class="mf">1.3.3</span>
                         <span class="o">========</span> <span class="o">=====</span>
<span class="o">========================</span> <span class="o">===================================</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.redefine_motor_position">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">redefine_motor_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_position</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#redefine_motor_position"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.redefine_motor_position" title="Link to this definition">#</a></dt>
<dd><p>Set EPICS motor record’s user coordinate to <code class="docutils literal notranslate"><span class="pre">new_position</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.render">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_figs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/apstools/utils/misc.html#render"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.render" title="Link to this definition">#</a></dt>
<dd><p>Round-off floating-point numbers to sig_figs.</p>
<p>Such as:</p>
<ul class="simple">
<li><p>0.369340000000000063 becomes 0.36934</p></li>
<li><p>-3.1300000000000003 becomes -3.13</p></li>
<li><p>-0 becomes 0</p></li>
<li><p>0.0 becomes 0</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.replay">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">replay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#replay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.replay" title="Link to this definition">#</a></dt>
<dd><p>Replay the document stream from one (or more) scans (headers).</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>headers</dt><dd><p><em>run</em> or <em>[run]</em> :
Run(s) to be replayed through callback. A <em>run</em> is an instance of a
Bluesky <code class="docutils literal notranslate"><span class="pre">databroker.core.BlueskyRun</span></code> (or the older
<code class="docutils literal notranslate"><span class="pre">databroker.Header</span></code>).
see: <a class="reference external" href="https://nsls-ii.github.io/databroker/api.html?highlight=header#header-api">https://nsls-ii.github.io/databroker/api.html?highlight=header#header-api</a></p>
</dd>
<dt>callback</dt><dd><p><em>run</em> or <em>[run]</em> :
The Bluesky callback to handle the stream of documents from a run. If
<code class="docutils literal notranslate"><span class="pre">None</span></code>, then use the <cite>bec</cite> (BestEffortCallback) from the IPython
shell.
(default:<code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
</dd>
<dt>sort</dt><dd><p><em>bool</em> :
Sort the headers chronologically if True.
(default:<code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.1.11.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.run_in_thread">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">run_in_thread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#run_in_thread"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.run_in_thread" title="Link to this definition">#</a></dt>
<dd><p>(decorator) run <code class="docutils literal notranslate"><span class="pre">func</span></code> in thread</p>
<p>USAGE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@run_in_thread</span>
<span class="k">def</span><span class="w"> </span><span class="nf">progress_reporting</span><span class="p">():</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;progress_reporting is starting&quot;</span><span class="p">)</span>
    <span class="c1"># ...</span>

<span class="c1">#...</span>
<span class="n">progress_reporting</span><span class="p">()</span>   <span class="c1"># runs in separate thread</span>
<span class="c1">#...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.safe_ophyd_name">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">safe_ophyd_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#safe_ophyd_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.safe_ophyd_name" title="Link to this definition">#</a></dt>
<dd><p>make text safe to be used as an ophyd object name</p>
<p>Given some input text string, return a clean version.
Remove troublesome characters, perhaps other cleanup as well.
This is best done with regular expression pattern matching.</p>
<p>The “sanitized” name fits this regular expression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">A</span><span class="o">-</span><span class="n">Za</span><span class="o">-</span><span class="n">z_</span><span class="p">][</span>\<span class="n">w_</span><span class="p">]</span><span class="o">*</span>
</pre></div>
</div>
<p>Also can be used for safe HDF5 and NeXus names.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.split_quoted_line">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">split_quoted_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#split_quoted_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.split_quoted_line" title="Link to this definition">#</a></dt>
<dd><p>splits a line into words some of which might be quoted</p>
<p>TESTS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FlyScan</span> <span class="mi">0</span>   <span class="mi">0</span>   <span class="mi">0</span>   <span class="n">blank</span>
<span class="n">FlyScan</span> <span class="mi">5</span>   <span class="mi">2</span>   <span class="mi">0</span>   <span class="s2">&quot;empty container&quot;</span>
<span class="n">FlyScan</span> <span class="mi">5</span>   <span class="mi">12</span>   <span class="mi">0</span>   <span class="s2">&quot;even longer name&quot;</span>
<span class="n">SAXS</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="n">blank</span>
<span class="n">SAXS</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="s2">&quot;blank&quot;</span>
</pre></div>
</div>
<p>RESULTS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;FlyScan&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;FlyScan&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;empty container&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;FlyScan&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;12&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;even longer name&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;SAXS&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;SAXS&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.text_encode">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">text_encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#text_encode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.text_encode" title="Link to this definition">#</a></dt>
<dd><p>Encode <code class="docutils literal notranslate"><span class="pre">source</span></code> using the default codepoint.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.to_unicode_or_bust">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">to_unicode_or_bust</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#to_unicode_or_bust"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.to_unicode_or_bust" title="Link to this definition">#</a></dt>
<dd><p>from: <a class="reference external" href="http://farmdev.com/talks/unicode/">http://farmdev.com/talks/unicode/</a>  .</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.trim_string_for_EPICS">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">trim_string_for_EPICS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#trim_string_for_EPICS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.trim_string_for_EPICS" title="Link to this definition">#</a></dt>
<dd><p>String must not exceed EPICS PV length.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.unix">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">unix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raises</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#unix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.unix" title="Link to this definition">#</a></dt>
<dd><p>Run a UNIX command, returns (stdout, stderr).</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>command</dt><dd><p><em>str</em> :
UNIX command to be executed</p>
</dd>
<dt>raises</dt><dd><p><em>bool</em> :
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, will raise exceptions as needed,
default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
</dl>
</dd></dl>

<section id="mmap">
<span id="module-apstools.utils.mmap_dict"></span><h3>MMap<a class="headerlink" href="#mmap" title="Link to this heading">#</a></h3>
<p>A dictionary where the keys are also accessible as attributes.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.mmap_dict.MMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.mmap_dict.</span></span><span class="sig-name descname"><span class="pre">MMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/mmap_dict.html#MMap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.mmap_dict.MMap" title="Link to this definition">#</a></dt>
<dd><p>Dictionary with keys accessible as attributes (read-only).</p>
<p>All keys are accessible for read and write by dictionary-style references
(‘mmap[“key”]’ or ‘mmap.get(key)’).</p>
<p>Since dictionary keys are accessible as attributes, the names of existing
attributes (such as ‘clear’, ‘items’, keys’, values’, …) are reserved and
cannot be used as dictionary keys.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mmap</span> <span class="o">=</span> <span class="n">MMap</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmap</span>
<span class="go">MMap(a=1, b=2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmap</span><span class="p">[</span><span class="s2">&quot;a]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmap</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmap</span><span class="o">.</span><span class="n">a</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmap</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
<span class="go">AttributeError: Unknown: attribute=&#39;a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmap</span>
<span class="go">MMap(a=2, b=2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmap</span><span class="p">[</span><span class="s2">&quot;clear&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="go">KeyError: &quot;key=&#39;clear&#39; is a reserved name.&quot;</span>
</pre></div>
</div>
<p>You can retrieve the value of a key by any of these dictionary methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mmap</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="n">mmap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="c1"># Or supply a default if the key does not exist.</span>
<span class="c1"># Here, the default is 1.2345</span>
<span class="n">mmap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mf">1.2345</span><span class="p">)</span>
</pre></div>
</div>
<p>and by any attribute method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mmap</span><span class="o">.</span><span class="n">a</span>
<span class="nb">getattr</span><span class="p">(</span><span class="n">mmap</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="c1"># Or supply a default if the key does not exist.</span>
<span class="nb">getattr</span><span class="p">(</span><span class="n">mmap</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mf">1.2345</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.mmap_dict.MMap.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None.</span>&#160; <span class="pre">Remove</span> <span class="pre">all</span> <span class="pre">items</span> <span class="pre">from</span> <span class="pre">D.</span></span></span><a class="reference internal" href="../_modules/apstools/utils/mmap_dict.html#MMap.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.mmap_dict.MMap.clear" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<section id="overrideparameters">
<span id="module-apstools.utils.override_parameters"></span><h3>OverrideParameters<a class="headerlink" href="#overrideparameters" title="Link to this heading">#</a></h3>
<p>Define parameters that can be overridden from a user configuration file.</p>
<p>EXAMPLE:</p>
<p>Create an <code class="docutils literal notranslate"><span class="pre">overrides</span></code> object in a new file <code class="docutils literal notranslate"><span class="pre">override_params.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">apstools.utils</span>
<span class="n">overrides</span> <span class="o">=</span> <span class="n">apstools</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">OverrideParameters</span><span class="p">()</span>
</pre></div>
</div>
<p>When code supports a parameter for which a user can provide
a local override, the code should import the <code class="docutils literal notranslate"><span class="pre">overrides</span></code>
object (from the <code class="docutils literal notranslate"><span class="pre">override_params</span></code> module),
and then register the parameter name, such as this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">override_params</span><span class="w"> </span><span class="kn">import</span> <span class="n">overrides</span>
<span class="n">overrides</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s2">&quot;minimum_step&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then later:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">minstep</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pick</span><span class="p">(</span><span class="s2">&quot;minimum_step&quot;</span><span class="p">,</span> <span class="mf">45e-6</span><span class="p">)</span>
</pre></div>
</div>
<p>In the user’s configuration file that will override
the value of <code class="docutils literal notranslate"><span class="pre">45e-6</span></code> (such as can be loaded via
<code class="docutils literal notranslate"><span class="pre">%run</span> <span class="pre">-i</span> <span class="pre">user.py</span></code>), import the <cite>overrides`</cite>
object (from the <code class="docutils literal notranslate"><span class="pre">override_params</span></code> module):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">override_params</span><span class="w"> </span><span class="kn">import</span> <span class="n">overrides</span>
</pre></div>
</div>
<p>and then override the attribute(s) as desired:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">overrides</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;minimum_step&quot;</span><span class="p">,</span> <span class="mf">1.0e-5</span><span class="p">)</span>
</pre></div>
</div>
<p>With this override in place, the <code class="docutils literal notranslate"><span class="pre">minstep</span></code> value
(from <code class="xref py py-meth docutils literal notranslate"><span class="pre">pick()</span></code>)
will be <code class="docutils literal notranslate"><span class="pre">1e-5</span></code>.</p>
<p>Get a pandas DataFrame object with all the overrides:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">overrides</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<p>which returns this table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">parameter</span>    <span class="n">value</span>
<span class="mi">0</span>  <span class="n">minimum_step</span>  <span class="mf">0.00001</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters" title="apstools.utils.override_parameters.OverrideParameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OverrideParameters</span></code></a>()</p></td>
<td><p>Define parameters that can be overridden from a user configuration file.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.override_parameters.</span></span><span class="sig-name descname"><span class="pre">OverrideParameters</span></span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters" title="Link to this definition">#</a></dt>
<dd><p>Define parameters that can be overridden from a user configuration file.</p>
<p>NOTE: This is a pure Python object, not using ophyd.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.pick" title="apstools.utils.override_parameters.OverrideParameters.pick"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pick</span></code></a>(parameter, default)</p></td>
<td><p>Return either the override parameter value if defined, or the default.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.register" title="apstools.utils.override_parameters.OverrideParameters.register"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register</span></code></a>(parameter_name)</p></td>
<td><p>Register a new parameter name to be supported by user overrides.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.reset" title="apstools.utils.override_parameters.OverrideParameters.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>(parameter_name)</p></td>
<td><p>Remove an override value for a known parameter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.reset_all" title="apstools.utils.override_parameters.OverrideParameters.reset_all"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset_all</span></code></a>()</p></td>
<td><p>Remove override values for all known parameters.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.set" title="apstools.utils.override_parameters.OverrideParameters.set"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set</span></code></a>(parameter_name, value)</p></td>
<td><p>Define an override value for a known parameter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.summary" title="apstools.utils.override_parameters.OverrideParameters.summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summary</span></code></a>()</p></td>
<td><p>Return a pandas DataFrame with all overrides.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.5.2.</span></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.pick">
<span class="sig-name descname"><span class="pre">pick</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.pick"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.pick" title="Link to this definition">#</a></dt>
<dd><p>Return either the override parameter value if defined, or the default.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.register">
<span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.register" title="Link to this definition">#</a></dt>
<dd><p>Register a new parameter name to be supported by user overrides.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.reset" title="Link to this definition">#</a></dt>
<dd><p>Remove an override value for a known parameter.  (sets it to undefined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.reset_all">
<span class="sig-name descname"><span class="pre">reset_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.reset_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.reset_all" title="Link to this definition">#</a></dt>
<dd><p>Remove override values for all known parameters. (sets all to undefined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.set" title="Link to this definition">#</a></dt>
<dd><p>Define an override value for a known parameter.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.summary" title="Link to this definition">#</a></dt>
<dd><p>Return a pandas DataFrame with all overrides.</p>
<p>Parameter names that have no override value will be reported
as <code class="docutils literal notranslate"><span class="pre">--undefined--</span></code>.</p>
</dd></dl>

</dd></dl>

<section id="plot-support">
<span id="module-apstools.utils.plot"></span><h3>Plot Support<a class="headerlink" href="#plot-support" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.plotxy" title="apstools.utils.plot.plotxy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotxy</span></code></a>(runs, xname, yname[, append, cat, ...])</p></td>
<td><p>Plot y vs x from a bluesky run.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.select_mpl_figure" title="apstools.utils.plot.select_mpl_figure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_mpl_figure</span></code></a>(x, y)</p></td>
<td><p>Get the MatPlotLib Figure window for y vs x.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.select_live_plot" title="apstools.utils.plot.select_live_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_live_plot</span></code></a>(bec, signal)</p></td>
<td><p>Get the <em>first</em> live plot that matches <code class="docutils literal notranslate"><span class="pre">signal</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_lines" title="apstools.utils.plot.trim_plot_lines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_lines</span></code></a>(bec, n, x, y)</p></td>
<td><p>Find the plot with axes x and y and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_by_name" title="apstools.utils.plot.trim_plot_by_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_by_name</span></code></a>([n, plots])</p></td>
<td><p>Find the plot(s) by name and replot with at most the last <em>n</em> lines.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.plotxy">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">plotxy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">runs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'primary'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#plotxy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.plotxy" title="Link to this definition">#</a></dt>
<dd><p>Plot y vs x from a bluesky run.</p>
<p>Note: This is not a bluesky plan.  Call it as a normal Python function.</p>
<p>PARAMETERS</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">runs</span></code><span class="classifier"><em>[run]</em> or <em>run</em>:</span></dt><dd><p>List or runs or single <code class="docutils literal notranslate"><span class="pre">run</span></code>.  A <code class="docutils literal notranslate"><span class="pre">run</span></code> is either a
<code class="docutils literal notranslate"><span class="pre">bluesky.core.BlueskyRun</span></code> object or a reference (uid, scan_id,
relative to most recent) to a BlueskyRun in the catalog.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xname</span></code><span class="classifier"><em>str</em>:</span></dt><dd><p>Name of the signal to plot on the <strong>x</strong> axis.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">yname</span></code><span class="classifier"><em>str</em>:</span></dt><dd><p>Name of the signal to plot on the <strong>y</strong> axis.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">append</span></code><span class="classifier"><em>bool</em>:</span></dt><dd><p>(optional) If <code class="docutils literal notranslate"><span class="pre">True</span></code>, append to existing plot window.
Default: <code class="docutils literal notranslate"><span class="pre">append=False</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cat</span></code><span class="classifier"><em>object</em>:</span></dt><dd><p>(optional) Catalog to be used for finding a run by reference.
Default: return value from <code class="docutils literal notranslate"><span class="pre">apstools.utils.getCatalog()</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stats</span></code><span class="classifier"><em>bool</em>:</span></dt><dd><p>(optional) If <code class="docutils literal notranslate"><span class="pre">True</span></code>, compute and plot centroid and FWHM
(computed from sigma).
Default: <code class="docutils literal notranslate"><span class="pre">stats=True</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stream</span></code><span class="classifier"><em>str</em>:</span></dt><dd><p>(optional) Name of the data stream in which to find “xname”
and “yname”.
Default: <code class="docutils literal notranslate"><span class="pre">stream=&quot;primary&quot;</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code><span class="classifier"><em>str</em>:</span></dt><dd><p>(optional) Title to show on this plot.
Default: Metadata “title” keyword of first run (if found)
or scan_id and starting date/time of first run.</p>
</dd>
</dl>
<p>RETURNS</p>
<p>Returns a <em>dict</em> of statistics for each run indexed by <code class="docutils literal notranslate"><span class="pre">scan_id</span></code>,
if <code class="docutils literal notranslate"><span class="pre">stats=True</span></code>, else <code class="docutils literal notranslate"><span class="pre">None</span></code>.  A computed <code class="docutils literal notranslate"><span class="pre">fwhm</span></code> key is added
to the statistics.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.6.10.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.select_live_plot">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">select_live_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#select_live_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.select_live_plot" title="Link to this definition">#</a></dt>
<dd><p>Get the <em>first</em> live plot that matches <code class="docutils literal notranslate"><span class="pre">signal</span></code>.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>bec</dt><dd><p><em>object</em>:
instance of <code class="docutils literal notranslate"><span class="pre">bluesky.callbacks.best_effort.BestEffortCallback</span></code></p>
</dd>
<dt>signal</dt><dd><p><em>object</em>:
The Y axis object (an <code class="docutils literal notranslate"><span class="pre">ophyd.Signal</span></code>)</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt><em>object</em>:</dt><dd><p>Instance of <code class="docutils literal notranslate"><span class="pre">bluesky.callbacks.best_effort.LivePlotPlusPeaks()</span></code>
or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.select_mpl_figure">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">select_mpl_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#select_mpl_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.select_mpl_figure" title="Link to this definition">#</a></dt>
<dd><p>Get the MatPlotLib Figure window for y vs x.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>x</dt><dd><p><em>object</em>:
X axis object (an <code class="docutils literal notranslate"><span class="pre">ophyd.Signal</span></code>)</p>
</dd>
<dt>y</dt><dd><p>ophyd object:
X axis object (an <code class="docutils literal notranslate"><span class="pre">ophyd.Signal</span></code>)</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>object or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Instance of <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot.Figure()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.trim_plot_by_name">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">trim_plot_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#trim_plot_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.trim_plot_by_name" title="Link to this definition">#</a></dt>
<dd><p>Find the plot(s) by name and replot with at most the last <em>n</em> lines.</p>
<p>Note: this is not a bluesky plan.  Call it as normal Python function.</p>
<p>It is recommended to call <a class="reference internal" href="#apstools.utils.plot.trim_plot_by_name" title="apstools.utils.plot.trim_plot_by_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">trim_plot_by_name()</span></code></a> <em>before</em> the
scan(s) that generate plots.  Plots are generated from a RunEngine
callback, executed <em>after</em> the scan completes.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>n</dt><dd><p><em>int</em> :
number of plots to keep</p>
</dd>
<dt>plots</dt><dd><p><em>str</em>, [<em>str</em>], or <em>None</em> :
name(s) of plot windows to trim
(default: all plot windows)</p>
</dd>
</dl>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trim_plot_by_name</span><span class="p">()</span>   <span class="c1"># default of n=3, apply to all plots</span>
<span class="n">trim_plot_by_name</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># change from default of n=3</span>
<span class="n">trim_plot_by_name</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;noisy_det vs motor&quot;</span><span class="p">)</span>  <span class="c1"># just this plot</span>
<span class="n">trim_plot_by_name</span><span class="p">(</span>
    <span class="mi">5</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;noisy_det vs motor&quot;</span><span class="p">,</span> <span class="s2">&quot;det noisy_det vs motor&quot;</span><span class="p">]]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># use simulators from ophyd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bluesky</span><span class="w"> </span><span class="kn">import</span> <span class="n">plans</span> <span class="k">as</span> <span class="n">bp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bluesky</span><span class="w"> </span><span class="kn">import</span> <span class="n">plan_stubs</span> <span class="k">as</span> <span class="n">bps</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ophyd.sim</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="n">snooze</span> <span class="o">=</span> <span class="mf">0.25</span>

<span class="k">def</span><span class="w"> </span><span class="nf">scan_set</span><span class="p">():</span>
    <span class="n">trim_plot_by_name</span><span class="p">()</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">],</span> <span class="n">motor</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">,</span> <span class="n">det</span><span class="p">],</span> <span class="n">motor</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">motor2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bps</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">snooze</span><span class="p">)</span>

<span class="c1"># repeat the_scans 15 times</span>
<span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span><span class="n">bps</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">scan_set</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.3.5.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.trim_plot_lines">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">trim_plot_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#trim_plot_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.trim_plot_lines" title="Link to this definition">#</a></dt>
<dd><p>Find the plot with axes x and y and replot with at most the last <em>n</em> lines.</p>
<p>Note: <a class="reference internal" href="#apstools.utils.plot.trim_plot_lines" title="apstools.utils.plot.trim_plot_lines"><code class="xref py py-func docutils literal notranslate"><span class="pre">trim_plot_lines()</span></code></a> is not a bluesky plan.  Call it as
normal Python function.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trim_plot_lines</span><span class="p">(</span><span class="n">bec</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">m1</span><span class="p">,</span> <span class="n">noisy</span><span class="p">)</span>
</pre></div>
</div>
<p>PARAMETERS</p>
<dl class="simple">
<dt>bec</dt><dd><p><em>object</em> :
instance of BestEffortCallback</p>
</dd>
<dt>n</dt><dd><p><em>int</em> :
number of plots to keep</p>
</dd>
<dt>x</dt><dd><p><em>object</em> :
instance of ophyd.Signal (or subclass),
independent (x) axis</p>
</dd>
<dt>y</dt><dd><p><em>object</em> :
instance of ophyd.Signal (or subclass),
dependent (y) axis</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.3.5.</span></p>
</div>
</dd></dl>

<section id="support-for-ipython-profiles">
<span id="module-apstools.utils.profile_support"></span><h3>Support for IPython profiles<a class="headerlink" href="#support-for-ipython-profiles" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.profile_support.getDefaultNamespace" title="apstools.utils.profile_support.getDefaultNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultNamespace</span></code></a>([attr])</p></td>
<td><p>get the IPython shell's namespace dictionary (or globals() if not found)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.profile_support.ipython_profile_name" title="apstools.utils.profile_support.ipython_profile_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ipython_profile_name</span></code></a>()</p></td>
<td><p>return the name of the current ipython profile or <code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.profile_support.ipython_shell_namespace" title="apstools.utils.profile_support.ipython_shell_namespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ipython_shell_namespace</span></code></a>()</p></td>
<td><p>get the IPython shell's namespace dictionary (or empty if not found)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.profile_support.getDefaultNamespace">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.profile_support.</span></span><span class="sig-name descname"><span class="pre">getDefaultNamespace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user_ns'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/profile_support.html#getDefaultNamespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.profile_support.getDefaultNamespace" title="Link to this definition">#</a></dt>
<dd><p>get the IPython shell’s namespace dictionary (or globals() if not found)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.profile_support.ipython_profile_name">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.profile_support.</span></span><span class="sig-name descname"><span class="pre">ipython_profile_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/profile_support.html#ipython_profile_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.profile_support.ipython_profile_name" title="Link to this definition">#</a></dt>
<dd><p>return the name of the current ipython profile or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Example (add to default RunEngine metadata):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;ipython_profile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ipython_profile_name</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;using profile: &quot;</span> <span class="o">+</span> <span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;ipython_profile&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.profile_support.ipython_shell_namespace">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.profile_support.</span></span><span class="sig-name descname"><span class="pre">ipython_shell_namespace</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/profile_support.html#ipython_shell_namespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.profile_support.ipython_shell_namespace" title="Link to this definition">#</a></dt>
<dd><p>get the IPython shell’s namespace dictionary (or empty if not found)</p>
</dd></dl>

<section id="epics-pv-registry">
<span id="module-apstools.utils.pvregistry"></span><h3>EPICS PV Registry<a class="headerlink" href="#epics-pv-registry" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbyname" title="apstools.utils.pvregistry.findbyname"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbyname</span></code></a>(oname[, force_rebuild, ns])</p></td>
<td><p>Find the ophyd (dotted name) object associated with the given ophyd name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbypv" title="apstools.utils.pvregistry.findbypv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbypv</span></code></a>(pvname[, force_rebuild, ns])</p></td>
<td><p>Find all ophyd objects associated with the given EPICS PV.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.PVRegistry" title="apstools.utils.pvregistry.PVRegistry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PVRegistry</span></code></a>([ns])</p></td>
<td><p>Cross-reference EPICS PVs with ophyd EpicsSignalBase objects.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.PVRegistry">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.pvregistry.</span></span><span class="sig-name descname"><span class="pre">PVRegistry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#PVRegistry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.PVRegistry" title="Link to this definition">#</a></dt>
<dd><p>Cross-reference EPICS PVs with ophyd EpicsSignalBase objects.</p>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.PVRegistry.ophyd_search">
<span class="sig-name descname"><span class="pre">ophyd_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#PVRegistry.ophyd_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.PVRegistry.ophyd_search" title="Link to this definition">#</a></dt>
<dd><p>Search for ophyd object by ophyd name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.PVRegistry.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#PVRegistry.search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.PVRegistry.search" title="Link to this definition">#</a></dt>
<dd><p>Search for PV in both read &amp; write modes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.PVRegistry.search_by_mode">
<span class="sig-name descname"><span class="pre">search_by_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'R'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#PVRegistry.search_by_mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.PVRegistry.search_by_mode" title="Link to this definition">#</a></dt>
<dd><p>Search for PV in specified mode.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.findbyname">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.pvregistry.</span></span><span class="sig-name descname"><span class="pre">findbyname</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_rebuild</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#findbyname"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.findbyname" title="Link to this definition">#</a></dt>
<dd><p>Find the ophyd (dotted name) object associated with the given ophyd name.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>oname</dt><dd><p><em>str</em> :
ophyd name to search</p>
</dd>
<dt>force_rebuild</dt><dd><p><em>bool</em> :
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rebuild the internal registry that maps
ophyd names to ophyd objects.</p>
</dd>
<dt>ns</dt><dd><p><em>dict</em> or <cite>None</cite> :
Namespace dictionary of Python objects.</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>str or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Name of the ophyd object.</p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="n">findbyname</span><span class="p">(</span><span class="s2">&quot;adsimdet_cam_acquire&quot;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="s1">&#39;adsimdet.cam.acquire&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.findbypv">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.pvregistry.</span></span><span class="sig-name descname"><span class="pre">findbypv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_rebuild</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#findbypv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.findbypv" title="Link to this definition">#</a></dt>
<dd><p>Find all ophyd objects associated with the given EPICS PV.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>pvname</dt><dd><p><em>str</em> :
EPICS PV name to search</p>
</dd>
<dt>force_rebuild</dt><dd><p><em>bool</em> :
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rebuild the internal registry that maps
EPICS PV names to ophyd objects.</p>
</dd>
<dt>ns</dt><dd><p><em>dict</em> or <cite>None</cite> :
Namespace dictionary of Python objects.</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>dict or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Dictionary of matching ophyd objects, keyed by how the
PV is used by the ophyd signal.  The keys are
<code class="docutils literal notranslate"><span class="pre">read</span></code> and <code class="docutils literal notranslate"><span class="pre">write</span></code>.</p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="n">findbypv</span><span class="p">(</span><span class="s2">&quot;ad:cam1:Acquire&quot;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;read&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;write&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;adsimdet.cam.acquire&#39;</span><span class="p">]}</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">46</span><span class="p">]:</span> <span class="n">findbypv</span><span class="p">(</span><span class="s2">&quot;ad:cam1:Acquire_RBV&quot;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">46</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;read&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;adsimdet.cam.acquire&#39;</span><span class="p">],</span> <span class="s1">&#39;write&#39;</span><span class="p">:</span> <span class="p">[]}</span>
</pre></div>
</div>
</dd></dl>

<section id="searching-databroker-catalogs">
<span id="module-apstools.utils.query"></span><h3>Searching databroker catalogs<a class="headerlink" href="#searching-databroker-catalogs" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.query.db_query" title="apstools.utils.query.db_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">db_query</span></code></a>(db, query)</p></td>
<td><p>Searches the databroker v2 database.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.query.db_query">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.query.</span></span><span class="sig-name descname"><span class="pre">db_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/query.html#db_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.query.db_query" title="Link to this definition">#</a></dt>
<dd><p>Searches the databroker v2 database.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
Search parameters.</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt><em>object</em> :</dt><dd><p>Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>
satisfying the <code class="docutils literal notranslate"><span class="pre">query</span></code> parameters.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">databroker.catalog.search()</span></code></p>
</div>
</dd></dl>

<p id="module-apstools.utils.slit_core">Common support of slits</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.slit_core.SlitGeometry" title="apstools.utils.slit_core.SlitGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SlitGeometry</span></code></a>(width, height, x, y)</p></td>
<td><p>Slit size and center as a named tuple</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.slit_core.</span></span><span class="sig-name descname"><span class="pre">SlitGeometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry" title="Link to this definition">#</a></dt>
<dd><p>Slit size and center as a named tuple</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry.height">
<span class="sig-name descname"><span class="pre">height</span></span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry.height" title="Link to this definition">#</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry.width">
<span class="sig-name descname"><span class="pre">width</span></span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry.width" title="Link to this definition">#</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry.x">
<span class="sig-name descname"><span class="pre">x</span></span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry.x" title="Link to this definition">#</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry.y">
<span class="sig-name descname"><span class="pre">y</span></span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry.y" title="Link to this definition">#</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

</dd></dl>

<section id="spreadsheet-support">
<span id="module-apstools.utils.spreadsheet"></span><h3>Spreadsheet Support<a class="headerlink" href="#spreadsheet-support" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelDatabaseFileBase" title="apstools.utils.spreadsheet.ExcelDatabaseFileBase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelDatabaseFileBase</span></code></a>([ignore_extra])</p></td>
<td><p>base class: read-only support for Excel files, treat them like databases</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric" title="apstools.utils.spreadsheet.ExcelDatabaseFileGeneric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelDatabaseFileGeneric</span></code></a>(filename[, ...])</p></td>
<td><p>Generic (read-only) handling of Excel spreadsheet-as-database</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelReadError" title="apstools.utils.spreadsheet.ExcelReadError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelReadError</span></code></a></p></td>
<td><p>Exception when reading Excel spreadsheet.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.spreadsheet.ExcelDatabaseFileBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.spreadsheet.</span></span><span class="sig-name descname"><span class="pre">ExcelDatabaseFileBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ignore_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/spreadsheet.html#ExcelDatabaseFileBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.spreadsheet.ExcelDatabaseFileBase" title="Link to this definition">#</a></dt>
<dd><p>base class: read-only support for Excel files, treat them like databases</p>
<p id="index-1">Use this class when creating new, specific spreadsheet support.</p>
<p>EXAMPLE</p>
<p>Show how to read an Excel file where one of the columns
contains a unique key.  This allows for random access to
each row of data by use of the <em>key</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ExhibitorsDB</span><span class="p">(</span><span class="n">ExcelDatabaseFileBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    content for exhibitors from the Excel file</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">EXCEL_FILE</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;exhibitors.xlsx&quot;</span>
    <span class="n">LABELS_ROW</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle_single_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;any special handling for a row from the Excel file&#39;&#39;&#39;</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handleExcelRowEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;identify unique key (row of the Excel file)&#39;&#39;&#39;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.spreadsheet.ExcelDatabaseFileGeneric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.spreadsheet.</span></span><span class="sig-name descname"><span class="pre">ExcelDatabaseFileGeneric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels_row</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/spreadsheet.html#ExcelDatabaseFileGeneric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric" title="Link to this definition">#</a></dt>
<dd><p>Generic (read-only) handling of Excel spreadsheet-as-database</p>
<div class="admonition note" id="index-3">
<span id="index-2"></span><p class="admonition-title">Note</p>
<p>This is the class to use when reading Excel spreadsheets.</p>
</div>
<p>In the spreadsheet, the first sheet should contain the table to be
used. By default (see keyword parameter <code class="docutils literal notranslate"><span class="pre">labels_row</span></code>), the table
should start in cell A4.  The column labels are given in row 4.  A
blank column should appear to the right of the table (see keyword
parameter <code class="docutils literal notranslate"><span class="pre">ignore_extra</span></code>). The column labels will describe the
action and its parameters.  Additional columns may be added for
metadata or other purposes.</p>
<p>The rows below the column labels should contain actions and
parameters for those actions, one action per row.</p>
<p>To make a comment, place a <code class="docutils literal notranslate"><span class="pre">#</span></code> in the action column.  A comment
should be ignored by the bluesky plan that reads this table. The
table will end with a row of empty cells.</p>
<p>While it’s a good idea to put the <code class="docutils literal notranslate"><span class="pre">action</span></code> column first, that is
not necessary. It is not even necessary to name the column
<code class="docutils literal notranslate"><span class="pre">action</span></code>. You can re-arrange the order of the columns and change
their names <strong>as long as</strong> the column names match what text strings
your Python code expects to find.</p>
<p>A future upgrade <a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> will allow the table boundaries to be named by
Excel when using Excel’s <code class="docutils literal notranslate"><span class="pre">Format</span> <span class="pre">as</span> <span class="pre">Table</span></code> <a class="footnote-reference brackets" href="#id5" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> feature. For now,
leave a blank row and column at the bottom and right edges of the
table.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p><a class="github reference external" href="https://github.com/BCDA-APS/apstools/issues/122">BCDA-APS/apstools#122</a></p>
</aside>
<aside class="footnote brackets" id="id5" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p>Excel’s <code class="docutils literal notranslate"><span class="pre">Format</span> <span class="pre">as</span> <span class="pre">Table</span></code>:
<a class="reference external" href="https://support.office.com/en-us/article/Format-an-Excel-table-6789619F-C889-495C-99C2-2F971C0E2370">https://support.office.com/en-us/article/Format-an-Excel-table-6789619F-C889-495C-99C2-2F971C0E2370</a></p>
</aside>
</aside>
<p>PARAMETERS</p>
<dl>
<dt>filename</dt><dd><p><em>str</em> :
name (absolute or relative) of Excel spreadsheet file</p>
</dd>
<dt>labels_row</dt><dd><p><em>int</em> :
Row (zero-based numbering) of Excel file with column labels,
default: <code class="docutils literal notranslate"><span class="pre">3</span></code> (Excel row 4)</p>
</dd>
<dt>ignore_extra</dt><dd><p><em>bool</em> :
When <code class="docutils literal notranslate"><span class="pre">True</span></code>, ignore any cells outside of the table, default:
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Note that when <code class="docutils literal notranslate"><span class="pre">True</span></code>, a row of cells <em>within</em> the table will
be recognized as the end of the table, even if there are
actions in following rows.  To force an empty row, use
a comment symbol <code class="docutils literal notranslate"><span class="pre">#</span></code> (actually, any non-empty content will work).</p>
<p>When <code class="docutils literal notranslate"><span class="pre">False</span></code>, cells with other information (in Sheet 1) will
be made available, sometimes with unpredictable results.</p>
</dd>
</dl>
<p>EXAMPLE</p>
<p>See section <a class="reference internal" href="../examples/pl_run_command_list.html#example-run-command-file"><span class="std std-ref">The run_command_file() plan – batch scans using a text file</span></a> for more examples.</p>
<p>(See also <a class="reference internal" href="../examples/pl_run_command_list.html#excel-plan-spreadsheet-screen"><span class="std std-ref">example screen shot</span></a>.) Table (on Sheet 1) begins on row
4 in first column:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>  <span class="o">|</span>  <span class="n">some</span> <span class="n">text</span> <span class="n">here</span><span class="p">,</span> <span class="n">maybe</span> <span class="n">a</span> <span class="n">title</span>
<span class="mi">2</span>  <span class="o">|</span>  <span class="p">(</span><span class="n">could</span> <span class="n">have</span> <span class="n">content</span> <span class="n">here</span><span class="p">)</span>
<span class="mi">3</span>  <span class="o">|</span>  <span class="p">(</span><span class="ow">or</span> <span class="n">even</span> <span class="n">more</span> <span class="n">content</span> <span class="n">here</span><span class="p">)</span>
<span class="mi">4</span>  <span class="o">|</span>  <span class="n">action</span>  <span class="o">|</span> <span class="n">sx</span>   <span class="o">|</span> <span class="n">sy</span>   <span class="o">|</span> <span class="n">sample</span>     <span class="o">|</span> <span class="n">comments</span>          <span class="o">|</span>  <span class="o">|</span> <span class="o">&lt;--</span> <span class="n">leave</span> <span class="n">empty</span> <span class="n">column</span>
<span class="mi">5</span>  <span class="o">|</span>  <span class="n">close</span>   <span class="o">|</span>      <span class="o">|</span>                   <span class="o">|</span> <span class="n">close</span> <span class="n">the</span> <span class="n">shutter</span> <span class="o">|</span>  <span class="o">|</span>
<span class="mi">6</span>  <span class="o">|</span>  <span class="n">image</span>   <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="n">dark</span>       <span class="o">|</span> <span class="n">dark</span> <span class="n">image</span>        <span class="o">|</span>  <span class="o">|</span>
<span class="mi">7</span>  <span class="o">|</span>  <span class="nb">open</span>    <span class="o">|</span>      <span class="o">|</span>      <span class="o">|</span>            <span class="o">|</span> <span class="nb">open</span> <span class="n">the</span> <span class="n">shutter</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="mi">8</span>  <span class="o">|</span>  <span class="n">image</span>   <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="n">flat</span>       <span class="o">|</span> <span class="n">flat</span> <span class="n">field</span> <span class="n">image</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="mi">9</span>  <span class="o">|</span>  <span class="n">image</span>   <span class="o">|</span> <span class="mf">5.1</span>  <span class="o">|</span> <span class="o">-</span><span class="mf">3.2</span> <span class="o">|</span> <span class="mi">4140</span> <span class="n">steel</span> <span class="o">|</span> <span class="n">heat</span> <span class="mi">9172634</span>      <span class="o">|</span>  <span class="o">|</span>
<span class="mi">10</span> <span class="o">|</span>  <span class="n">scan</span>    <span class="o">|</span> <span class="mf">5.1</span>  <span class="o">|</span> <span class="o">-</span><span class="mf">3.2</span> <span class="o">|</span> <span class="mi">4140</span> <span class="n">steel</span> <span class="o">|</span> <span class="n">heat</span> <span class="mi">9172634</span>      <span class="o">|</span>  <span class="o">|</span>
<span class="mi">11</span> <span class="o">|</span>  <span class="n">scan</span>    <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="n">blank</span>      <span class="o">|</span>                   <span class="o">|</span>  <span class="o">|</span>
<span class="mi">12</span> <span class="o">|</span>
<span class="mi">13</span> <span class="o">|</span>  <span class="o">^^^</span> <span class="n">leave</span> <span class="n">empty</span> <span class="n">row</span> <span class="o">^^^</span>
<span class="mi">14</span> <span class="o">|</span> <span class="p">(</span><span class="n">could</span> <span class="n">have</span> <span class="n">content</span> <span class="n">here</span><span class="p">)</span>
</pre></div>
</div>
<p>Example python code to read this spreadsheet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">apstools.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExcelDatabaseFileGeneric</span><span class="p">,</span> <span class="n">cleanupText</span>

<span class="k">def</span><span class="w"> </span><span class="nf">myExcelPlan</span><span class="p">(</span><span class="n">xl_file</span><span class="p">,</span> <span class="n">md</span><span class="o">=</span><span class="p">{}):</span>
    <span class="n">excel_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">xl_file</span><span class="p">)</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
    <span class="n">xl</span> <span class="o">=</span> <span class="n">ExcelDatabaseFileGeneric</span><span class="p">(</span><span class="n">excel_file</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">xl</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="c1"># prepare the metadata</span>
        <span class="n">_md</span> <span class="o">=</span> <span class="p">{</span><span class="n">cleanupText</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="n">_md</span><span class="p">[</span><span class="s2">&quot;xl_file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xl_file</span>
        <span class="n">_md</span><span class="p">[</span><span class="s2">&quot;excel_row_number&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">_md</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">md</span><span class="p">)</span> <span class="c1"># overlay with user-supplied metadata</span>

        <span class="c1"># determine what action to take</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;action&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;open&quot;</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">bps</span><span class="o">.</span><span class="n">mv</span><span class="p">(</span><span class="n">shutter</span><span class="p">,</span> <span class="s2">&quot;open&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;close&quot;</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">bps</span><span class="o">.</span><span class="n">mv</span><span class="p">(</span><span class="n">shutter</span><span class="p">,</span> <span class="s2">&quot;close&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span>
            <span class="c1"># your code to take an image, given **row as parameters</span>
            <span class="k">yield from</span> <span class="n">my_image</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">,</span> <span class="n">md</span><span class="o">=</span><span class="n">_md</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;scan&quot;</span><span class="p">:</span>
            <span class="c1"># your code to make a scan, given **row as parameters</span>
            <span class="k">yield from</span> <span class="n">my_scan</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">,</span> <span class="n">md</span><span class="o">=</span><span class="n">_md</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;no handling for row </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: action=</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># execute this plan through the RunEngine</span>
<span class="n">RE</span><span class="p">(</span><span class="n">myExcelPlan</span><span class="p">(</span><span class="s2">&quot;spreadsheet.xlsx&quot;</span><span class="p">,</span> <span class="n">md</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">purpose</span><span class="o">=</span><span class="s2">&quot;apstools demo&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.spreadsheet.ExcelDatabaseFileGeneric.handleExcelRowEntry">
<span class="sig-name descname"><span class="pre">handleExcelRowEntry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/spreadsheet.html#ExcelDatabaseFileGeneric.handleExcelRowEntry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric.handleExcelRowEntry" title="Link to this definition">#</a></dt>
<dd><p>use row number as the unique key</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="apstools.utils.spreadsheet.ExcelReadError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.spreadsheet.</span></span><span class="sig-name descname"><span class="pre">ExcelReadError</span></span><a class="reference internal" href="../_modules/apstools/utils/spreadsheet.html#ExcelReadError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.spreadsheet.ExcelReadError" title="Link to this definition">#</a></dt>
<dd><p>Exception when reading Excel spreadsheet.</p>
<span class="target" id="index-4"></span></dd></dl>

<section id="statistics">
<span id="module-apstools.utils.statistics"></span><h3>Statistics<a class="headerlink" href="#statistics" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.statistics.array_index" title="apstools.utils.statistics.array_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">array_index</span></code></a>(arr, value)</p></td>
<td><p>Return the index for the first occurence of value in arr.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.statistics.factor_fwhm" title="apstools.utils.statistics.factor_fwhm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">factor_fwhm</span></code></a></p></td>
<td><p>FWHM <span class="math notranslate nohighlight">\(=2\sqrt{2\ln{2}}\cdot\sigma_c\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.statistics.peak_full_width" title="apstools.utils.statistics.peak_full_width"><code class="xref py py-obj docutils literal notranslate"><span class="pre">peak_full_width</span></code></a>(x, y[, positive])</p></td>
<td><p>Assess <em>apparent</em> FWHM by inspecting the data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.statistics.xy_statistics" title="apstools.utils.statistics.xy_statistics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">xy_statistics</span></code></a>(x[, y])</p></td>
<td><p>Compute statistical measures of a 1-D array (or weighted array), using <em>numpy</em>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.statistics.array_index">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.statistics.</span></span><span class="sig-name descname"><span class="pre">array_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../_modules/apstools/utils/statistics.html#array_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.statistics.array_index" title="Link to this definition">#</a></dt>
<dd><p>Return the index for the first occurence of value in arr.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="apstools.utils.statistics.factor_fwhm">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.statistics.</span></span><span class="sig-name descname"><span class="pre">factor_fwhm</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2.3548200450309493</span></em><a class="headerlink" href="#apstools.utils.statistics.factor_fwhm" title="Link to this definition">#</a></dt>
<dd><p>FWHM <span class="math notranslate nohighlight">\(=2\sqrt{2\ln{2}}\cdot\sigma_c\)</span></p>
<p>Conversion factor between full-width at half-maximum peak value and the computed
standard deviation, <span class="math notranslate nohighlight">\(\sigma_c\)</span>, of the center of mass (centroid),
<span class="math notranslate nohighlight">\(\mu\)</span>, of the peak.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://statproofbook.github.io/P/norm-fwhm.html">https://statproofbook.github.io/P/norm-fwhm.html</a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.statistics.peak_full_width">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.statistics.</span></span><span class="sig-name descname"><span class="pre">peak_full_width</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="../_modules/apstools/utils/statistics.html#peak_full_width"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.statistics.peak_full_width" title="Link to this definition">#</a></dt>
<dd><p>Assess <em>apparent</em> FWHM by inspecting the data.</p>
<ol class="arabic simple">
<li><p>Set a goal of half-way between min and max y.</p></li>
<li><p>Start at the index of the max (min if positive=False) y.</p></li>
<li><p>Find the first indices on low and high side of starting position where
the goal is passed.  Limited by the range of data available.</p></li>
<li><p>For each side, use linear interpolation to compute the x value at the
goal value.</p></li>
<li><p>Compute FWHM as the positive difference between the two sides.</p></li>
</ol>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.statistics.xy_statistics">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.statistics.</span></span><span class="sig-name descname"><span class="pre">xy_statistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#apstools.utils.mmap_dict.MMap" title="apstools.utils.mmap_dict.MMap"><span class="pre">MMap</span></a></span></span><a class="reference internal" href="../_modules/apstools/utils/statistics.html#xy_statistics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.statistics.xy_statistics" title="Link to this definition">#</a></dt>
<dd><p>Compute statistical measures of a 1-D array (or weighted array), using <em>numpy</em>.</p>
<p>Results are returned in <a class="reference internal" href="#apstools.utils.mmap_dict.MMap" title="apstools.utils.mmap_dict.MMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMap</span></code></a> dictionary.
When suppplied, <span class="math notranslate nohighlight">\(\vec{y}\)</span> will be used as the weights of <span class="math notranslate nohighlight">\(\vec{x}\)</span>.
Uses <em>numpy</em> <a class="footnote-reference brackets" href="#numpy" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> as an alternative to <em>PySumReg</em>. <a class="footnote-reference brackets" href="#pysumreg" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="numpy" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">3</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://numpy.org/">https://numpy.org/</a></p>
</aside>
<aside class="footnote brackets" id="pysumreg" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">4</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://prjemian.github.io/pysumreg/index.html">https://prjemian.github.io/pysumreg/index.html</a></p>
</aside>
</aside>
<p>PARAMETERS</p>
<dl class="simple">
<dt>x<span class="classifier">list | numpy.ndarray</span></dt><dd><p><span class="math notranslate nohighlight">\(\vec{x}\)</span>: 1-D array of numbers.</p>
</dd>
<dt>y<span class="classifier">list | numpy.ndarray</span></dt><dd><p><span class="math notranslate nohighlight">\(\vec{y}\)</span>: (optional) 1-D array of numbers.
<span class="math notranslate nohighlight">\(\vec{x}\)</span> and <span class="math notranslate nohighlight">\(\vec{y}\)</span> must be of the same length.
Used as weights for <span class="math notranslate nohighlight">\(\vec{x}\)</span> in fitting analyses.</p>
</dd>
</dl>
<p class="rubric">MMap Dictionary Keys</p>
<p>These keys are always defined.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_x</span></code></p></td>
<td><p>float</p></td>
<td><p>Maximum value of <span class="math notranslate nohighlight">\(\vec{x}\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mean_x</span></code></p></td>
<td><p>float</p></td>
<td><p><span class="math notranslate nohighlight">\(\bar{x}\)</span>: Mean value of <span class="math notranslate nohighlight">\(\vec{x}\)</span>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">median_x</span></code></p></td>
<td><p>float</p></td>
<td><p>Median value of <span class="math notranslate nohighlight">\(\vec{x}\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min_x</span></code></p></td>
<td><p>float</p></td>
<td><p>Minmum value of <span class="math notranslate nohighlight">\(\vec{x}\)</span>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>int</p></td>
<td><p><span class="math notranslate nohighlight">\(n\)</span>: Length of <span class="math notranslate nohighlight">\(\vec{x}\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">range_x</span></code></p></td>
<td><p>float</p></td>
<td><p>Difference between maximum and minimum values of <span class="math notranslate nohighlight">\(\vec{x}\)</span>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">stddev_x</span></code></p></td>
<td><p>float</p></td>
<td><p><span class="math notranslate nohighlight">\(\sigma_x\)</span> : Standard deviation of <span class="math notranslate nohighlight">\(\vec{x}\)</span>.</p></td>
</tr>
</tbody>
</table>
</div>
<p>These keys are added when <span class="math notranslate nohighlight">\(\vec{y}\)</span> is provided.
Requires <span class="math notranslate nohighlight">\(\vec{x}\)</span> &amp; <span class="math notranslate nohighlight">\(\vec{y}\)</span> to be the same length.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">centroid</span></code></p></td>
<td><p>float</p></td>
<td><p><span class="math notranslate nohighlight">\(\mu\)</span> : Average of <span class="math notranslate nohighlight">\(\vec{x}\)</span>, weighted by <span class="math notranslate nohighlight">\(\vec{y}\)</span>. <a class="footnote-reference brackets" href="#centroid" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fwhm</span></code></p></td>
<td><p>float</p></td>
<td><p>Apparent width of the peak at half the maximum value of <span class="math notranslate nohighlight">\(\vec{y}\)</span>. <a class="footnote-reference brackets" href="#fwhm" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_y</span></code></p></td>
<td><p>float</p></td>
<td><p>Maximum value of <span class="math notranslate nohighlight">\(\vec{y}\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mean_y</span></code></p></td>
<td><p>float</p></td>
<td><p><span class="math notranslate nohighlight">\(\bar{y}\)</span>: Mean value of <span class="math notranslate nohighlight">\(\vec{y}\)</span>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">median_y</span></code></p></td>
<td><p>float</p></td>
<td><p>Median value of <span class="math notranslate nohighlight">\(\vec{y}\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min_y</span></code></p></td>
<td><p>float</p></td>
<td><p>Minmum value of <span class="math notranslate nohighlight">\(\vec{y}\)</span>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">range_y</span></code></p></td>
<td><p>float</p></td>
<td><p>Difference between maximum and minimum values of <span class="math notranslate nohighlight">\(\vec{y}\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">stddev_y</span></code></p></td>
<td><p>float</p></td>
<td><p><span class="math notranslate nohighlight">\(\sigma_y\)</span> : Standard deviation of <span class="math notranslate nohighlight">\(\vec{y}\)</span>.</p></td>
</tr>
</tbody>
</table>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="centroid" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">5</a><span class="fn-bracket">]</span></span>
<p>centroid:  <span class="math notranslate nohighlight">\(\mu = {{\sum_i^n{x_i \cdot y_i}} / {\sum_i^n{y_i}}}\)</span></p>
<p>In the special case when all of <span class="math notranslate nohighlight">\(\vec{y}\)</span> is zero, <span class="math notranslate nohighlight">\(\mu\)</span> is
set to halfway between <code class="docutils literal notranslate"><span class="pre">min_x</span></code> and <code class="docutils literal notranslate"><span class="pre">max_x</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Weighted_arithmetic_mean">https://en.wikipedia.org/wiki/Weighted_arithmetic_mean</a></p>
</div>
</aside>
<aside class="footnote brackets" id="fwhm" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">6</a><span class="fn-bracket">]</span></span>
<p>FWHM: In the special case when all of <span class="math notranslate nohighlight">\(\vec{y}\)</span> is zero, <code class="docutils literal notranslate"><span class="pre">fwhm</span></code> is set
to the positive difference of <code class="docutils literal notranslate"><span class="pre">max_x</span></code> &amp;  <code class="docutils literal notranslate"><span class="pre">min_x</span></code>.</p>
</aside>
</aside>
<p>These keys are added when <span class="math notranslate nohighlight">\(\vec{y}\)</span> is not constant.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sigma</span></code></p></td>
<td><p>float</p></td>
<td><p><span class="math notranslate nohighlight">\(\sigma_c\)</span> : Standard error of <span class="math notranslate nohighlight">\(\mu\)</span>, a statistical measure of the peak width.  See <code class="docutils literal notranslate"><span class="pre">variance</span></code>.  <a class="footnote-reference brackets" href="#variance" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">variance</span></code></p></td>
<td><p>float</p></td>
<td><p><span class="math notranslate nohighlight">\(\sigma_c^2\)</span>  <a class="footnote-reference brackets" href="#variance" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">x_at_max_y</span></code></p></td>
<td><p>float</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span></code> value at maximum of <span class="math notranslate nohighlight">\(\vec{y}\)</span> array.  For positive-going peaks, this is the “peak position”.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x_at_min_y</span></code></p></td>
<td><p>float</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span></code> value at minimum of <span class="math notranslate nohighlight">\(\vec{y}\)</span> array.  For negative-going peaks, this is the “peak position”.</p></td>
</tr>
</tbody>
</table>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="variance" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id10">1</a>,<a role="doc-backlink" href="#id11">2</a>)</span>
<p>variance: <span class="math notranslate nohighlight">\(\sigma_c^2 = {{\sum_i^n{(x_i - \mu)^2 \cdot y_i}} / {\sum_i^n{y_i}}}\)</span></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Weighted_arithmetic_mean">https://en.wikipedia.org/wiki/Weighted_arithmetic_mean</a></p>
</div>
</aside>
</aside>
<p>These keys are added when a fit of <span class="math notranslate nohighlight">\(\vec{y}\)</span> <em>vs.</em> <span class="math notranslate nohighlight">\(\vec{x}\)</span> to
a first-order polynomial (straight line) and its covariance matrix can be
computed.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">correlation</span></code></p></td>
<td><p>float</p></td>
<td><p>Correlation coefficient <span class="math notranslate nohighlight">\(r\)</span>.  Measure of the goodness of fit.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">intercept</span></code></p></td>
<td><p>float</p></td>
<td><p>Computed y-axis intercept when fitting (x,y) to a straight line.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">slope</span></code></p></td>
<td><p>float</p></td>
<td><p>Computed y-axis slope when fitting (x,y) to a straight line.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">stddev_intercept</span></code></p></td>
<td><p>float</p></td>
<td><p>Standard deviation of intercept, from covariance matrix when fitting (x,y) to a straight line.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">stddev_slope</span></code></p></td>
<td><p>float</p></td>
<td><p>Standard deviation of slope, from covariance matrix when fitting (x,y) to a straight line.</p></td>
</tr>
</tbody>
</table>
</div>
</dd></dl>

<section id="save-restore-for-the-re-md-dictionary">
<span id="module-apstools.utils.stored_dict"></span><h3>Save/restore for the <cite>RE.md</cite> dictionary<a class="headerlink" href="#save-restore-for-the-re-md-dictionary" title="Link to this heading">#</a></h3>
<p>To save and restore metadata between Python sessions, we provide
<a class="reference internal" href="#apstools.utils.stored_dict.StoredDict" title="apstools.utils.stored_dict.StoredDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoredDict</span></code></a>.  This support is used to save
the contents of <code class="docutils literal notranslate"><span class="pre">RE.md</span></code> in a YAML file when this dictionary is changed.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.stored_dict.StoredDict" title="apstools.utils.stored_dict.StoredDict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StoredDict</span></code></a></p></td>
<td><p>A MutableMapping which syncs it contents to storage.</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Example</p>
<p>Setup <a class="reference internal" href="#apstools.utils.stored_dict.StoredDict" title="apstools.utils.stored_dict.StoredDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoredDict()</span></code></a> to write the contents
of <code class="docutils literal notranslate"><span class="pre">RE.md</span></code> to file <code class="docutils literal notranslate"><span class="pre">&quot;.re.md_dict.yml&quot;</span></code> (in the present working directory):</p>
<p>Within seconds of changing any key in the <code class="docutils literal notranslate"><span class="pre">RE.md</span></code> dictionary, the entire
dictionary contents will be written to the file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only changes to the top level of <cite>RE.md</cite> will trigger the file
to be updated.  Changes to lower-level structure will not trigger updates.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The YAML file is only loaded on initial use.
It is not intended for <a class="reference internal" href="#apstools.utils.stored_dict.StoredDict" title="apstools.utils.stored_dict.StoredDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoredDict()</span></code></a> to be
used to share information between multiple instances (such as two simulataneous
Bluesky sessions, each writing to the same file).</p>
<p>To share the <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> (so that it increases in a monotonic sequence)
between multiple sessions, consider using an EPICS PV
<a class="reference internal" href="_devices.html#apstools.devices.epics_scan_id_signal.EpicsScanIdSignal" title="apstools.devices.epics_scan_id_signal.EpicsScanIdSignal"><code class="xref py py-class docutils literal notranslate"><span class="pre">EpicsScanIdSignal()</span></code></a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The file could be stored in the present working directory
(of the bluesky session) or could be in any directory (absolute or
relative) to which the session has write access.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The storage model (YAML) could be changed to something else
(such as EPICS PV) by changing these two static methods:
<a class="reference internal" href="#apstools.utils.stored_dict.StoredDict.dump" title="apstools.utils.stored_dict.StoredDict.dump"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dump()</span></code></a> and
<a class="reference internal" href="#apstools.utils.stored_dict.StoredDict.load" title="apstools.utils.stored_dict.StoredDict.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a>.</p>
</div>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.stored_dict.StoredDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.stored_dict.</span></span><span class="sig-name descname"><span class="pre">StoredDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serializable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/stored_dict.html#StoredDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.stored_dict.StoredDict" title="Link to this definition">#</a></dt>
<dd><p>A MutableMapping which syncs it contents to storage.</p>
<p>The contents are stored as a single YAML file.</p>
<p>When an item is <em>mutated</em> it is not written to storage immediately. The
mapping is written to storage afer a ‘delay’ period. The ‘delay’ is
chosen long enough to allow multiple updates to the mapping before a single
write but short enough to ensure prompt backup of the mapping.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">bluesky</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span> <span class="o">=</span> <span class="n">bluesky</span><span class="o">.</span><span class="n">RunEngine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="o">.</span><span class="n">md</span> <span class="o">=</span> <span class="n">StoredDict</span><span class="p">(</span><span class="s2">&quot;.re_md_dict&quot;</span><span class="p">)</span>  <span class="c1"># save file in pwd</span>
</pre></div>
</div>
<p class="rubric">Static methods</p>
<p>All support for the YAML format is implemented in the static methods.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.stored_dict.StoredDict.dump" title="apstools.utils.stored_dict.StoredDict.dump"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dump</span></code></a>(file, contents[, title])</p></td>
<td><p>Write dictionary to YAML file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.stored_dict.StoredDict.load" title="apstools.utils.stored_dict.StoredDict.load"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load</span></code></a>(file)</p></td>
<td><p>Read dictionary from YAML file.</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Other public methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.stored_dict.StoredDict.flush" title="apstools.utils.stored_dict.StoredDict.flush"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flush</span></code></a>()</p></td>
<td><p>Force a write of the dictionary to disk</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.stored_dict.StoredDict.popitem" title="apstools.utils.stored_dict.StoredDict.popitem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">popitem</span></code></a>()</p></td>
<td><p>Remove and return a (key, value) pair as a 2-tuple.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.stored_dict.StoredDict.reload" title="apstools.utils.stored_dict.StoredDict.reload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reload</span></code></a>()</p></td>
<td><p>Read dictionary from storage.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.stored_dict.StoredDict.dump">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/stored_dict.html#StoredDict.dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.stored_dict.StoredDict.dump" title="Link to this definition">#</a></dt>
<dd><p>Write dictionary to YAML file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.stored_dict.StoredDict.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/stored_dict.html#StoredDict.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.stored_dict.StoredDict.flush" title="Link to this definition">#</a></dt>
<dd><p>Force a write of the dictionary to disk</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.stored_dict.StoredDict.load">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/stored_dict.html#StoredDict.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.stored_dict.StoredDict.load" title="Link to this definition">#</a></dt>
<dd><p>Read dictionary from YAML file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.stored_dict.StoredDict.popitem">
<span class="sig-name descname"><span class="pre">popitem</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/stored_dict.html#StoredDict.popitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.stored_dict.StoredDict.popitem" title="Link to this definition">#</a></dt>
<dd><p>Remove and return a (key, value) pair as a 2-tuple.</p>
<p>Pairs are returned in LIFO (last-in, first-out) order.
Raises KeyError if the dict is empty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.stored_dict.StoredDict.reload">
<span class="sig-name descname"><span class="pre">reload</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/stored_dict.html#StoredDict.reload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.stored_dict.StoredDict.reload" title="Link to this definition">#</a></dt>
<dd><p>Read dictionary from storage.</p>
</dd></dl>

</dd></dl>

<section id="time-constants">
<span id="module-apstools.utils.time_constants"></span><h3>TIME CONSTANTS<a class="headerlink" href="#time-constants" title="Link to this heading">#</a></h3>
<p>Define symbols used by other modules to define time (seconds).</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.time_constants.DAY" title="apstools.utils.time_constants.DAY"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DAY</span></code></a></p></td>
<td><p>24 hours (in seconds)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.time_constants.HOUR" title="apstools.utils.time_constants.HOUR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HOUR</span></code></a></p></td>
<td><p>60 minutes (in seconds)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.time_constants.MINUTE" title="apstools.utils.time_constants.MINUTE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MINUTE</span></code></a></p></td>
<td><p>60 seconds (in seconds)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.time_constants.SECOND" title="apstools.utils.time_constants.SECOND"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SECOND</span></code></a></p></td>
<td><p>One second of time (the base unit).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.time_constants.WEEK" title="apstools.utils.time_constants.WEEK"><code class="xref py py-obj docutils literal notranslate"><span class="pre">WEEK</span></code></a></p></td>
<td><p>7 days (in seconds)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.time_constants.ts2iso" title="apstools.utils.time_constants.ts2iso"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ts2iso</span></code></a>(ts[, sep])</p></td>
<td><p>Convert Python timestamp (float) to IS8601 time in current time zone.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py data">
<dt class="sig sig-object py" id="apstools.utils.time_constants.DAY">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.time_constants.</span></span><span class="sig-name descname"><span class="pre">DAY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">86400</span></em><a class="headerlink" href="#apstools.utils.time_constants.DAY" title="Link to this definition">#</a></dt>
<dd><p>24 hours (in seconds)</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="apstools.utils.time_constants.HOUR">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.time_constants.</span></span><span class="sig-name descname"><span class="pre">HOUR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3600</span></em><a class="headerlink" href="#apstools.utils.time_constants.HOUR" title="Link to this definition">#</a></dt>
<dd><p>60 minutes (in seconds)</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="apstools.utils.time_constants.MINUTE">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.time_constants.</span></span><span class="sig-name descname"><span class="pre">MINUTE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">60</span></em><a class="headerlink" href="#apstools.utils.time_constants.MINUTE" title="Link to this definition">#</a></dt>
<dd><p>60 seconds (in seconds)</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="apstools.utils.time_constants.SECOND">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.time_constants.</span></span><span class="sig-name descname"><span class="pre">SECOND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#apstools.utils.time_constants.SECOND" title="Link to this definition">#</a></dt>
<dd><p>One second of time (the base unit).</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="apstools.utils.time_constants.WEEK">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.time_constants.</span></span><span class="sig-name descname"><span class="pre">WEEK</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">604800</span></em><a class="headerlink" href="#apstools.utils.time_constants.WEEK" title="Link to this definition">#</a></dt>
<dd><p>7 days (in seconds)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.time_constants.ts2iso">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.time_constants.</span></span><span class="sig-name descname"><span class="pre">ts2iso</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'</span> <span class="pre">'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/apstools/utils/time_constants.html#ts2iso"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.time_constants.ts2iso" title="Link to this definition">#</a></dt>
<dd><p>Convert Python timestamp (float) to IS8601 time in current time zone.</p>
</dd></dl>

</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="_plans.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Plans</p>
      </div>
    </a>
    <a class="right-next"
       href="synApps/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">synApps</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#utilities-by-activity">Utilities by Activity</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aps-data-management">APS Data Management</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding">Finding</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listing">Listing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reporting">Reporting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-utilities">Other Utilities</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general">General</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-apstools.utils.aps_data_management">Submodules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.DM_WorkflowCache"><code class="docutils literal notranslate"><span class="pre">DM_WorkflowCache</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.DM_WorkflowCache._update_processing_data"><code class="docutils literal notranslate"><span class="pre">DM_WorkflowCache._update_processing_data()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.DM_WorkflowCache.define_workflow"><code class="docutils literal notranslate"><span class="pre">DM_WorkflowCache.define_workflow()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.DM_WorkflowCache.print_cache_summary"><code class="docutils literal notranslate"><span class="pre">DM_WorkflowCache.print_cache_summary()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.DM_WorkflowCache.report_dm_workflow_output"><code class="docutils literal notranslate"><span class="pre">DM_WorkflowCache.report_dm_workflow_output()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.DM_WorkflowCache.wait_workflows"><code class="docutils literal notranslate"><span class="pre">DM_WorkflowCache.wait_workflows()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.build_run_metadata_dict"><code class="docutils literal notranslate"><span class="pre">build_run_metadata_dict()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_add_workflow"><code class="docutils literal notranslate"><span class="pre">dm_add_workflow()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_api_cat"><code class="docutils literal notranslate"><span class="pre">dm_api_cat()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_api_daq"><code class="docutils literal notranslate"><span class="pre">dm_api_daq()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_api_dataset_cat"><code class="docutils literal notranslate"><span class="pre">dm_api_dataset_cat()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_api_ds"><code class="docutils literal notranslate"><span class="pre">dm_api_ds()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_api_file"><code class="docutils literal notranslate"><span class="pre">dm_api_file()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_api_filecat"><code class="docutils literal notranslate"><span class="pre">dm_api_filecat()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_api_proc"><code class="docutils literal notranslate"><span class="pre">dm_api_proc()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_daq_wait_upload_plan"><code class="docutils literal notranslate"><span class="pre">dm_daq_wait_upload_plan()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_file_ready_to_process"><code class="docutils literal notranslate"><span class="pre">dm_file_ready_to_process()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_get_daqs"><code class="docutils literal notranslate"><span class="pre">dm_get_daqs()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_get_experiment_datadir_active_daq"><code class="docutils literal notranslate"><span class="pre">dm_get_experiment_datadir_active_daq()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_get_experiment_file"><code class="docutils literal notranslate"><span class="pre">dm_get_experiment_file()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_get_experiment_path"><code class="docutils literal notranslate"><span class="pre">dm_get_experiment_path()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_get_experiments"><code class="docutils literal notranslate"><span class="pre">dm_get_experiments()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_get_workflow"><code class="docutils literal notranslate"><span class="pre">dm_get_workflow()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_setup"><code class="docutils literal notranslate"><span class="pre">dm_setup()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_source_environ"><code class="docutils literal notranslate"><span class="pre">dm_source_environ()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_start_daq"><code class="docutils literal notranslate"><span class="pre">dm_start_daq()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_station_name"><code class="docutils literal notranslate"><span class="pre">dm_station_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_stop_daq"><code class="docutils literal notranslate"><span class="pre">dm_stop_daq()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_update_workflow"><code class="docutils literal notranslate"><span class="pre">dm_update_workflow()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_upload"><code class="docutils literal notranslate"><span class="pre">dm_upload()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.get_workflow_last_stage"><code class="docutils literal notranslate"><span class="pre">get_workflow_last_stage()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.share_bluesky_metadata_with_dm"><code class="docutils literal notranslate"><span class="pre">share_bluesky_metadata_with_dm()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.validate_experiment_dataDirectory"><code class="docutils literal notranslate"><span class="pre">validate_experiment_dataDirectory()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.wait_dm_upload"><code class="docutils literal notranslate"><span class="pre">wait_dm_upload()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.apsu_controls_subnet.warn_if_not_aps_controls_subnet"><code class="docutils literal notranslate"><span class="pre">warn_if_not_aps_controls_subnet()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-databroker-catalogs">Working with databroker catalogs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.copy_filtered_catalog"><code class="docutils literal notranslate"><span class="pre">copy_filtered_catalog()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.findCatalogsInNamespace"><code class="docutils literal notranslate"><span class="pre">findCatalogsInNamespace()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.getCatalog"><code class="docutils literal notranslate"><span class="pre">getCatalog()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.getDatabase"><code class="docutils literal notranslate"><span class="pre">getDatabase()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.getDefaultCatalog"><code class="docutils literal notranslate"><span class="pre">getDefaultCatalog()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.getDefaultDatabase"><code class="docutils literal notranslate"><span class="pre">getDefaultDatabase()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.getStreamValues"><code class="docutils literal notranslate"><span class="pre">getStreamValues()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.quantify_md_key_use"><code class="docutils literal notranslate"><span class="pre">quantify_md_key_use()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parsing-descriptor-documents">Parsing descriptor documents</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.descriptor_support.get_stream_data_map"><code class="docutils literal notranslate"><span class="pre">get_stream_data_map()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#device-information">Device information</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.device_info.listdevice"><code class="docutils literal notranslate"><span class="pre">listdevice()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#email-support">email Support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.email.EmailNotifications"><code class="docutils literal notranslate"><span class="pre">EmailNotifications</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#statistical-peak-analysis-functions">Statistical peak analysis functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.image_analysis.analyze_1D"><code class="docutils literal notranslate"><span class="pre">analyze_1D()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.image_analysis.analyze_2D"><code class="docutils literal notranslate"><span class="pre">analyze_2D()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-of-the-known-plans">Directory of the known plans</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_plans.listplans"><code class="docutils literal notranslate"><span class="pre">listplans()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-of-bluesky-runs">Directory of bluesky runs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.ListRuns"><code class="docutils literal notranslate"><span class="pre">ListRuns</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.ListRuns.parse_runs"><code class="docutils literal notranslate"><span class="pre">ListRuns.parse_runs()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.ListRuns.to_dataframe"><code class="docutils literal notranslate"><span class="pre">ListRuns.to_dataframe()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.ListRuns.to_table"><code class="docutils literal notranslate"><span class="pre">ListRuns.to_table()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.getRunData"><code class="docutils literal notranslate"><span class="pre">getRunData()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.getRunDataValue"><code class="docutils literal notranslate"><span class="pre">getRunDataValue()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.listRunKeys"><code class="docutils literal notranslate"><span class="pre">listRunKeys()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.listruns"><code class="docutils literal notranslate"><span class="pre">listruns()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.summarize_runs"><code class="docutils literal notranslate"><span class="pre">summarize_runs()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#support-for-logging">Support for logging</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.log_utils.file_log_handler"><code class="docutils literal notranslate"><span class="pre">file_log_handler()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.log_utils.get_log_path"><code class="docutils literal notranslate"><span class="pre">get_log_path()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.log_utils.setup_IPython_console_logging"><code class="docutils literal notranslate"><span class="pre">setup_IPython_console_logging()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.log_utils.stream_log_handler"><code class="docutils literal notranslate"><span class="pre">stream_log_handler()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#diagnostic-support-for-memory">Diagnostic Support for Memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.memory.rss_mem"><code class="docutils literal notranslate"><span class="pre">rss_mem()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#miscellaneous-support">Miscellaneous Support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.call_signature_decorator"><code class="docutils literal notranslate"><span class="pre">call_signature_decorator()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.cleanupText"><code class="docutils literal notranslate"><span class="pre">cleanupText()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.connect_pvlist"><code class="docutils literal notranslate"><span class="pre">connect_pvlist()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.count_child_devices_and_signals"><code class="docutils literal notranslate"><span class="pre">count_child_devices_and_signals()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.count_common_subdirs"><code class="docutils literal notranslate"><span class="pre">count_common_subdirs()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.dictionary_table"><code class="docutils literal notranslate"><span class="pre">dictionary_table()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.dynamic_import"><code class="docutils literal notranslate"><span class="pre">dynamic_import()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.full_dotted_name"><code class="docutils literal notranslate"><span class="pre">full_dotted_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.itemizer"><code class="docutils literal notranslate"><span class="pre">itemizer()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.listobjects"><code class="docutils literal notranslate"><span class="pre">listobjects()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.pairwise"><code class="docutils literal notranslate"><span class="pre">pairwise()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.print_RE_md"><code class="docutils literal notranslate"><span class="pre">print_RE_md()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.redefine_motor_position"><code class="docutils literal notranslate"><span class="pre">redefine_motor_position()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.render"><code class="docutils literal notranslate"><span class="pre">render()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.replay"><code class="docutils literal notranslate"><span class="pre">replay()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.run_in_thread"><code class="docutils literal notranslate"><span class="pre">run_in_thread()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.safe_ophyd_name"><code class="docutils literal notranslate"><span class="pre">safe_ophyd_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.split_quoted_line"><code class="docutils literal notranslate"><span class="pre">split_quoted_line()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.text_encode"><code class="docutils literal notranslate"><span class="pre">text_encode()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.to_unicode_or_bust"><code class="docutils literal notranslate"><span class="pre">to_unicode_or_bust()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.trim_string_for_EPICS"><code class="docutils literal notranslate"><span class="pre">trim_string_for_EPICS()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.unix"><code class="docutils literal notranslate"><span class="pre">unix()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mmap">MMap</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.mmap_dict.MMap"><code class="docutils literal notranslate"><span class="pre">MMap</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.mmap_dict.MMap.clear"><code class="docutils literal notranslate"><span class="pre">MMap.clear()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overrideparameters">OverrideParameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters"><code class="docutils literal notranslate"><span class="pre">OverrideParameters</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.pick"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.pick()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.register"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.register()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.reset"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.reset()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.reset_all"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.reset_all()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.set"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.set()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.summary"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.summary()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-support">Plot Support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.plotxy"><code class="docutils literal notranslate"><span class="pre">plotxy()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.select_live_plot"><code class="docutils literal notranslate"><span class="pre">select_live_plot()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.select_mpl_figure"><code class="docutils literal notranslate"><span class="pre">select_mpl_figure()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.trim_plot_by_name"><code class="docutils literal notranslate"><span class="pre">trim_plot_by_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.trim_plot_lines"><code class="docutils literal notranslate"><span class="pre">trim_plot_lines()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#support-for-ipython-profiles">Support for IPython profiles</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.profile_support.getDefaultNamespace"><code class="docutils literal notranslate"><span class="pre">getDefaultNamespace()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.profile_support.ipython_profile_name"><code class="docutils literal notranslate"><span class="pre">ipython_profile_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.profile_support.ipython_shell_namespace"><code class="docutils literal notranslate"><span class="pre">ipython_shell_namespace()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#epics-pv-registry">EPICS PV Registry</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.PVRegistry"><code class="docutils literal notranslate"><span class="pre">PVRegistry</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.PVRegistry.ophyd_search"><code class="docutils literal notranslate"><span class="pre">PVRegistry.ophyd_search()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.PVRegistry.search"><code class="docutils literal notranslate"><span class="pre">PVRegistry.search()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.PVRegistry.search_by_mode"><code class="docutils literal notranslate"><span class="pre">PVRegistry.search_by_mode()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.findbyname"><code class="docutils literal notranslate"><span class="pre">findbyname()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.findbypv"><code class="docutils literal notranslate"><span class="pre">findbypv()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-databroker-catalogs">Searching databroker catalogs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.query.db_query"><code class="docutils literal notranslate"><span class="pre">db_query()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry"><code class="docutils literal notranslate"><span class="pre">SlitGeometry</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry.height"><code class="docutils literal notranslate"><span class="pre">SlitGeometry.height</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry.width"><code class="docutils literal notranslate"><span class="pre">SlitGeometry.width</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry.x"><code class="docutils literal notranslate"><span class="pre">SlitGeometry.x</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry.y"><code class="docutils literal notranslate"><span class="pre">SlitGeometry.y</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spreadsheet-support">Spreadsheet Support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.spreadsheet.ExcelDatabaseFileBase"><code class="docutils literal notranslate"><span class="pre">ExcelDatabaseFileBase</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric"><code class="docutils literal notranslate"><span class="pre">ExcelDatabaseFileGeneric</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric.handleExcelRowEntry"><code class="docutils literal notranslate"><span class="pre">ExcelDatabaseFileGeneric.handleExcelRowEntry()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.spreadsheet.ExcelReadError"><code class="docutils literal notranslate"><span class="pre">ExcelReadError</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#statistics">Statistics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.statistics.array_index"><code class="docutils literal notranslate"><span class="pre">array_index()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.statistics.factor_fwhm"><code class="docutils literal notranslate"><span class="pre">factor_fwhm</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.statistics.peak_full_width"><code class="docutils literal notranslate"><span class="pre">peak_full_width()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.statistics.xy_statistics"><code class="docutils literal notranslate"><span class="pre">xy_statistics()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#save-restore-for-the-re-md-dictionary">Save/restore for the <cite>RE.md</cite> dictionary</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.stored_dict.StoredDict"><code class="docutils literal notranslate"><span class="pre">StoredDict</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.stored_dict.StoredDict.dump"><code class="docutils literal notranslate"><span class="pre">StoredDict.dump()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.stored_dict.StoredDict.flush"><code class="docutils literal notranslate"><span class="pre">StoredDict.flush()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.stored_dict.StoredDict.load"><code class="docutils literal notranslate"><span class="pre">StoredDict.load()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.stored_dict.StoredDict.popitem"><code class="docutils literal notranslate"><span class="pre">StoredDict.popitem()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.stored_dict.StoredDict.reload"><code class="docutils literal notranslate"><span class="pre">StoredDict.reload()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#time-constants">TIME CONSTANTS</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.time_constants.DAY"><code class="docutils literal notranslate"><span class="pre">DAY</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.time_constants.HOUR"><code class="docutils literal notranslate"><span class="pre">HOUR</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.time_constants.MINUTE"><code class="docutils literal notranslate"><span class="pre">MINUTE</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.time_constants.SECOND"><code class="docutils literal notranslate"><span class="pre">SECOND</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.time_constants.WEEK"><code class="docutils literal notranslate"><span class="pre">WEEK</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.time_constants.ts2iso"><code class="docutils literal notranslate"><span class="pre">ts2iso()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/_utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2017-2025, UChicago Argonne, LLC.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>