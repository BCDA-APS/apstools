

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Utilities &#8212; apstools 1.6.17 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/_utils';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/BCDA-APS/apstools/main/docs/source/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.6.17';
        </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="synApps Support: Records, Databases, …" href="synApps/index.html" />
    <link rel="prev" title="Plans" href="_plans.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">apstools 1.6.17 documentation</p>
  
</a></div>
    
      <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown">
      1.6.17  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../applications/index.html">
                        Applications
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../examples/index.html">
                        Guides
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        API Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install.html">
                        Installation
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../changes.html">
                        Change History
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../license.html">
                        License
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../applications/index.html">
                        Applications
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../examples/index.html">
                        Guides
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        API Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install.html">
                        Installation
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../changes.html">
                        Change History
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../license.html">
                        License
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="_callbacks.html">Callbacks (includes File Writers)</a></li>
<li class="toctree-l1"><a class="reference internal" href="_devices.html">Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="_filewriters.html">File Writers</a></li>
<li class="toctree-l1"><a class="reference internal" href="_plans.html">Plans</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Utilities</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="synApps/index.html">synApps Support: Records, Databases, …</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="synApps/__common.html">EPICS Record support: common structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_asyn.html">synApps asyn record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_busy.html">synApps busy record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_calcout.html">EPICS base calcout record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_db_2slit.html">EPICS synApps optics 2slit.db</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_epid.html">synApps epid record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_iocstats.html">synApps IOC statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_luascript.html">synApps luascript record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_save_data.html">synApps save data</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_scalcout.html">EPICS synApps calc scalcout record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_sscan.html">synApps sscan record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_sseq.html">synApps sseq record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_sub.html">EPICS base sub record &amp; synApps userAve records</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_swait.html">synApps swait record</a></li>
<li class="toctree-l2"><a class="reference internal" href="synApps/_transform.html">synApps transform record</a></li>
</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">API Documentation</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Utilities</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this heading">#</a></h1>
<p>Various utilities to help APS use the Bluesky framework.</p>
<p>Also consult the <a class="reference internal" href="../genindex.html"><span class="std std-ref">Index</span></a> under the <em>apstools</em> heading
for links to the Exceptions, and Utilities described
here.</p>
<section id="utilities-by-activity">
<h2>Utilities by Activity<a class="headerlink" href="#utilities-by-activity" title="Permalink to this heading">#</a></h2>
<section id="finding">
<span id="utils-finding"></span><h3>Finding<a class="headerlink" href="#finding" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbyname" title="apstools.utils.pvregistry.findbyname"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbyname</span></code></a>(oname[, force_rebuild, ns])</p></td>
<td><p>Find the ophyd (dotted name) object associated with the given ophyd name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbypv" title="apstools.utils.pvregistry.findbypv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbypv</span></code></a>(pvname[, force_rebuild, ns])</p></td>
<td><p>Find all ophyd objects associated with the given EPICS PV.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.findCatalogsInNamespace" title="apstools.utils.catalog.findCatalogsInNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findCatalogsInNamespace</span></code></a>()</p></td>
<td><p>Return a dictionary of databroker catalogs in the default namespace.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="listing">
<span id="utils-listing"></span><h3>Listing<a class="headerlink" href="#listing" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.device_info.listdevice" title="apstools.utils.device_info.listdevice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listdevice</span></code></a>(obj[, scope, cname, dname, ...])</p></td>
<td><p>Describe the signal information from device <code class="docutils literal notranslate"><span class="pre">obj</span></code> in a pandas DataFrame.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.listobjects" title="apstools.utils.misc.listobjects"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listobjects</span></code></a>([show_pv, printing, verbose, ...])</p></td>
<td><p>Show all the ophyd Signal and Device objects defined as globals.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_plans.listplans" title="apstools.utils.list_plans.listplans"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listplans</span></code></a>([base, trunc, table_style])</p></td>
<td><p>List all plans.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listRunKeys" title="apstools.utils.list_runs.listRunKeys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listRunKeys</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Convenience function to list all keys (column names) in the scan's stream (default: primary).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns" title="apstools.utils.list_runs.ListRuns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ListRuns</span></code></a>([cat, query, keys, missing, num, ...])</p></td>
<td><p>List the runs from the given catalog according to some options.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listruns" title="apstools.utils.list_runs.listruns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listruns</span></code></a>([cat, keys, missing, num, ...])</p></td>
<td><p>List runs from catalog.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="reporting">
<span id="utils-reporting"></span><h3>Reporting<a class="headerlink" href="#reporting" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.print_RE_md" title="apstools.utils.misc.print_RE_md"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_RE_md</span></code></a>([dictionary, fmt, printing])</p></td>
<td><p>custom print the RunEngine metadata in a table</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.log_utils.file_log_handler" title="apstools.utils.log_utils.file_log_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_log_handler</span></code></a>(file_name_base[, maxBytes, ...])</p></td>
<td><p>Record logging output to a file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.log_utils.get_log_path" title="apstools.utils.log_utils.get_log_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_log_path</span></code></a>()</p></td>
<td><p>Return a path to <cite>./.logs</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.log_utils.setup_IPython_console_logging" title="apstools.utils.log_utils.setup_IPython_console_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_IPython_console_logging</span></code></a>([logger, ...])</p></td>
<td><p>Record all input (<code class="docutils literal notranslate"><span class="pre">In</span></code>) and output (<code class="docutils literal notranslate"><span class="pre">Out</span></code>) from IPython console.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.log_utils.stream_log_handler" title="apstools.utils.log_utils.stream_log_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stream_log_handler</span></code></a>([formatter, level])</p></td>
<td><p>Record logging output to a stream (such as the console).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.slit_core.SlitGeometry" title="apstools.utils.slit_core.SlitGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SlitGeometry</span></code></a>(width, height, x, y)</p></td>
<td><p>Slit size and center as a named tuple</p></td>
</tr>
</tbody>
</table>
</section>
<section id="other-utilities">
<span id="utils-other"></span><h3>Other Utilities<a class="headerlink" href="#other-utilities" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.aps_data_management.dm_setup" title="apstools.utils.aps_data_management.dm_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dm_setup</span></code></a>(setup_file)</p></td>
<td><p>Configure data management from its bash setup script.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.cleanupText" title="apstools.utils.misc.cleanupText"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanupText</span></code></a>(text)</p></td>
<td><p>convert text so it can be used as a dictionary key</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.connect_pvlist" title="apstools.utils.misc.connect_pvlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_pvlist</span></code></a>(pvlist[, wait, timeout, ...])</p></td>
<td><p>Given list of EPICS PV names, return dict of EpicsSignal objects.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.email.EmailNotifications" title="apstools.utils.email.EmailNotifications"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EmailNotifications</span></code></a>([sender])</p></td>
<td><p>send email notifications when requested</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.select_live_plot" title="apstools.utils.plot.select_live_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_live_plot</span></code></a>(bec, signal)</p></td>
<td><p>Get the <em>first</em> live plot that matches <code class="docutils literal notranslate"><span class="pre">signal</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.select_mpl_figure" title="apstools.utils.plot.select_mpl_figure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_mpl_figure</span></code></a>(x, y)</p></td>
<td><p>Get the MatPlotLib Figure window for y vs x.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_by_name" title="apstools.utils.plot.trim_plot_by_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_by_name</span></code></a>([n, plots])</p></td>
<td><p>Find the plot(s) by name and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_lines" title="apstools.utils.plot.trim_plot_lines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_lines</span></code></a>(bec, n, x, y)</p></td>
<td><p>Find the plot with axes x and y and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.trim_string_for_EPICS" title="apstools.utils.misc.trim_string_for_EPICS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_string_for_EPICS</span></code></a>(msg)</p></td>
<td><p>String must not exceed EPICS PV length.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.unix" title="apstools.utils.misc.unix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unix</span></code></a>(command[, raises])</p></td>
<td><p>Run a UNIX command, returns (stdout, stderr).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="general">
<span id="utils-general"></span><h3>General<a class="headerlink" href="#general" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.cleanupText" title="apstools.utils.misc.cleanupText"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanupText</span></code></a>(text)</p></td>
<td><p>convert text so it can be used as a dictionary key</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="_plans.html#apstools.plans.command_list.command_list_as_table" title="apstools.plans.command_list.command_list_as_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">command_list_as_table</span></code></a>(commands[, show_raw])</p></td>
<td><p>format a command list as a pyRestTable.Table object</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.connect_pvlist" title="apstools.utils.misc.connect_pvlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_pvlist</span></code></a>(pvlist[, wait, timeout, ...])</p></td>
<td><p>Given list of EPICS PV names, return dict of EpicsSignal objects.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.copy_filtered_catalog" title="apstools.utils.catalog.copy_filtered_catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_filtered_catalog</span></code></a>(source_cat, target_cat)</p></td>
<td><p>copy filtered runs from source_cat to target_cat</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.query.db_query" title="apstools.utils.query.db_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">db_query</span></code></a>(db, query)</p></td>
<td><p>Searches the databroker v2 database.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.dictionary_table" title="apstools.utils.misc.dictionary_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dictionary_table</span></code></a>(dictionary, **kwargs)</p></td>
<td><p>Return a text table from <code class="docutils literal notranslate"><span class="pre">dictionary</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.email.EmailNotifications" title="apstools.utils.email.EmailNotifications"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EmailNotifications</span></code></a>([sender])</p></td>
<td><p>send email notifications when requested</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelDatabaseFileBase" title="apstools.utils.spreadsheet.ExcelDatabaseFileBase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelDatabaseFileBase</span></code></a>([ignore_extra])</p></td>
<td><p>base class: read-only support for Excel files, treat them like databases</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric" title="apstools.utils.spreadsheet.ExcelDatabaseFileGeneric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelDatabaseFileGeneric</span></code></a>(filename[, ...])</p></td>
<td><p>Generic (read-only) handling of Excel spreadsheet-as-database</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelReadError" title="apstools.utils.spreadsheet.ExcelReadError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelReadError</span></code></a>(*args, **kwargs)</p></td>
<td><p>Exception when reading Excel spreadsheet.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbyname" title="apstools.utils.pvregistry.findbyname"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbyname</span></code></a>(oname[, force_rebuild, ns])</p></td>
<td><p>Find the ophyd (dotted name) object associated with the given ophyd name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbypv" title="apstools.utils.pvregistry.findbypv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbypv</span></code></a>(pvname[, force_rebuild, ns])</p></td>
<td><p>Find all ophyd objects associated with the given EPICS PV.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.findCatalogsInNamespace" title="apstools.utils.catalog.findCatalogsInNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findCatalogsInNamespace</span></code></a>()</p></td>
<td><p>Return a dictionary of databroker catalogs in the default namespace.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.full_dotted_name" title="apstools.utils.misc.full_dotted_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_dotted_name</span></code></a>(obj)</p></td>
<td><p>Return the full dotted name</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">getCatalog</span></code>([ref])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDatabase" title="apstools.utils.catalog.getDatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDatabase</span></code></a>([db, catalog_name])</p></td>
<td><p>Return Bluesky database using keyword guides or default choice.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultCatalog</span></code>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDefaultDatabase" title="apstools.utils.catalog.getDefaultDatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultDatabase</span></code></a>()</p></td>
<td><p>Find the &quot;default&quot; database (has the most recent run).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.profile_support.getDefaultNamespace" title="apstools.utils.profile_support.getDefaultNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultNamespace</span></code></a>([attr])</p></td>
<td><p>get the IPython shell's namespace dictionary (or globals() if not found)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.getRunData" title="apstools.utils.list_runs.getRunData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getRunData</span></code></a>(scan_id[, db, stream, query, use_v1])</p></td>
<td><p>Convenience function to get the run's data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.getRunDataValue" title="apstools.utils.list_runs.getRunDataValue"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getRunDataValue</span></code></a>(scan_id, key[, db, stream, ...])</p></td>
<td><p>Convenience function to get value of key in run stream.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.getStreamValues" title="apstools.utils.catalog.getStreamValues"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getStreamValues</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Get values from a previous scan stream in a databroker catalog.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.profile_support.ipython_profile_name" title="apstools.utils.profile_support.ipython_profile_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ipython_profile_name</span></code></a>()</p></td>
<td><p>return the name of the current ipython profile or <code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.itemizer" title="apstools.utils.misc.itemizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">itemizer</span></code></a>(fmt, items)</p></td>
<td><p>Format a list of items.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.device_info.listdevice" title="apstools.utils.device_info.listdevice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listdevice</span></code></a>(obj[, scope, cname, dname, ...])</p></td>
<td><p>Describe the signal information from device <code class="docutils literal notranslate"><span class="pre">obj</span></code> in a pandas DataFrame.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.listobjects" title="apstools.utils.misc.listobjects"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listobjects</span></code></a>([show_pv, printing, verbose, ...])</p></td>
<td><p>Show all the ophyd Signal and Device objects defined as globals.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_plans.listplans" title="apstools.utils.list_plans.listplans"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listplans</span></code></a>([base, trunc, table_style])</p></td>
<td><p>List all plans.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listRunKeys" title="apstools.utils.list_runs.listRunKeys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listRunKeys</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Convenience function to list all keys (column names) in the scan's stream (default: primary).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns" title="apstools.utils.list_runs.ListRuns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ListRuns</span></code></a>([cat, query, keys, missing, num, ...])</p></td>
<td><p>List the runs from the given catalog according to some options.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listruns" title="apstools.utils.list_runs.listruns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listruns</span></code></a>([cat, keys, missing, num, ...])</p></td>
<td><p>List runs from catalog.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters" title="apstools.utils.override_parameters.OverrideParameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OverrideParameters</span></code></a>()</p></td>
<td><p>Define parameters that can be overridden from a user configuration file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.pairwise" title="apstools.utils.misc.pairwise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pairwise</span></code></a>(iterable)</p></td>
<td><p>break a list (or other iterable) into pairs</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.plotxy" title="apstools.utils.plot.plotxy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotxy</span></code></a>(runs, xname, yname[, append, cat, ...])</p></td>
<td><p>Plot y vs x from a bluesky run.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.print_RE_md" title="apstools.utils.misc.print_RE_md"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_RE_md</span></code></a>([dictionary, fmt, printing])</p></td>
<td><p>custom print the RunEngine metadata in a table</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.quantify_md_key_use" title="apstools.utils.catalog.quantify_md_key_use"><code class="xref py py-obj docutils literal notranslate"><span class="pre">quantify_md_key_use</span></code></a>([key, db, catalog_name, ...])</p></td>
<td><p>Print table of different <code class="docutils literal notranslate"><span class="pre">key</span></code> values and how many times each appears.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.redefine_motor_position" title="apstools.utils.misc.redefine_motor_position"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redefine_motor_position</span></code></a>(motor, new_position)</p></td>
<td><p>Set EPICS motor record's user coordinate to <code class="docutils literal notranslate"><span class="pre">new_position</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.replay" title="apstools.utils.misc.replay"><code class="xref py py-obj docutils literal notranslate"><span class="pre">replay</span></code></a>(headers[, callback, sort])</p></td>
<td><p>Replay the document stream from one (or more) scans (headers).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.memory.rss_mem" title="apstools.utils.memory.rss_mem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rss_mem</span></code></a>()</p></td>
<td><p>return memory used by this process</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.run_in_thread" title="apstools.utils.misc.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_in_thread</span></code></a>(func)</p></td>
<td><p>(decorator) run <code class="docutils literal notranslate"><span class="pre">func</span></code> in thread</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.safe_ophyd_name" title="apstools.utils.misc.safe_ophyd_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">safe_ophyd_name</span></code></a>(text)</p></td>
<td><p>make text safe to be used as an ophyd object name</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.select_live_plot" title="apstools.utils.plot.select_live_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_live_plot</span></code></a>(bec, signal)</p></td>
<td><p>Get the <em>first</em> live plot that matches <code class="docutils literal notranslate"><span class="pre">signal</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.select_mpl_figure" title="apstools.utils.plot.select_mpl_figure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_mpl_figure</span></code></a>(x, y)</p></td>
<td><p>Get the MatPlotLib Figure window for y vs x.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.split_quoted_line" title="apstools.utils.misc.split_quoted_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">split_quoted_line</span></code></a>(line)</p></td>
<td><p>splits a line into words some of which might be quoted</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.summarize_runs" title="apstools.utils.list_runs.summarize_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summarize_runs</span></code></a>([since, db])</p></td>
<td><p>Report bluesky run metrics from the databroker.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.text_encode" title="apstools.utils.misc.text_encode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">text_encode</span></code></a>(source)</p></td>
<td><p>Encode <code class="docutils literal notranslate"><span class="pre">source</span></code> using the default codepoint.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.to_unicode_or_bust" title="apstools.utils.misc.to_unicode_or_bust"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_unicode_or_bust</span></code></a>(obj[, encoding])</p></td>
<td><p>from: <a class="reference external" href="http://farmdev.com/talks/unicode/">http://farmdev.com/talks/unicode/</a>  .</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_by_name" title="apstools.utils.plot.trim_plot_by_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_by_name</span></code></a>([n, plots])</p></td>
<td><p>Find the plot(s) by name and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_lines" title="apstools.utils.plot.trim_plot_lines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_lines</span></code></a>(bec, n, x, y)</p></td>
<td><p>Find the plot with axes x and y and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.trim_string_for_EPICS" title="apstools.utils.misc.trim_string_for_EPICS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_string_for_EPICS</span></code></a>(msg)</p></td>
<td><p>String must not exceed EPICS PV length.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.unix" title="apstools.utils.misc.unix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unix</span></code></a>(command[, raises])</p></td>
<td><p>Run a UNIX command, returns (stdout, stderr).</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="module-apstools.utils.aps_data_management">
<span id="submodules"></span><h2>Submodules<a class="headerlink" href="#module-apstools.utils.aps_data_management" title="Permalink to this heading">#</a></h2>
<p>Setup for for this beam line’s APS Data Management Python API client.</p>
<p>This setup must be done before the first DM_WorkflowConnector() object is
created.  The <code class="docutils literal notranslate"><span class="pre">setup_file</span></code> is the bash shell script provided by the APS Data
Management for the user’s account.</p>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.aps_data_management.dm_setup">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.aps_data_management.</span></span><span class="sig-name descname"><span class="pre">dm_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">setup_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/aps_data_management.html#dm_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.aps_data_management.dm_setup" title="Permalink to this definition">#</a></dt>
<dd><p>Configure data management from its bash setup script.</p>
<p>The return result defines the <code class="docutils literal notranslate"><span class="pre">BDP_WORKFLOW_OWNER</span></code> symbol.</p>
</dd></dl>

<span class="target" id="module-apstools.utils.catalog"></span><section id="working-with-databroker-catalogs">
<h3>Working with databroker catalogs<a class="headerlink" href="#working-with-databroker-catalogs" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.copy_filtered_catalog" title="apstools.utils.catalog.copy_filtered_catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_filtered_catalog</span></code></a>(source_cat, target_cat)</p></td>
<td><p>copy filtered runs from source_cat to target_cat</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.findCatalogsInNamespace" title="apstools.utils.catalog.findCatalogsInNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findCatalogsInNamespace</span></code></a>()</p></td>
<td><p>Return a dictionary of databroker catalogs in the default namespace.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">getCatalog</span></code>([ref])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDatabase" title="apstools.utils.catalog.getDatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDatabase</span></code></a>([db, catalog_name])</p></td>
<td><p>Return Bluesky database using keyword guides or default choice.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultCatalog</span></code>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.getDefaultDatabase" title="apstools.utils.catalog.getDefaultDatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultDatabase</span></code></a>()</p></td>
<td><p>Find the &quot;default&quot; database (has the most recent run).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.catalog.getStreamValues" title="apstools.utils.catalog.getStreamValues"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getStreamValues</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Get values from a previous scan stream in a databroker catalog.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.catalog.quantify_md_key_use" title="apstools.utils.catalog.quantify_md_key_use"><code class="xref py py-obj docutils literal notranslate"><span class="pre">quantify_md_key_use</span></code></a>([key, db, catalog_name, ...])</p></td>
<td><p>Print table of different <code class="docutils literal notranslate"><span class="pre">key</span></code> values and how many times each appears.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.copy_filtered_catalog">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">copy_filtered_catalog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_cat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_cat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#copy_filtered_catalog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.copy_filtered_catalog" title="Permalink to this definition">#</a></dt>
<dd><p>copy filtered runs from source_cat to target_cat</p>
<p>PARAMETERS</p>
<dl>
<dt>source_cat</dt><dd><p><em>obj</em> :
instance of <cite>databroker.Broker</cite> or <cite>databroker.catalog[name]</cite></p>
</dd>
<dt>target_cat</dt><dd><p><em>obj</em> :
instance of <cite>databroker.Broker</cite> or <cite>databroker.catalog[name]</cite></p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
(default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>)</p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
</dl>
<p>example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">copy_filtered_catalog</span><span class="p">(</span>
    <span class="n">databroker</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">named</span><span class="p">(</span><span class="s2">&quot;mongodb_config&quot;</span><span class="p">),</span>
    <span class="n">databroker</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;test1&quot;</span><span class="p">],</span>
    <span class="p">{</span><span class="s1">&#39;plan_name&#39;</span><span class="p">:</span> <span class="s1">&#39;snapshot&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.findCatalogsInNamespace">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">findCatalogsInNamespace</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#findCatalogsInNamespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.findCatalogsInNamespace" title="Permalink to this definition">#</a></dt>
<dd><p>Return a dictionary of databroker catalogs in the default namespace.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.getDatabase">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">getDatabase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catalog_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#getDatabase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.getDatabase" title="Permalink to this definition">#</a></dt>
<dd><p>Return Bluesky database using keyword guides or default choice.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>
(default: see <code class="docutils literal notranslate"><span class="pre">catalog_name</span></code> keyword argument)</p>
</dd>
<dt>catalog_name</dt><dd><p><em>str</em> :
Name of databroker v2 catalog, used when supplied
<code class="docutils literal notranslate"><span class="pre">db</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.
(default: catalog with most recent run timestamp)</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>object or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code></p>
</dd>
</dl>
<p>(new in release 1.4.0)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.getDefaultDatabase">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">getDefaultDatabase</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#getDefaultDatabase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.getDefaultDatabase" title="Permalink to this definition">#</a></dt>
<dd><p>Find the “default” database (has the most recent run).</p>
<p>Note that here, <em>database</em> and <em>catalog</em> mean the same.</p>
<p>This routine looks at all the database instances defined in the
current session (console or notebook).  If there is only one or no
database instances defined as objects in the current session, the
choice is simple.  When there is more than one database instance in
the current session, then the one with the most recent run timestamp
is selected.  In the case (as happens when starting with a new
database) that the current database has <strong>no</strong> runs <em>and</em> another
database instance is defined in the session <em>and</em> that additional
database has runs in it (such as the previous database), then the
database with the newest run timestamp (and not the newer empty
database) will be chosen.</p>
<p>RETURNS</p>
<dl class="simple">
<dt>object or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code></p>
</dd>
</dl>
<p>(new in release 1.4.0)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.getStreamValues">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">getStreamValues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_fragment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'baseline'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_v1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#getStreamValues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.getStreamValues" title="Permalink to this definition">#</a></dt>
<dd><p>Get values from a previous scan stream in a databroker catalog.</p>
<p>Optionally, select only those data with names including <code class="docutils literal notranslate"><span class="pre">key_fragment</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If the output is truncated, use
<code class="docutils literal notranslate"><span class="pre">pd.set_option('display.max_rows',</span> <span class="pre">300)</span></code>
to increase the number of rows displayed.</p>
</div>
<p>PARAMETERS</p>
<dl>
<dt>scan_id</dt><dd><p><em>int</em> or <em>str</em> :
Scan (run) identifier.
Positive integer value is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> from run’s metadata.
Negative integer value is since most recent run in databroker.
String is run’s <code class="docutils literal notranslate"><span class="pre">uid</span></code> unique identifier (can abbreviate to
the first characters needed to assure it is unique).</p>
</dd>
<dt>key_fragment</dt><dd><p><em>str</em> :
Part or all of key name to be found in selected stream.
For instance, if you specify <code class="docutils literal notranslate"><span class="pre">key_fragment=&quot;lakeshore&quot;</span></code>,
it will return all the keys that include <code class="docutils literal notranslate"><span class="pre">lakeshore</span></code>.</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.
Default: will search existing session for instance.</p>
</dd>
<dt>stream</dt><dd><p><em>str</em> :
Name of the bluesky data stream to obtain the data.
Default: ‘baseline’</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
<dt>use_v1</dt><dd><p><em>bool</em> :
Chooses databroker API version between ‘v1’ or ‘v2’.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> (meaning use the v1 API)</p>
</dd>
</dl>
<p>RETURNS</p>
<dl>
<dt><em>object</em> :</dt><dd><p>pandas DataFrame with values from selected stream, search_string, and query</p>
<p>see: <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html</a></p>
</dd>
</dl>
<p>(new in apstools 1.5.1)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.catalog.quantify_md_key_use">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.catalog.</span></span><span class="sig-name descname"><span class="pre">quantify_md_key_use</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catalog_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">since</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">until</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/catalog.html#quantify_md_key_use"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.catalog.quantify_md_key_use" title="Permalink to this definition">#</a></dt>
<dd><p>Print table of different <code class="docutils literal notranslate"><span class="pre">key</span></code> values and how many times each appears.</p>
<p>PARAMETERS</p>
<dl>
<dt>key <em>str</em> :</dt><dd><p>one of the metadata keys in a run’s start document
(default: <code class="docutils literal notranslate"><span class="pre">plan_name</span></code>)</p>
</dd>
<dt>db <em>object</em> :</dt><dd><p>Instance of databroker v1 <code class="docutils literal notranslate"><span class="pre">Broker</span></code> or v2 <code class="docutils literal notranslate"><span class="pre">catalog</span></code>
(default: see <code class="docutils literal notranslate"><span class="pre">catalog_name</span></code> keyword argument)</p>
</dd>
<dt>catalog_name <em>str</em> :</dt><dd><p>Name of databroker v2 catalog, used when supplied <code class="docutils literal notranslate"><span class="pre">db</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.
(default: <code class="docutils literal notranslate"><span class="pre">mongodb_config</span></code>)</p>
</dd>
<dt>since <em>str</em> :</dt><dd><p>include runs that started on or after this ISO8601 time
(default: <code class="docutils literal notranslate"><span class="pre">1995-01-01</span></code>)</p>
</dd>
<dt>until <em>str</em> :</dt><dd><p>include runs that started before this ISO8601 time
(default: <code class="docutils literal notranslate"><span class="pre">2100-12-31</span></code>)</p>
</dd>
<dt>query <em>dict</em> :</dt><dd><p>mongo query dictionary, used to filter the results
(default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>)</p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
</dl>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;proposal_id&quot;</span><span class="p">)</span>
<span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;plan_name&quot;</span><span class="p">,</span> <span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;9idc&quot;</span><span class="p">,</span> <span class="n">since</span><span class="o">=</span><span class="s2">&quot;2020-07&quot;</span><span class="p">)</span>
<span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;beamline_id&quot;</span><span class="p">,</span> <span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;9idc&quot;</span><span class="p">)</span>
<span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;beamline_id&quot;</span><span class="p">,</span>
                    <span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;9idc&quot;</span><span class="p">,</span>
                    <span class="n">query</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;plan_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Flyscan&#39;</span><span class="p">},</span>
                    <span class="n">since</span><span class="o">=</span><span class="s2">&quot;2020&quot;</span><span class="p">,</span>
                    <span class="n">until</span><span class="o">=</span><span class="s2">&quot;2020-06-21 21:51&quot;</span><span class="p">)</span>
<span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;8id&quot;</span><span class="p">,</span> <span class="n">since</span><span class="o">=</span><span class="s2">&quot;2020-01&quot;</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="s2">&quot;2020-03&quot;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;apstools_test&quot;</span><span class="p">)</span>
<span class="o">=========</span> <span class="o">=====</span>
<span class="n">plan_name</span> <span class="c1">#runs</span>
<span class="o">=========</span> <span class="o">=====</span>
<span class="n">count</span>     <span class="mi">26</span>
<span class="n">scan</span>      <span class="mi">27</span>
<span class="o">=========</span> <span class="o">=====</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">quantify_md_key_use</span><span class="p">(</span><span class="n">catalog_name</span><span class="o">=</span><span class="s2">&quot;usaxs_test&quot;</span><span class="p">)</span>
<span class="o">==========================</span> <span class="o">=====</span>
<span class="n">plan_name</span>                  <span class="c1">#runs</span>
<span class="o">==========================</span> <span class="o">=====</span>
<span class="n">Flyscan</span>                    <span class="mi">1</span>
<span class="n">TuneAxis</span><span class="o">.</span><span class="n">tune</span>              <span class="mi">1</span>
<span class="n">count</span>                      <span class="mi">1</span>
<span class="n">measure_USAXS_Transmission</span> <span class="mi">1</span>
<span class="n">run_Excel_file</span>             <span class="mi">1</span>
<span class="n">snapshot</span>                   <span class="mi">1</span>
<span class="n">tune_a2rp</span>                  <span class="mi">1</span>
<span class="n">tune_ar</span>                    <span class="mi">1</span>
<span class="n">tune_m2rp</span>                  <span class="mi">1</span>
<span class="n">tune_mr</span>                    <span class="mi">1</span>
<span class="o">==========================</span> <span class="o">=====</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="module-apstools.utils.device_info"></span><section id="device-information">
<h3>Device information<a class="headerlink" href="#device-information" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.device_info.listdevice" title="apstools.utils.device_info.listdevice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listdevice</span></code></a>(obj[, scope, cname, dname, ...])</p></td>
<td><p>Describe the signal information from device <code class="docutils literal notranslate"><span class="pre">obj</span></code> in a pandas DataFrame.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.device_info.listdevice">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.device_info.</span></span><span class="sig-name descname"><span class="pre">listdevice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_pv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_datetime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_ancient</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_column_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">TableStyle.pyRestTable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/device_info.html#listdevice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.device_info.listdevice" title="Permalink to this definition">#</a></dt>
<dd><p>Describe the signal information from device <code class="docutils literal notranslate"><span class="pre">obj</span></code> in a pandas DataFrame.</p>
<p>Look through all subcomponents to find all the signals to be
shown. Components that are disconnected will be skipped and a
warning logged.</p>
<p>PARAMETERS</p>
<dl>
<dt>obj</dt><dd><p><em>object</em> : Instance of ophyd Signal or Device.</p>
</dd>
<dt>scope</dt><dd><p><em>str</em> or None : Scope of content to be shown.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;full&quot;</span></code> (or <code class="docutils literal notranslate"><span class="pre">None</span></code>) shows all Signal components</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;epics&quot;</span></code> shows only EPICS-based Signals</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;read&quot;</span></code> shows only the signals returned by <code class="docutils literal notranslate"><span class="pre">obj.read()</span></code></p></li>
</ul>
<p>default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt>cname</dt><dd><p><em>bool</em> : Show the _control_ (Python, dotted) name in column <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
<dt>dname</dt><dd><p><em>bool</em> : Show the _data_ (databroker, with underlines) name in
column <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">name</span></code>.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
<dt>show_pv</dt><dd><p><em>bool</em> : Show the EPICS process variable (PV) name in
column <code class="docutils literal notranslate"><span class="pre">PV</span></code>.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
<dt>use_datetime <em>bool</em> :</dt><dd><p>Show the EPICS timestamp (time of last update) in
column <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
<dt>show_ancient <em>bool</em> :</dt><dd><p>Show uninitialized EPICS process variables.</p>
<p>In EPICS, an uninitialized PV has a timestamp of 1990-01-01 UTC.
This option enables or suppresses ancient values identified
by timestamp from 1989.  These are values only defined in
the original <code class="docutils literal notranslate"><span class="pre">.db</span></code> file.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
<dt>max_column_width <em>int</em> or <em>None</em> :</dt><dd><p>Truncate long columns to no more than this length.  If not default,
then table will be formatted using pyRestTable.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">None</span></code> (will use <code class="docutils literal notranslate"><span class="pre">50</span></code>)</p>
</dd>
<dt>table_style <em>object</em> :</dt><dd><p>Either <code class="docutils literal notranslate"><span class="pre">apstools.utils.TableStyle.pandas</span></code> (default) or
using values from <code class="xref py py-class docutils literal notranslate"><span class="pre">apstools.utils.TableStyle</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> wll truncate long text
to at most 50 characters.</p>
</div>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-apstools.utils.email"></span><section id="email-support">
<h3>email Support<a class="headerlink" href="#email-support" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.email.EmailNotifications" title="apstools.utils.email.EmailNotifications"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EmailNotifications</span></code></a>([sender])</p></td>
<td><p>send email notifications when requested</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.email.EmailNotifications">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.email.</span></span><span class="sig-name descname"><span class="pre">EmailNotifications</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sender</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/email.html#EmailNotifications"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.email.EmailNotifications" title="Permalink to this definition">#</a></dt>
<dd><p>send email notifications when requested</p>
<p id="index-0">use default OS mail utility (so no credentials needed)</p>
<p>EXAMPLE</p>
<p>Send email(s) when <cite>feedback_limits_approached</cite>
(a hypothetical boolean) is <cite>True</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># setup</span>
<span class="kn">from</span> <span class="nn">apstools.utils</span> <span class="kn">import</span> <span class="n">EmailNotifications</span>

<span class="n">SENDER_EMAIL</span> <span class="o">=</span> <span class="s2">&quot;instrument_user@email.host.tld&quot;</span>

<span class="n">email_notices</span> <span class="o">=</span> <span class="n">EmailNotifications</span><span class="p">(</span><span class="n">SENDER_EMAIL</span><span class="p">)</span>
<span class="n">email_notices</span><span class="o">.</span><span class="n">add_addresses</span><span class="p">(</span>
    <span class="c1"># This list receives email when send() is called.</span>
    <span class="s2">&quot;joe.user@goodmail.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;instrument_team@email.host.tld&quot;</span><span class="p">,</span>
    <span class="c1"># others?</span>
<span class="p">)</span>

<span class="c1"># ... later</span>

<span class="k">if</span> <span class="n">feedback_limits_approached</span><span class="p">:</span>
    <span class="c1"># send emails to list</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;Feedback problem&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Feedback is very close to its limits.&quot;</span>
    <span class="n">email_notices</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="module-apstools.utils.image_analysis"></span><section id="statistical-peak-analysis-functions">
<h3>Statistical peak analysis functions<a class="headerlink" href="#statistical-peak-analysis-functions" title="Permalink to this heading">#</a></h3>
<p>Uses <em>pysumreg</em> package (<a class="reference external" href="https://prjemian.github.io/pysumreg/">https://prjemian.github.io/pysumreg/</a>) to obtain summary
statistics.</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.image_analysis.analyze_1D" title="apstools.utils.image_analysis.analyze_1D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">analyze_1D</span></code></a>(y_arr[, x_arr])</p></td>
<td><p>Measures of 1D data peak center &amp; width.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.image_analysis.analyze_2D" title="apstools.utils.image_analysis.analyze_2D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">analyze_2D</span></code></a>(image)</p></td>
<td><p>Analyze 2-D (image) data.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.image_analysis.analyze_1D">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.image_analysis.</span></span><span class="sig-name descname"><span class="pre">analyze_1D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_arr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/image_analysis.html#analyze_1D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.image_analysis.analyze_1D" title="Permalink to this definition">#</a></dt>
<dd><p>Measures of 1D data peak center &amp; width.</p>
<p>Return result is a dictionary prepared by the
<code class="docutils literal notranslate"><span class="pre">to_dict(use_registers=True)</span></code> method of the
<code class="docutils literal notranslate"><span class="pre">pysumreg.SummationRegisters()</span></code> class.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;mean_x&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;mean_y&#39;</span><span class="p">:</span> <span class="mf">7.2</span><span class="p">,</span>
<span class="s1">&#39;stddev_x&#39;</span><span class="p">:</span> <span class="mf">1.5811388300841898</span><span class="p">,</span> <span class="s1">&#39;stddev_y&#39;</span><span class="p">:</span> <span class="mf">3.3466401061363027</span><span class="p">,</span>
<span class="s1">&#39;slope&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;intercept&#39;</span><span class="p">:</span> <span class="mf">7.2</span><span class="p">,</span> <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="s1">&#39;centroid&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">1.1547005383792515</span><span class="p">,</span>
<span class="s1">&#39;min_x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;max_x&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;min_y&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;max_y&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
<span class="s1">&#39;x_at_max_y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span> <span class="mi">36</span><span class="p">,</span> <span class="s1">&#39;XX&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span>
<span class="s1">&#39;XXY&#39;</span><span class="p">:</span> <span class="mi">192</span><span class="p">,</span> <span class="s1">&#39;YY&#39;</span><span class="p">:</span> <span class="mi">304</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.image_analysis.analyze_2D">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.image_analysis.</span></span><span class="sig-name descname"><span class="pre">analyze_2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/image_analysis.html#analyze_2D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.image_analysis.analyze_2D" title="Permalink to this definition">#</a></dt>
<dd><p>Analyze 2-D (image) data.</p>
<p>Return result is a dictionary with the statistical results for a peak
analysis, grouped in pairs (row, column) as it makes sense given
<code class="docutils literal notranslate"><span class="pre">frame[rows][columns]</span></code>.
The <span class="math notranslate nohighlight">\(x\)</span> values are the index number along the respective axis.</p>
<p>For this image data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This is the analysis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
 <span class="s1">&#39;centroid&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">2.1628</span><span class="p">,</span> <span class="mf">1.814</span><span class="p">),</span>
 <span class="s1">&#39;sigma&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.1192</span><span class="p">,</span> <span class="mf">0.8695</span><span class="p">),</span>
 <span class="s1">&#39;peak_position&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
 <span class="s1">&#39;max_y&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="module-apstools.utils.list_plans"></span><section id="directory-of-the-known-plans">
<h3>Directory of the known plans<a class="headerlink" href="#directory-of-the-known-plans" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_plans.listplans" title="apstools.utils.list_plans.listplans"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listplans</span></code></a>([base, trunc, table_style])</p></td>
<td><p>List all plans.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_plans.listplans">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_plans.</span></span><span class="sig-name descname"><span class="pre">listplans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trunc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">TableStyle.pyRestTable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_plans.html#listplans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_plans.listplans" title="Permalink to this definition">#</a></dt>
<dd><p>List all plans.  (Actually, lists all generator functions).</p>
<p>NOTE: Can only detect generator functions.
Bluesky plans are generator functions that generate
<code class="docutils literal notranslate"><span class="pre">bluesky.Msg</span></code> objects.  There is a PR to define
a decorator that identifies a generator function
as a bluesky plan.</p>
<p>PARAMETERS</p>
<dl>
<dt>base <em>object</em> or <em>None</em> :</dt><dd><p>Object that contains plan methods (if <code class="docutils literal notranslate"><span class="pre">None</span></code>, use global namespace.)
(default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
</dd>
<dt>trunc <em>int</em> :</dt><dd><p>Truncate long docstrings to no more than <code class="docutils literal notranslate"><span class="pre">trunc</span></code> characters.
(default: 50)</p>
</dd>
<dt>table_style <em>object</em> :</dt><dd><p>Either <code class="docutils literal notranslate"><span class="pre">TableStyle.pyRestTable</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">TableStyle.pandas</span></code>,
using values from <code class="xref py py-class docutils literal notranslate"><span class="pre">apstools.utils.TableStyle</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> wll truncate long text to at most 50 characters.</p>
</div>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-apstools.utils.list_runs"></span><section id="directory-of-bluesky-runs">
<h3>Directory of bluesky runs<a class="headerlink" href="#directory-of-bluesky-runs" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.getRunData" title="apstools.utils.list_runs.getRunData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getRunData</span></code></a>(scan_id[, db, stream, query, use_v1])</p></td>
<td><p>Convenience function to get the run's data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.getRunDataValue" title="apstools.utils.list_runs.getRunDataValue"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getRunDataValue</span></code></a>(scan_id, key[, db, stream, ...])</p></td>
<td><p>Convenience function to get value of key in run stream.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listRunKeys" title="apstools.utils.list_runs.listRunKeys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listRunKeys</span></code></a>(scan_id[, key_fragment, db, ...])</p></td>
<td><p>Convenience function to list all keys (column names) in the scan's stream (default: primary).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns" title="apstools.utils.list_runs.ListRuns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ListRuns</span></code></a>([cat, query, keys, missing, num, ...])</p></td>
<td><p>List the runs from the given catalog according to some options.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.listruns" title="apstools.utils.list_runs.listruns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listruns</span></code></a>([cat, keys, missing, num, ...])</p></td>
<td><p>List runs from catalog.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.summarize_runs" title="apstools.utils.list_runs.summarize_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summarize_runs</span></code></a>([since, db])</p></td>
<td><p>Report bluesky run metrics from the databroker.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.list_runs.ListRuns">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">ListRuns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">since</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sortby</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'time'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timefmt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'%Y-%m-%d</span> <span class="pre">%H:%M:%S'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">until</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hints_override</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#ListRuns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.ListRuns" title="Permalink to this definition">#</a></dt>
<dd><p>List the runs from the given catalog according to some options.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ListRuns</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
</pre></div>
</div>
<p>PUBLIC METHODS</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns.to_dataframe" title="apstools.utils.list_runs.ListRuns.to_dataframe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dataframe</span></code></a>()</p></td>
<td><p>Output as pandas DataFrame object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns.to_table" title="apstools.utils.list_runs.ListRuns.to_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_table</span></code></a>([fmt])</p></td>
<td><p>Output as pyRestTable object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.list_runs.ListRuns.parse_runs" title="apstools.utils.list_runs.ListRuns.parse_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_runs</span></code></a>()</p></td>
<td><p>Parse the runs for the given metadata keys.</p></td>
</tr>
</tbody>
</table>
<p>INTERNAL METHODS</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">_get_by_key</span></code>(md, key)</p></td>
<td><p>Get run's metadata value by key.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">_check_cat</span></code>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">_apply_search_filters</span></code>()</p></td>
<td><p>Search for runs from the catalog.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">_check_keys</span></code>()</p></td>
<td><p>Check that self.keys is a list of strings.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.list_runs.ListRuns.parse_runs">
<span class="sig-name descname"><span class="pre">parse_runs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#ListRuns.parse_runs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.ListRuns.parse_runs" title="Permalink to this definition">#</a></dt>
<dd><p>Parse the runs for the given metadata keys.  Return a dict.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.list_runs.ListRuns.to_dataframe">
<span class="sig-name descname"><span class="pre">to_dataframe</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#ListRuns.to_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.ListRuns.to_dataframe" title="Permalink to this definition">#</a></dt>
<dd><p>Output as pandas DataFrame object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.list_runs.ListRuns.to_table">
<span class="sig-name descname"><span class="pre">to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#ListRuns.to_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.ListRuns.to_table" title="Permalink to this definition">#</a></dt>
<dd><p>Output as pyRestTable object.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.getRunData">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">getRunData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'primary'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_v1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#getRunData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.getRunData" title="Permalink to this definition">#</a></dt>
<dd><p>Convenience function to get the run’s data.  Default is the <code class="docutils literal notranslate"><span class="pre">primary</span></code> stream.</p>
<p>PARAMETERS</p>
<dl>
<dt>scan_id</dt><dd><p><em>int</em> or <em>str</em> :
Scan (run) identifier.
Positive integer value is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> from run’s metadata.
Negative integer value is since most recent run in databroker.
String is run’s <code class="docutils literal notranslate"><span class="pre">uid</span></code> unique identifier (can abbreviate to
the first characters needed to assure it is unique).</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.
Default: will search existing session for instance.</p>
</dd>
<dt>stream</dt><dd><p><em>str</em> :
Name of the bluesky data stream to obtain the data.
Default: ‘primary’</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
<dt>use_v1</dt><dd><p><em>bool</em> :
Chooses databroker API version between ‘v1’ or ‘v2’.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> (meaning use the v1 API)</p>
</dd>
</dl>
<p>(new in apstools 1.5.1)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.getRunDataValue">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">getRunDataValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'primary'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_v1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#getRunDataValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.getRunDataValue" title="Permalink to this definition">#</a></dt>
<dd><p>Convenience function to get value of key in run stream.</p>
<p>Defaults are last value of key in primary stream.</p>
<p>PARAMETERS</p>
<dl>
<dt>scan_id</dt><dd><p><em>int</em> or <em>str</em> :
Scan (run) identifier.
Positive integer value is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> from run’s metadata.
Negative integer value is since most recent run in databroker.
String is run’s <code class="docutils literal notranslate"><span class="pre">uid</span></code> unique identifier (can abbreviate to
the first characters needed to assure it is unique).</p>
</dd>
<dt>key</dt><dd><p><em>str</em> :
Name of the key (data column) in the table of the stream’s data.
Must match <em>identically</em>.</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.
Default: will search existing session for instance.</p>
</dd>
<dt>stream</dt><dd><p><em>str</em> :
Name of the bluesky data stream to obtain the data.
Default: ‘primary’</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
<dt>idx</dt><dd><p><em>int</em> or <em>str</em> :
List index of value to be returned from column of table.
Can be <code class="docutils literal notranslate"><span class="pre">0</span></code> for first value, <code class="docutils literal notranslate"><span class="pre">-1</span></code> for last value, <code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code>
for average value, or <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> for the full list of values.
Default: <code class="docutils literal notranslate"><span class="pre">-1</span></code></p>
</dd>
<dt>use_v1</dt><dd><p><em>bool</em> :
Chooses databroker API version between ‘v1’ or ‘v2’.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> (meaning use the v1 API)</p>
</dd>
</dl>
<p>(new in apstools 1.5.1)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.listRunKeys">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">listRunKeys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_fragment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'primary'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_v1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#listRunKeys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.listRunKeys" title="Permalink to this definition">#</a></dt>
<dd><p>Convenience function to list all keys (column names) in the scan’s stream (default: primary).</p>
<p>PARAMETERS</p>
<dl>
<dt>scan_id</dt><dd><p><em>int</em> or <em>str</em> :
Scan (run) identifier.
Positive integer value is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> from run’s metadata.
Negative integer value is since most recent run in databroker.
String is run’s <code class="docutils literal notranslate"><span class="pre">uid</span></code> unique identifier (can abbreviate to
the first characters needed to assure it is unique).</p>
</dd>
<dt>key_fragment</dt><dd><p><em>str</em> :
Part or all of key name to be found in selected stream.
For instance, if you specify <code class="docutils literal notranslate"><span class="pre">key_fragment=&quot;lakeshore&quot;</span></code>,
it will return all the keys that include <code class="docutils literal notranslate"><span class="pre">lakeshore</span></code>.</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.
Default: will search existing session for instance.</p>
</dd>
<dt>stream</dt><dd><p><em>str</em> :
Name of the bluesky data stream to obtain the data.
Default: ‘primary’</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
mongo query dictionary, used to filter the results
Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p>
<p>see: <a class="reference external" href="https://docs.mongodb.com/manual/reference/operator/query/">https://docs.mongodb.com/manual/reference/operator/query/</a></p>
</dd>
<dt>strict</dt><dd><p><em>bool</em> :
Should the <code class="docutils literal notranslate"><span class="pre">key_fragment</span></code> be matched identically (<code class="docutils literal notranslate"><span class="pre">strict=True</span></code>)
or matched by lower case comparison (<code class="docutils literal notranslate"><span class="pre">strict=False</span></code>)?
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
<dt>use_v1</dt><dd><p><em>bool</em> :
Chooses databroker API version between ‘v1’ or ‘v2’.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> (meaning use the v1 API)</p>
</dd>
</dl>
<p>(new in apstools 1.5.1)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.listruns">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">listruns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">since</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sortby</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'time'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tablefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">TableStyle.pyRestTable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%Y-%m-%d</span> <span class="pre">%H:%M:%S'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">until</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hints_override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">query</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#listruns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.listruns" title="Permalink to this definition">#</a></dt>
<dd><p>List runs from catalog.</p>
<p>This function provides a thin interface to the highly-reconfigurable
<code class="docutils literal notranslate"><span class="pre">ListRuns()</span></code> class in this package.</p>
<p>PARAMETERS</p>
<dl>
<dt>cat</dt><dd><p><em>object</em> :
Instance of databroker v1 or v2 catalog.</p>
</dd>
<dt>keys</dt><dd><p><em>str</em> or <em>[str]</em> or None:
Include these additional keys from the start document.
(default: <code class="docutils literal notranslate"><span class="pre">None</span></code> means <code class="docutils literal notranslate"><span class="pre">&quot;scan_id</span> <span class="pre">time</span> <span class="pre">plan_name</span> <span class="pre">detectors&quot;</span></code>)</p>
</dd>
<dt>missing</dt><dd><p><em>str</em>:
Test to report when a value is not available.
(default: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p>
</dd>
<dt>hints_override <em>bool</em>:</dt><dd><p>For a key that appears in both the metadata and the hints,
override the metadata value if the same key is found in the hints.
(default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p>
</dd>
<dt>ids</dt><dd><p><em>[int]</em> or <em>[str]</em>:
List of <code class="docutils literal notranslate"><span class="pre">uid</span></code> or <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> value(s).
Can mix different kinds in the same list.
Also can specify offsets (e.g., <code class="docutils literal notranslate"><span class="pre">-1</span></code>).
According to the rules for <code class="docutils literal notranslate"><span class="pre">databroker</span></code> catalogs,
a string is a <code class="docutils literal notranslate"><span class="pre">uid</span></code> (partial representations allowed),
an int is <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> if positive or an offset if negative.
(default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
</dd>
<dt>num</dt><dd><p><em>int</em> :
Make the table include the <code class="docutils literal notranslate"><span class="pre">num</span></code> most recent runs.
(default: <code class="docutils literal notranslate"><span class="pre">20</span></code>)</p>
</dd>
<dt>printing <em>bool</em> or <em>str</em> :</dt><dd><p>Deprecated.</p>
</dd>
<dt>reverse</dt><dd><p><em>bool</em> :
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, sort in descending order by <code class="docutils literal notranslate"><span class="pre">sortby</span></code>.
(default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
</dd>
<dt>since</dt><dd><p><em>str</em> :
include runs that started on or after this ISO8601 time
(default: <code class="docutils literal notranslate"><span class="pre">&quot;1995-01-01&quot;</span></code>)</p>
</dd>
<dt>sortby</dt><dd><p><em>str</em> :
Sort columns by this key, found by exact match in either
the <code class="docutils literal notranslate"><span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">stop</span></code> document.
(default: <code class="docutils literal notranslate"><span class="pre">&quot;time&quot;</span></code>)</p>
</dd>
<dt>tablefmt <em>str</em> :</dt><dd><p>Deprecated.  Use <code class="docutils literal notranslate"><span class="pre">table_style</span></code> instead.</p>
</dd>
<dt>table_style <em>object</em> :</dt><dd><p>Either <code class="docutils literal notranslate"><span class="pre">TableStyle.pyRestTable</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">TableStyle.pandas</span></code>,
using values from <code class="xref py py-class docutils literal notranslate"><span class="pre">apstools.utils.TableStyle</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> wll truncate long text to at most 50 characters.</p>
</div>
</dd>
<dt>timefmt</dt><dd><p><em>str</em> :
The <code class="docutils literal notranslate"><span class="pre">time</span></code> key (also includes keys <code class="docutils literal notranslate"><span class="pre">&quot;start.time&quot;</span></code> and  <code class="docutils literal notranslate"><span class="pre">&quot;stop.time&quot;</span></code>)
will be formatted by the <code class="docutils literal notranslate"><span class="pre">self.timefmt</span></code> value.
See <a class="reference external" href="https://strftime.org/">https://strftime.org/</a> for examples.  The special <code class="docutils literal notranslate"><span class="pre">timefmt=&quot;raw&quot;</span></code>
is used to report time as the raw value (floating point time as used in
python’s <code class="docutils literal notranslate"><span class="pre">time.time()</span></code>).
(default: <code class="docutils literal notranslate"><span class="pre">&quot;%Y-%m-%d</span> <span class="pre">%H:%M:%S&quot;,</span></code>)</p>
</dd>
<dt>until</dt><dd><p><em>str</em> :
include runs that started before this ISO8601 time
(default: <code class="docutils literal notranslate"><span class="pre">2100-12-31</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">**query</span></code></dt><dd><p><em>dict</em> :
Any additional keyword arguments will be passed to
the databroker to refine the search for matching runs
using the <code class="docutils literal notranslate"><span class="pre">mongoquery</span></code> package.</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>object:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">pd.DataFrame()</span></code> object</p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TODO</span>
</pre></div>
</div>
<p>(new in release 1.5.0)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.list_runs.summarize_runs">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.list_runs.</span></span><span class="sig-name descname"><span class="pre">summarize_runs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">since</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/list_runs.html#summarize_runs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.list_runs.summarize_runs" title="Permalink to this definition">#</a></dt>
<dd><p>Report bluesky run metrics from the databroker.</p>
<ul class="simple">
<li><p>How many different plans?</p></li>
<li><p>How many runs?</p></li>
<li><p>How many times each run was used?</p></li>
<li><p>How frequently?  (TODO:)</p></li>
</ul>
<p>PARAMETERS</p>
<dl class="simple">
<dt>since</dt><dd><p><em>str</em> :
Report all runs since this ISO8601 date &amp; time
(default: <code class="docutils literal notranslate"><span class="pre">1995</span></code>)</p>
</dd>
<dt>db</dt><dd><p><em>object</em> :
Instance of <code class="docutils literal notranslate"><span class="pre">databroker.Broker()</span></code>
(default: <code class="docutils literal notranslate"><span class="pre">db</span></code> from the IPython shell)</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-apstools.utils.log_utils"></span><section id="support-for-logging">
<h3>Support for logging<a class="headerlink" href="#support-for-logging" title="Permalink to this heading">#</a></h3>
<p>There is a guide describing <a class="reference internal" href="../examples/ho_session_logs.html#howto-session-logs"><span class="std std-ref">How to setup logging</span></a>.</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.log_utils.file_log_handler" title="apstools.utils.log_utils.file_log_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_log_handler</span></code></a>(file_name_base[, maxBytes, ...])</p></td>
<td><p>Record logging output to a file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.log_utils.get_log_path" title="apstools.utils.log_utils.get_log_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_log_path</span></code></a>()</p></td>
<td><p>Return a path to <cite>./.logs</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.log_utils.setup_IPython_console_logging" title="apstools.utils.log_utils.setup_IPython_console_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_IPython_console_logging</span></code></a>([logger, ...])</p></td>
<td><p>Record all input (<code class="docutils literal notranslate"><span class="pre">In</span></code>) and output (<code class="docutils literal notranslate"><span class="pre">Out</span></code>) from IPython console.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.log_utils.stream_log_handler" title="apstools.utils.log_utils.stream_log_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stream_log_handler</span></code></a>([formatter, level])</p></td>
<td><p>Record logging output to a stream (such as the console).</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.log_utils.file_log_handler">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">file_log_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name_base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxBytes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backupCount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/log_utils.html#file_log_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.log_utils.file_log_handler" title="Permalink to this definition">#</a></dt>
<dd><p>Record logging output to a file.</p>
<p>PARAMETERS</p>
<dl>
<dt>file_name_base<span class="classifier"><em>str</em></span></dt><dd><p>Part of the name to store the log file. Full name is
<code class="docutils literal notranslate"><span class="pre">f&quot;&lt;log_path&gt;/{file_name_base}.log&quot;</span></code> in present working directory.</p>
</dd>
<dt>log_path<span class="classifier"><em>str</em></span></dt><dd><p>Part of the name to store the log file. Full name is
<code class="docutils literal notranslate"><span class="pre">f&quot;&lt;log_path&gt;/{file_name_base}.log&quot;</span></code> in present working directory.
default: (the present working directory)/LOG_DIR_BASE</p>
</dd>
<dt>level<span class="classifier"><em>int</em></span></dt><dd><p>Threshold for reporting messages with this logger. Logging messages
which are less severe than <code class="docutils literal notranslate"><span class="pre">level</span></code> will be ignored.
default: 10 (<code class="docutils literal notranslate"><span class="pre">logging.DEBUG</span></code> or <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>)
see: <a class="reference external" href="https://docs.python.org/3/library/logging.html#levels">https://docs.python.org/3/library/logging.html#levels</a></p>
</dd>
<dt>maxBytes<span class="classifier">(optional) <em>int</em></span></dt><dd><p>Log file <em>rollover</em> begins whenever the current log file is nearly
<em>maxBytes</em> in length.  A new file is written when the current line will
push the current file beyond this limit.
default: 0</p>
</dd>
<dt>backupCount<span class="classifier">(optional) <em>int</em></span></dt><dd><p>When <em>backupCount</em> is non-zero, the system will keep up to <em>backupCount</em>
numbered log files (with added extensions <cite>.1</cite>, ‘.2`, …).  The current
log file always has no numbered extension.  The previous log file is the
one with the lowest extension number.
default: 0</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When either <code class="docutils literal notranslate"><span class="pre">maxBytes</span></code> or <code class="docutils literal notranslate"><span class="pre">backupCount</span></code> are zero,
log file rollover never occurs, so you generally want to set
<code class="docutils literal notranslate"><span class="pre">backupCount</span></code> to at least 1, and have a non-zero <code class="docutils literal notranslate"><span class="pre">maxBytes</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.log_utils.get_log_path">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">get_log_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/log_utils.html#get_log_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.log_utils.get_log_path" title="Permalink to this definition">#</a></dt>
<dd><p>Return a path to <cite>./.logs</cite>. Create directory if it does not exist.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.log_utils.setup_IPython_console_logging">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">setup_IPython_console_logging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ipython_console.log'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/log_utils.html#setup_IPython_console_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.log_utils.setup_IPython_console_logging" title="Permalink to this definition">#</a></dt>
<dd><p>Record all input (<code class="docutils literal notranslate"><span class="pre">In</span></code>) and output (<code class="docutils literal notranslate"><span class="pre">Out</span></code>) from IPython console.</p>
<p>PARAMETERS</p>
<dl>
<dt>logger</dt><dd><p><em>object</em>:
Instance of <code class="docutils literal notranslate"><span class="pre">logging.Logger</span></code>.</p>
</dd>
<dt>filename</dt><dd><p><em>str</em>:
Name of the log file.
(default: <code class="docutils literal notranslate"><span class="pre">ipython_console.log</span></code>)</p>
</dd>
<dt>log_path<span class="classifier"><em>str</em></span></dt><dd><p>Directory to store the log file. Full name is
<code class="docutils literal notranslate"><span class="pre">f&quot;&lt;log_path&gt;/{file_name_base}.log&quot;</span></code>.
default: (the present working directory)/LOG_DIR_BASE</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.log_utils.stream_log_handler">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">stream_log_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formatter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'INFO'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/log_utils.html#stream_log_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.log_utils.stream_log_handler" title="Permalink to this definition">#</a></dt>
<dd><p>Record logging output to a stream (such as the console).</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>formatter</dt><dd><p><em>object</em>:
Instance of <code class="docutils literal notranslate"><span class="pre">logging.Formatter</span></code>.</p>
</dd>
<dt>level</dt><dd><p><em>str</em>:
Name of the logging level to report.
(default: <code class="docutils literal notranslate"><span class="pre">INFO</span></code>)</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-apstools.utils.memory"></span><section id="diagnostic-support-for-memory">
<h3>Diagnostic Support for Memory<a class="headerlink" href="#diagnostic-support-for-memory" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.memory.rss_mem" title="apstools.utils.memory.rss_mem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rss_mem</span></code></a>()</p></td>
<td><p>return memory used by this process</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.memory.rss_mem">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.memory.</span></span><span class="sig-name descname"><span class="pre">rss_mem</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/memory.html#rss_mem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.memory.rss_mem" title="Permalink to this definition">#</a></dt>
<dd><p>return memory used by this process</p>
</dd></dl>

<span class="target" id="module-apstools.utils.misc"></span><section id="miscellaneous-support">
<h3>Miscellaneous Support<a class="headerlink" href="#miscellaneous-support" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.cleanupText" title="apstools.utils.misc.cleanupText"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanupText</span></code></a>(text)</p></td>
<td><p>convert text so it can be used as a dictionary key</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.connect_pvlist" title="apstools.utils.misc.connect_pvlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_pvlist</span></code></a>(pvlist[, wait, timeout, ...])</p></td>
<td><p>Given list of EPICS PV names, return dict of EpicsSignal objects.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.count_child_devices_and_signals" title="apstools.utils.misc.count_child_devices_and_signals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count_child_devices_and_signals</span></code></a>(device)</p></td>
<td><p>Dict with number of children of this device.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.dictionary_table" title="apstools.utils.misc.dictionary_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dictionary_table</span></code></a>(dictionary, **kwargs)</p></td>
<td><p>Return a text table from <code class="docutils literal notranslate"><span class="pre">dictionary</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.full_dotted_name" title="apstools.utils.misc.full_dotted_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_dotted_name</span></code></a>(obj)</p></td>
<td><p>Return the full dotted name</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.itemizer" title="apstools.utils.misc.itemizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">itemizer</span></code></a>(fmt, items)</p></td>
<td><p>Format a list of items.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.listobjects" title="apstools.utils.misc.listobjects"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listobjects</span></code></a>([show_pv, printing, verbose, ...])</p></td>
<td><p>Show all the ophyd Signal and Device objects defined as globals.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.pairwise" title="apstools.utils.misc.pairwise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pairwise</span></code></a>(iterable)</p></td>
<td><p>break a list (or other iterable) into pairs</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.print_RE_md" title="apstools.utils.misc.print_RE_md"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_RE_md</span></code></a>([dictionary, fmt, printing])</p></td>
<td><p>custom print the RunEngine metadata in a table</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.redefine_motor_position" title="apstools.utils.misc.redefine_motor_position"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redefine_motor_position</span></code></a>(motor, new_position)</p></td>
<td><p>Set EPICS motor record's user coordinate to <code class="docutils literal notranslate"><span class="pre">new_position</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.replay" title="apstools.utils.misc.replay"><code class="xref py py-obj docutils literal notranslate"><span class="pre">replay</span></code></a>(headers[, callback, sort])</p></td>
<td><p>Replay the document stream from one (or more) scans (headers).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.run_in_thread" title="apstools.utils.misc.run_in_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_in_thread</span></code></a>(func)</p></td>
<td><p>(decorator) run <code class="docutils literal notranslate"><span class="pre">func</span></code> in thread</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.safe_ophyd_name" title="apstools.utils.misc.safe_ophyd_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">safe_ophyd_name</span></code></a>(text)</p></td>
<td><p>make text safe to be used as an ophyd object name</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.split_quoted_line" title="apstools.utils.misc.split_quoted_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">split_quoted_line</span></code></a>(line)</p></td>
<td><p>splits a line into words some of which might be quoted</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.text_encode" title="apstools.utils.misc.text_encode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">text_encode</span></code></a>(source)</p></td>
<td><p>Encode <code class="docutils literal notranslate"><span class="pre">source</span></code> using the default codepoint.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.to_unicode_or_bust" title="apstools.utils.misc.to_unicode_or_bust"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_unicode_or_bust</span></code></a>(obj[, encoding])</p></td>
<td><p>from: <a class="reference external" href="http://farmdev.com/talks/unicode/">http://farmdev.com/talks/unicode/</a>  .</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.misc.trim_string_for_EPICS" title="apstools.utils.misc.trim_string_for_EPICS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_string_for_EPICS</span></code></a>(msg)</p></td>
<td><p>String must not exceed EPICS PV length.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.misc.unix" title="apstools.utils.misc.unix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unix</span></code></a>(command[, raises])</p></td>
<td><p>Run a UNIX command, returns (stdout, stderr).</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.cleanupText">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">cleanupText</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#cleanupText"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.cleanupText" title="Permalink to this definition">#</a></dt>
<dd><p>convert text so it can be used as a dictionary key</p>
<p>Given some input text string, return a clean version
remove troublesome characters, perhaps other cleanup as well.
This is best done with regular expression pattern matching.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.connect_pvlist">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">connect_pvlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poll_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#connect_pvlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.connect_pvlist" title="Permalink to this definition">#</a></dt>
<dd><p>Given list of EPICS PV names, return dict of EpicsSignal objects.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>pvlist</dt><dd><p><em>[str]</em> :
list of EPICS PV names</p>
</dd>
<dt>wait</dt><dd><p><em>bool</em> :
should wait for EpicsSignal objects to connect
(default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
</dd>
<dt>timeout</dt><dd><p><em>float</em> :
maximum time to wait for PV connections, seconds
(default: 2.0)</p>
</dd>
<dt>poll_interval</dt><dd><p><em>float</em> :
time to sleep between checks for PV connections, seconds
(default: 0.1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.count_child_devices_and_signals">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">count_child_devices_and_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#count_child_devices_and_signals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.count_child_devices_and_signals" title="Permalink to this definition">#</a></dt>
<dd><p>Dict with number of children of this device.  Keys: Device and Signal.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.dictionary_table">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">dictionary_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictionary</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#dictionary_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.dictionary_table" title="Permalink to this definition">#</a></dt>
<dd><p>Return a text table from <code class="docutils literal notranslate"><span class="pre">dictionary</span></code>.</p>
<p>Dictionary keys in first column, values in second.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>dictionary</dt><dd><p><em>dict</em> :
Python dictionary</p>
</dd>
</dl>
<p>Note:  Keyword arguments parameters
are kept for compatibility with previous
versions of apstools.  They are ignored now.</p>
<p>RETURNS</p>
<dl class="simple">
<dt>table</dt><dd><p><em>object</em> or <code class="docutils literal notranslate"><span class="pre">None</span></code> :
<code class="docutils literal notranslate"><span class="pre">pyRestTable.Table()</span></code> object (multiline text table)
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if dictionary has no contents</p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">RE</span><span class="o">.</span><span class="n">md</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;login_id&#39;</span><span class="p">:</span> <span class="s1">&#39;jemian:wow.aps.anl.gov&#39;</span><span class="p">,</span> <span class="s1">&#39;beamline_id&#39;</span><span class="p">:</span> <span class="s1">&#39;developer&#39;</span><span class="p">,</span> <span class="s1">&#39;proposal_id&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">:</span> <span class="mi">19072</span><span class="p">,</span> <span class="s1">&#39;scan_id&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;bluesky&#39;</span><span class="p">:</span> <span class="s1">&#39;1.5.2&#39;</span><span class="p">,</span> <span class="s1">&#39;ophyd&#39;</span><span class="p">:</span> <span class="s1">&#39;1.3.3&#39;</span><span class="p">,</span> <span class="s1">&#39;apstools&#39;</span><span class="p">:</span> <span class="s1">&#39;1.1.5&#39;</span><span class="p">,</span> <span class="s1">&#39;epics&#39;</span><span class="p">:</span> <span class="s1">&#39;3.3.3&#39;</span><span class="p">}}</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">dictionary_table</span><span class="p">(</span><span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">))</span>
<span class="o">===========</span> <span class="o">=============================================================================</span>
<span class="n">key</span>         <span class="n">value</span>
<span class="o">===========</span> <span class="o">=============================================================================</span>
<span class="n">beamline_id</span> <span class="n">developer</span>
<span class="n">login_id</span>    <span class="n">jemian</span><span class="p">:</span><span class="n">wow</span><span class="o">.</span><span class="n">aps</span><span class="o">.</span><span class="n">anl</span><span class="o">.</span><span class="n">gov</span>
<span class="n">pid</span>         <span class="mi">19072</span>
<span class="n">proposal_id</span> <span class="kc">None</span>
<span class="n">scan_id</span>     <span class="mi">10</span>
<span class="n">version</span>     <span class="p">{</span><span class="s1">&#39;bluesky&#39;</span><span class="p">:</span> <span class="s1">&#39;1.5.2&#39;</span><span class="p">,</span> <span class="s1">&#39;ophyd&#39;</span><span class="p">:</span> <span class="s1">&#39;1.3.3&#39;</span><span class="p">,</span> <span class="s1">&#39;apstools&#39;</span><span class="p">:</span> <span class="s1">&#39;1.1.5&#39;</span><span class="p">,</span> <span class="s1">&#39;epics&#39;</span><span class="p">:</span> <span class="s1">&#39;3.3.3&#39;</span><span class="p">}</span>
<span class="o">===========</span> <span class="o">=============================================================================</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.full_dotted_name">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">full_dotted_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#full_dotted_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.full_dotted_name" title="Permalink to this definition">#</a></dt>
<dd><p>Return the full dotted name</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.dotted_name</span></code> property does not include the
name of the root object.  This routine adds that.</p>
<p>see: <a class="github reference external" href="https://github.com/bluesky/ophyd/pull/797">bluesky/ophyd#797</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.itemizer">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">itemizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#itemizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.itemizer" title="Permalink to this definition">#</a></dt>
<dd><p>Format a list of items.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.listobjects">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">listobjects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_pv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">child_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">child_signals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">TableStyle.pyRestTable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#listobjects"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.listobjects" title="Permalink to this definition">#</a></dt>
<dd><p>Show all the ophyd Signal and Device objects defined as globals.</p>
<p>PARAMETERS</p>
<dl>
<dt>show_pv</dt><dd><p><em>bool</em> :
If True, also show relevant EPICS PV, if available.
(default: True)</p>
</dd>
<dt>printing <em>bool</em> :</dt><dd><p>Deprecated.</p>
</dd>
<dt>verbose</dt><dd><p><em>bool</em> :
If True, also show <code class="docutils literal notranslate"><span class="pre">str(obj</span></code>.
(default: False)</p>
</dd>
<dt>symbols</dt><dd><p><em>dict</em> :
If None, use global symbol table.
If not None, use provided dictionary.
(default: <code class="docutils literal notranslate"><span class="pre">globals()</span></code>)</p>
</dd>
<dt>child_devices</dt><dd><p><em>bool</em> :
If True, also show how many Devices are children of this device.
(default: False)</p>
</dd>
<dt>child_signals</dt><dd><p><em>bool</em> :
If True, also show how many Signals are children of this device.
(default: False)</p>
</dd>
<dt>table_style <em>object</em> :</dt><dd><p>Either <code class="docutils literal notranslate"><span class="pre">apstools.utils.TableStyle.pandas</span></code> (default) or
using values from <code class="xref py py-class docutils literal notranslate"><span class="pre">apstools.utils.TableStyle</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> wll truncate long text
to at most 50 characters.</p>
</div>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>object:</dt><dd><p>Instance of <code class="docutils literal notranslate"><span class="pre">pyRestTable.Table()</span></code></p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">listobjects</span><span class="p">()</span>
<span class="o">========</span> <span class="o">================================</span> <span class="o">=============</span>
<span class="n">name</span>     <span class="n">ophyd</span> <span class="n">structure</span>                  <span class="n">EPICS</span> <span class="n">PV</span>
<span class="o">========</span> <span class="o">================================</span> <span class="o">=============</span>
<span class="n">adsimdet</span> <span class="n">MySingleTriggerSimDetector</span>       <span class="n">vm7SIM1</span><span class="p">:</span>
<span class="n">m1</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m1</span>
<span class="n">m2</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m2</span>
<span class="n">m3</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m3</span>
<span class="n">m4</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m4</span>
<span class="n">m5</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m5</span>
<span class="n">m6</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m6</span>
<span class="n">m7</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m7</span>
<span class="n">m8</span>       <span class="n">EpicsMotor</span>                       <span class="n">vm7</span><span class="p">:</span><span class="n">m8</span>
<span class="n">noisy</span>    <span class="n">EpicsSignalRO</span>                    <span class="n">vm7</span><span class="p">:</span><span class="n">userCalc1</span>
<span class="n">scaler</span>   <span class="n">ScalerCH</span>                         <span class="n">vm7</span><span class="p">:</span><span class="n">scaler1</span>
<span class="n">shutter</span>  <span class="n">SimulatedApsPssShutterWithStatus</span>
<span class="o">========</span> <span class="o">================================</span> <span class="o">=============</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">pyRestTable</span><span class="o">.</span><span class="n">rest_table</span><span class="o">.</span><span class="n">Table</span> <span class="n">at</span> <span class="mh">0x7fa4398c7cf8</span><span class="o">&gt;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
</pre></div>
</div>
<p>(new in apstools release 1.1.8)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.pairwise">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">pairwise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#pairwise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.pairwise" title="Permalink to this definition">#</a></dt>
<dd><p>break a list (or other iterable) into pairs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">s0</span><span class="p">,</span> <span class="n">s1</span><span class="p">),</span> <span class="p">(</span><span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">),</span> <span class="p">(</span><span class="n">s4</span><span class="p">,</span> <span class="n">s5</span><span class="p">),</span> <span class="o">...</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">71</span><span class="p">]:</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">pairwise</span><span class="p">(</span><span class="s2">&quot;a b c d e fg&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()):</span>
    <span class="o">...</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="o">...</span><span class="p">:</span>
<span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;fg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.print_RE_md">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">print_RE_md</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictionary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'simple'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#print_RE_md"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.print_RE_md" title="Permalink to this definition">#</a></dt>
<dd><p>custom print the RunEngine metadata in a table</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>dictionary</dt><dd><p><em>dict</em> :
Python dictionary</p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">print_RE_md</span><span class="p">()</span>
<span class="n">RunEngine</span> <span class="n">metadata</span> <span class="n">dictionary</span><span class="p">:</span>
<span class="o">========================</span> <span class="o">===================================</span>
<span class="n">key</span>                      <span class="n">value</span>
<span class="o">========================</span> <span class="o">===================================</span>
<span class="n">EPICS_CA_MAX_ARRAY_BYTES</span> <span class="mi">1280000</span>
<span class="n">EPICS_HOST_ARCH</span>          <span class="n">linux</span><span class="o">-</span><span class="n">x86_64</span>
<span class="n">beamline_id</span>              <span class="n">APS</span> <span class="n">USAXS</span> <span class="mi">9</span><span class="o">-</span><span class="n">ID</span><span class="o">-</span><span class="n">C</span>
<span class="n">login_id</span>                 <span class="n">usaxs</span><span class="p">:</span><span class="n">usaxscontrol</span><span class="o">.</span><span class="n">xray</span><span class="o">.</span><span class="n">aps</span><span class="o">.</span><span class="n">anl</span><span class="o">.</span><span class="n">gov</span>
<span class="n">pid</span>                      <span class="mi">67933</span>
<span class="n">proposal_id</span>              <span class="n">testing</span> <span class="n">Bluesky</span> <span class="n">installation</span>
<span class="n">scan_id</span>                  <span class="mi">0</span>
<span class="n">versions</span>                 <span class="o">========</span> <span class="o">=====</span>
                         <span class="n">key</span>      <span class="n">value</span>
                         <span class="o">========</span> <span class="o">=====</span>
                         <span class="n">apstools</span> <span class="mf">1.1.3</span>
                         <span class="n">bluesky</span>  <span class="mf">1.5.2</span>
                         <span class="n">epics</span>    <span class="mf">3.3.1</span>
                         <span class="n">ophyd</span>    <span class="mf">1.3.3</span>
                         <span class="o">========</span> <span class="o">=====</span>
<span class="o">========================</span> <span class="o">===================================</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.redefine_motor_position">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">redefine_motor_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_position</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#redefine_motor_position"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.redefine_motor_position" title="Permalink to this definition">#</a></dt>
<dd><p>Set EPICS motor record’s user coordinate to <code class="docutils literal notranslate"><span class="pre">new_position</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.replay">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">replay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#replay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.replay" title="Permalink to this definition">#</a></dt>
<dd><p>Replay the document stream from one (or more) scans (headers).</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>headers</dt><dd><p><em>run</em> or <em>[run]</em> :
Run(s) to be replayed through callback. A <em>run</em> is an instance of a
Bluesky <code class="docutils literal notranslate"><span class="pre">databroker.core.BlueskyRun</span></code> (or the older
<code class="docutils literal notranslate"><span class="pre">databroker.Header</span></code>).
see: <a class="reference external" href="https://nsls-ii.github.io/databroker/api.html?highlight=header#header-api">https://nsls-ii.github.io/databroker/api.html?highlight=header#header-api</a></p>
</dd>
<dt>callback</dt><dd><p><em>run</em> or <em>[run]</em> :
The Bluesky callback to handle the stream of documents from a run. If
<code class="docutils literal notranslate"><span class="pre">None</span></code>, then use the <cite>bec</cite> (BestEffortCallback) from the IPython
shell.
(default:<code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
</dd>
<dt>sort</dt><dd><p><em>bool</em> :
Sort the headers chronologically if True.
(default:<code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
</dd>
</dl>
<p>(new in apstools release 1.1.11)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.run_in_thread">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">run_in_thread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#run_in_thread"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.run_in_thread" title="Permalink to this definition">#</a></dt>
<dd><p>(decorator) run <code class="docutils literal notranslate"><span class="pre">func</span></code> in thread</p>
<p>USAGE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@run_in_thread</span>
<span class="k">def</span> <span class="nf">progress_reporting</span><span class="p">():</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;progress_reporting is starting&quot;</span><span class="p">)</span>
    <span class="c1"># ...</span>

<span class="c1">#...</span>
<span class="n">progress_reporting</span><span class="p">()</span>   <span class="c1"># runs in separate thread</span>
<span class="c1">#...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.safe_ophyd_name">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">safe_ophyd_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#safe_ophyd_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.safe_ophyd_name" title="Permalink to this definition">#</a></dt>
<dd><p>make text safe to be used as an ophyd object name</p>
<p>Given some input text string, return a clean version.
Remove troublesome characters, perhaps other cleanup as well.
This is best done with regular expression pattern matching.</p>
<p>The “sanitized” name fits this regular expression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">A</span><span class="o">-</span><span class="n">Za</span><span class="o">-</span><span class="n">z_</span><span class="p">][</span>\<span class="n">w_</span><span class="p">]</span><span class="o">*</span>
</pre></div>
</div>
<p>Also can be used for safe HDF5 and NeXus names.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.split_quoted_line">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">split_quoted_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#split_quoted_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.split_quoted_line" title="Permalink to this definition">#</a></dt>
<dd><p>splits a line into words some of which might be quoted</p>
<p>TESTS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FlyScan</span> <span class="mi">0</span>   <span class="mi">0</span>   <span class="mi">0</span>   <span class="n">blank</span>
<span class="n">FlyScan</span> <span class="mi">5</span>   <span class="mi">2</span>   <span class="mi">0</span>   <span class="s2">&quot;empty container&quot;</span>
<span class="n">FlyScan</span> <span class="mi">5</span>   <span class="mi">12</span>   <span class="mi">0</span>   <span class="s2">&quot;even longer name&quot;</span>
<span class="n">SAXS</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="n">blank</span>
<span class="n">SAXS</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="s2">&quot;blank&quot;</span>
</pre></div>
</div>
<p>RESULTS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;FlyScan&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;FlyScan&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;empty container&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;FlyScan&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;12&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;even longer name&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;SAXS&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;SAXS&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.text_encode">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">text_encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#text_encode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.text_encode" title="Permalink to this definition">#</a></dt>
<dd><p>Encode <code class="docutils literal notranslate"><span class="pre">source</span></code> using the default codepoint.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.to_unicode_or_bust">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">to_unicode_or_bust</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#to_unicode_or_bust"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.to_unicode_or_bust" title="Permalink to this definition">#</a></dt>
<dd><p>from: <a class="reference external" href="http://farmdev.com/talks/unicode/">http://farmdev.com/talks/unicode/</a>  .</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.trim_string_for_EPICS">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">trim_string_for_EPICS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#trim_string_for_EPICS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.trim_string_for_EPICS" title="Permalink to this definition">#</a></dt>
<dd><p>String must not exceed EPICS PV length.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.misc.unix">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.misc.</span></span><span class="sig-name descname"><span class="pre">unix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raises</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/misc.html#unix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.misc.unix" title="Permalink to this definition">#</a></dt>
<dd><p>Run a UNIX command, returns (stdout, stderr).</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>command</dt><dd><p><em>str</em> :
UNIX command to be executed</p>
</dd>
<dt>raises</dt><dd><p><em>bool</em> :
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, will raise exceptions as needed,
default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-apstools.utils.override_parameters"></span><section id="overrideparameters">
<h3>OverrideParameters<a class="headerlink" href="#overrideparameters" title="Permalink to this heading">#</a></h3>
<p>Define parameters that can be overridden from a user configuration file.</p>
<p>EXAMPLE:</p>
<p>Create an <code class="docutils literal notranslate"><span class="pre">overrides</span></code> object in a new file <code class="docutils literal notranslate"><span class="pre">override_params.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">apstools.utils</span>
<span class="n">overrides</span> <span class="o">=</span> <span class="n">apstools</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">OverrideParameters</span><span class="p">()</span>
</pre></div>
</div>
<p>When code supports a parameter for which a user can provide
a local override, the code should import the <code class="docutils literal notranslate"><span class="pre">overrides</span></code>
object (from the <code class="docutils literal notranslate"><span class="pre">override_params</span></code> module),
and then register the parameter name, such as this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">override_params</span> <span class="kn">import</span> <span class="n">overrides</span>
<span class="n">overrides</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s2">&quot;minimum_step&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then later:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">minstep</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pick</span><span class="p">(</span><span class="s2">&quot;minimum_step&quot;</span><span class="p">,</span> <span class="mf">45e-6</span><span class="p">)</span>
</pre></div>
</div>
<p>In the user’s configuration file that will override
the value of <code class="docutils literal notranslate"><span class="pre">45e-6</span></code> (such as can be loaded via
<code class="docutils literal notranslate"><span class="pre">%run</span> <span class="pre">-i</span> <span class="pre">user.py</span></code>), import the <cite>overrides`</cite>
object (from the <code class="docutils literal notranslate"><span class="pre">override_params</span></code> module):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">override_params</span> <span class="kn">import</span> <span class="n">overrides</span>
</pre></div>
</div>
<p>and then override the attribute(s) as desired:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">overrides</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;minimum_step&quot;</span><span class="p">,</span> <span class="mf">1.0e-5</span><span class="p">)</span>
</pre></div>
</div>
<p>With this override in place, the <code class="docutils literal notranslate"><span class="pre">minstep</span></code> value
(from <code class="xref py py-meth docutils literal notranslate"><span class="pre">pick()</span></code>)
will be <code class="docutils literal notranslate"><span class="pre">1e-5</span></code>.</p>
<p>Get a pandas DataFrame object with all the overrides:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">overrides</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<p>which returns this table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">parameter</span>    <span class="n">value</span>
<span class="mi">0</span>  <span class="n">minimum_step</span>  <span class="mf">0.00001</span>
</pre></div>
</div>
<hr class="docutils" />
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters" title="apstools.utils.override_parameters.OverrideParameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OverrideParameters</span></code></a>()</p></td>
<td><p>Define parameters that can be overridden from a user configuration file.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.override_parameters.</span></span><span class="sig-name descname"><span class="pre">OverrideParameters</span></span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters" title="Permalink to this definition">#</a></dt>
<dd><p>Define parameters that can be overridden from a user configuration file.</p>
<p>NOTE: This is a pure Python object, not using ophyd.</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.pick" title="apstools.utils.override_parameters.OverrideParameters.pick"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pick</span></code></a>(parameter, default)</p></td>
<td><p>Return either the override parameter value if defined, or the default.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.register" title="apstools.utils.override_parameters.OverrideParameters.register"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register</span></code></a>(parameter_name)</p></td>
<td><p>Register a new parameter name to be supported by user overrides.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.reset" title="apstools.utils.override_parameters.OverrideParameters.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>(parameter_name)</p></td>
<td><p>Remove an override value for a known parameter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.reset_all" title="apstools.utils.override_parameters.OverrideParameters.reset_all"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset_all</span></code></a>()</p></td>
<td><p>Remove override values for all known parameters.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.set" title="apstools.utils.override_parameters.OverrideParameters.set"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set</span></code></a>(parameter_name, value)</p></td>
<td><p>Define an override value for a known parameter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.override_parameters.OverrideParameters.summary" title="apstools.utils.override_parameters.OverrideParameters.summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summary</span></code></a>()</p></td>
<td><p>Return a pandas DataFrame with all overrides.</p></td>
</tr>
</tbody>
</table>
<p>(new in apstools 1.5.2)</p>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.pick">
<span class="sig-name descname"><span class="pre">pick</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.pick"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.pick" title="Permalink to this definition">#</a></dt>
<dd><p>Return either the override parameter value if defined, or the default.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.register">
<span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.register" title="Permalink to this definition">#</a></dt>
<dd><p>Register a new parameter name to be supported by user overrides.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.reset" title="Permalink to this definition">#</a></dt>
<dd><p>Remove an override value for a known parameter.  (sets it to undefined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.reset_all">
<span class="sig-name descname"><span class="pre">reset_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.reset_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.reset_all" title="Permalink to this definition">#</a></dt>
<dd><p>Remove override values for all known parameters. (sets all to undefined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.set" title="Permalink to this definition">#</a></dt>
<dd><p>Define an override value for a known parameter.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.override_parameters.OverrideParameters.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/override_parameters.html#OverrideParameters.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.override_parameters.OverrideParameters.summary" title="Permalink to this definition">#</a></dt>
<dd><p>Return a pandas DataFrame with all overrides.</p>
<p>Parameter names that have no override value will be reported
as <code class="docutils literal notranslate"><span class="pre">--undefined--</span></code>.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-apstools.utils.plot"></span><section id="plot-support">
<h3>Plot Support<a class="headerlink" href="#plot-support" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.plotxy" title="apstools.utils.plot.plotxy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotxy</span></code></a>(runs, xname, yname[, append, cat, ...])</p></td>
<td><p>Plot y vs x from a bluesky run.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.select_mpl_figure" title="apstools.utils.plot.select_mpl_figure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_mpl_figure</span></code></a>(x, y)</p></td>
<td><p>Get the MatPlotLib Figure window for y vs x.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.select_live_plot" title="apstools.utils.plot.select_live_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_live_plot</span></code></a>(bec, signal)</p></td>
<td><p>Get the <em>first</em> live plot that matches <code class="docutils literal notranslate"><span class="pre">signal</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_lines" title="apstools.utils.plot.trim_plot_lines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_lines</span></code></a>(bec, n, x, y)</p></td>
<td><p>Find the plot with axes x and y and replot with at most the last <em>n</em> lines.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.plot.trim_plot_by_name" title="apstools.utils.plot.trim_plot_by_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trim_plot_by_name</span></code></a>([n, plots])</p></td>
<td><p>Find the plot(s) by name and replot with at most the last <em>n</em> lines.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.plotxy">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">plotxy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">runs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'primary'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#plotxy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.plotxy" title="Permalink to this definition">#</a></dt>
<dd><p>Plot y vs x from a bluesky run.</p>
<p>Note: This is not a bluesky plan.  Call it as a normal Python function.</p>
<p>PARAMETERS</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">runs</span></code><span class="classifier"><em>[run]</em> or <em>run</em>:</span></dt><dd><p>List or runs or single <code class="docutils literal notranslate"><span class="pre">run</span></code>.  A <code class="docutils literal notranslate"><span class="pre">run</span></code> is either a
<code class="docutils literal notranslate"><span class="pre">bluesky.core.BlueskyRun</span></code> object or a reference (uid, scan_id,
relative to most recent) to a BlueskyRun in the catalog.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xname</span></code><span class="classifier"><em>str</em>:</span></dt><dd><p>Name of the signal to plot on the <strong>x</strong> axis.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">yname</span></code><span class="classifier"><em>str</em>:</span></dt><dd><p>Name of the signal to plot on the <strong>y</strong> axis.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">append</span></code><span class="classifier"><em>bool</em>:</span></dt><dd><p>(optional) If <code class="docutils literal notranslate"><span class="pre">True</span></code>, append to existing plot window.
Default: <code class="docutils literal notranslate"><span class="pre">append=False</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cat</span></code><span class="classifier"><em>object</em>:</span></dt><dd><p>(optional) Catalog to be used for finding a run by reference.
Default: return value from <code class="docutils literal notranslate"><span class="pre">apstools.utils.getCatalog()</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stats</span></code><span class="classifier"><em>bool</em>:</span></dt><dd><p>(optional) If <code class="docutils literal notranslate"><span class="pre">True</span></code>, compute and plot centroid and FWHM
(computed from sigma).
Default: <code class="docutils literal notranslate"><span class="pre">stats=True</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stream</span></code><span class="classifier"><em>str</em>:</span></dt><dd><p>(optional) Name of the data stream in which to find “xname”
and “yname”.
Default: <code class="docutils literal notranslate"><span class="pre">stream=&quot;primary&quot;</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code><span class="classifier"><em>str</em>:</span></dt><dd><p>(optional) Title to show on this plot.
Default: Metadata “title” keyword of first run (if found)
or scan_id and starting date/time of first run.</p>
</dd>
</dl>
<p>RETURNS</p>
<p>Returns a <em>dict</em> of statistics for each run indexed by <code class="docutils literal notranslate"><span class="pre">scan_id</span></code>,
if <code class="docutils literal notranslate"><span class="pre">stats=True</span></code>, else <code class="docutils literal notranslate"><span class="pre">None</span></code>.  A computed <code class="docutils literal notranslate"><span class="pre">fwhm</span></code> key is added
to the statistics.</p>
<p>New in release 1.6.10.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.select_live_plot">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">select_live_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#select_live_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.select_live_plot" title="Permalink to this definition">#</a></dt>
<dd><p>Get the <em>first</em> live plot that matches <code class="docutils literal notranslate"><span class="pre">signal</span></code>.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>bec</dt><dd><p><em>object</em>:
instance of <code class="docutils literal notranslate"><span class="pre">bluesky.callbacks.best_effort.BestEffortCallback</span></code></p>
</dd>
<dt>signal</dt><dd><p><em>object</em>:
The Y axis object (an <code class="docutils literal notranslate"><span class="pre">ophyd.Signal</span></code>)</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt><em>object</em>:</dt><dd><p>Instance of <code class="docutils literal notranslate"><span class="pre">bluesky.callbacks.best_effort.LivePlotPlusPeaks()</span></code>
or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.select_mpl_figure">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">select_mpl_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#select_mpl_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.select_mpl_figure" title="Permalink to this definition">#</a></dt>
<dd><p>Get the MatPlotLib Figure window for y vs x.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>x</dt><dd><p><em>object</em>:
X axis object (an <code class="docutils literal notranslate"><span class="pre">ophyd.Signal</span></code>)</p>
</dd>
<dt>y</dt><dd><p>ophyd object:
X axis object (an <code class="docutils literal notranslate"><span class="pre">ophyd.Signal</span></code>)</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>object or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Instance of <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot.Figure()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.trim_plot_by_name">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">trim_plot_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#trim_plot_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.trim_plot_by_name" title="Permalink to this definition">#</a></dt>
<dd><p>Find the plot(s) by name and replot with at most the last <em>n</em> lines.</p>
<p>Note: this is not a bluesky plan.  Call it as normal Python function.</p>
<p>It is recommended to call <a class="reference internal" href="#apstools.utils.plot.trim_plot_by_name" title="apstools.utils.plot.trim_plot_by_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">trim_plot_by_name()</span></code></a> <em>before</em> the
scan(s) that generate plots.  Plots are generated from a RunEngine
callback, executed <em>after</em> the scan completes.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>n</dt><dd><p><em>int</em> :
number of plots to keep</p>
</dd>
<dt>plots</dt><dd><p><em>str</em>, [<em>str</em>], or <em>None</em> :
name(s) of plot windows to trim
(default: all plot windows)</p>
</dd>
</dl>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trim_plot_by_name</span><span class="p">()</span>   <span class="c1"># default of n=3, apply to all plots</span>
<span class="n">trim_plot_by_name</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># change from default of n=3</span>
<span class="n">trim_plot_by_name</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;noisy_det vs motor&quot;</span><span class="p">)</span>  <span class="c1"># just this plot</span>
<span class="n">trim_plot_by_name</span><span class="p">(</span>
    <span class="mi">5</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;noisy_det vs motor&quot;</span><span class="p">,</span> <span class="s2">&quot;det noisy_det vs motor&quot;</span><span class="p">]]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># use simulators from ophyd</span>
<span class="kn">from</span> <span class="nn">bluesky</span> <span class="kn">import</span> <span class="n">plans</span> <span class="k">as</span> <span class="n">bp</span>
<span class="kn">from</span> <span class="nn">bluesky</span> <span class="kn">import</span> <span class="n">plan_stubs</span> <span class="k">as</span> <span class="n">bps</span>
<span class="kn">from</span> <span class="nn">ophyd.sim</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">snooze</span> <span class="o">=</span> <span class="mf">0.25</span>

<span class="k">def</span> <span class="nf">scan_set</span><span class="p">():</span>
    <span class="n">trim_plot_by_name</span><span class="p">()</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">],</span> <span class="n">motor</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">,</span> <span class="n">det</span><span class="p">],</span> <span class="n">motor</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">motor2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bps</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">snooze</span><span class="p">)</span>

<span class="c1"># repeat the_scans 15 times</span>
<span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span><span class="n">bps</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">scan_set</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
</pre></div>
</div>
<p>(new in release 1.3.5)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.plot.trim_plot_lines">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.plot.</span></span><span class="sig-name descname"><span class="pre">trim_plot_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/plot.html#trim_plot_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.plot.trim_plot_lines" title="Permalink to this definition">#</a></dt>
<dd><p>Find the plot with axes x and y and replot with at most the last <em>n</em> lines.</p>
<p>Note: <a class="reference internal" href="#apstools.utils.plot.trim_plot_lines" title="apstools.utils.plot.trim_plot_lines"><code class="xref py py-func docutils literal notranslate"><span class="pre">trim_plot_lines()</span></code></a> is not a bluesky plan.  Call it as
normal Python function.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trim_plot_lines</span><span class="p">(</span><span class="n">bec</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">m1</span><span class="p">,</span> <span class="n">noisy</span><span class="p">)</span>
</pre></div>
</div>
<p>PARAMETERS</p>
<dl class="simple">
<dt>bec</dt><dd><p><em>object</em> :
instance of BestEffortCallback</p>
</dd>
<dt>n</dt><dd><p><em>int</em> :
number of plots to keep</p>
</dd>
<dt>x</dt><dd><p><em>object</em> :
instance of ophyd.Signal (or subclass),
independent (x) axis</p>
</dd>
<dt>y</dt><dd><p><em>object</em> :
instance of ophyd.Signal (or subclass),
dependent (y) axis</p>
</dd>
</dl>
<p>(new in release 1.3.5)</p>
</dd></dl>

<span class="target" id="module-apstools.utils.profile_support"></span><section id="support-for-ipython-profiles">
<h3>Support for IPython profiles<a class="headerlink" href="#support-for-ipython-profiles" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.profile_support.getDefaultNamespace" title="apstools.utils.profile_support.getDefaultNamespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultNamespace</span></code></a>([attr])</p></td>
<td><p>get the IPython shell's namespace dictionary (or globals() if not found)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.profile_support.ipython_profile_name" title="apstools.utils.profile_support.ipython_profile_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ipython_profile_name</span></code></a>()</p></td>
<td><p>return the name of the current ipython profile or <code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.profile_support.ipython_shell_namespace" title="apstools.utils.profile_support.ipython_shell_namespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ipython_shell_namespace</span></code></a>()</p></td>
<td><p>get the IPython shell's namespace dictionary (or empty if not found)</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.profile_support.getDefaultNamespace">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.profile_support.</span></span><span class="sig-name descname"><span class="pre">getDefaultNamespace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user_ns'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/profile_support.html#getDefaultNamespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.profile_support.getDefaultNamespace" title="Permalink to this definition">#</a></dt>
<dd><p>get the IPython shell’s namespace dictionary (or globals() if not found)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.profile_support.ipython_profile_name">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.profile_support.</span></span><span class="sig-name descname"><span class="pre">ipython_profile_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/profile_support.html#ipython_profile_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.profile_support.ipython_profile_name" title="Permalink to this definition">#</a></dt>
<dd><p>return the name of the current ipython profile or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Example (add to default RunEngine metadata):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;ipython_profile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ipython_profile_name</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;using profile: &quot;</span> <span class="o">+</span> <span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;ipython_profile&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.profile_support.ipython_shell_namespace">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.profile_support.</span></span><span class="sig-name descname"><span class="pre">ipython_shell_namespace</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/profile_support.html#ipython_shell_namespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.profile_support.ipython_shell_namespace" title="Permalink to this definition">#</a></dt>
<dd><p>get the IPython shell’s namespace dictionary (or empty if not found)</p>
</dd></dl>

<span class="target" id="module-apstools.utils.pvregistry"></span><section id="epics-pv-registry">
<h3>EPICS PV Registry<a class="headerlink" href="#epics-pv-registry" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbyname" title="apstools.utils.pvregistry.findbyname"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbyname</span></code></a>(oname[, force_rebuild, ns])</p></td>
<td><p>Find the ophyd (dotted name) object associated with the given ophyd name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.findbypv" title="apstools.utils.pvregistry.findbypv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findbypv</span></code></a>(pvname[, force_rebuild, ns])</p></td>
<td><p>Find all ophyd objects associated with the given EPICS PV.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.pvregistry.PVRegistry" title="apstools.utils.pvregistry.PVRegistry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PVRegistry</span></code></a>([ns])</p></td>
<td><p>Cross-reference EPICS PVs with ophyd EpicsSignalBase objects.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.PVRegistry">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.pvregistry.</span></span><span class="sig-name descname"><span class="pre">PVRegistry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#PVRegistry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.PVRegistry" title="Permalink to this definition">#</a></dt>
<dd><p>Cross-reference EPICS PVs with ophyd EpicsSignalBase objects.</p>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.PVRegistry.ophyd_search">
<span class="sig-name descname"><span class="pre">ophyd_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#PVRegistry.ophyd_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.PVRegistry.ophyd_search" title="Permalink to this definition">#</a></dt>
<dd><p>Search for ophyd object by ophyd name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.PVRegistry.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#PVRegistry.search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.PVRegistry.search" title="Permalink to this definition">#</a></dt>
<dd><p>Search for PV in both read &amp; write modes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.PVRegistry.search_by_mode">
<span class="sig-name descname"><span class="pre">search_by_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'R'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#PVRegistry.search_by_mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.PVRegistry.search_by_mode" title="Permalink to this definition">#</a></dt>
<dd><p>Search for PV in specified mode.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.findbyname">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.pvregistry.</span></span><span class="sig-name descname"><span class="pre">findbyname</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_rebuild</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#findbyname"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.findbyname" title="Permalink to this definition">#</a></dt>
<dd><p>Find the ophyd (dotted name) object associated with the given ophyd name.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>oname</dt><dd><p><em>str</em> :
ophyd name to search</p>
</dd>
<dt>force_rebuild</dt><dd><p><em>bool</em> :
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rebuild the internal registry that maps
ophyd names to ophyd objects.</p>
</dd>
<dt>ns</dt><dd><p><em>dict</em> or <cite>None</cite> :
Namespace dictionary of Python objects.</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>str or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Name of the ophyd object.</p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="n">findbyname</span><span class="p">(</span><span class="s2">&quot;adsimdet_cam_acquire&quot;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="s1">&#39;adsimdet.cam.acquire&#39;</span>
</pre></div>
</div>
<p>(new in apstools 1.5.0)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.pvregistry.findbypv">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.pvregistry.</span></span><span class="sig-name descname"><span class="pre">findbypv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_rebuild</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/pvregistry.html#findbypv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.pvregistry.findbypv" title="Permalink to this definition">#</a></dt>
<dd><p>Find all ophyd objects associated with the given EPICS PV.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>pvname</dt><dd><p><em>str</em> :
EPICS PV name to search</p>
</dd>
<dt>force_rebuild</dt><dd><p><em>bool</em> :
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rebuild the internal registry that maps
EPICS PV names to ophyd objects.</p>
</dd>
<dt>ns</dt><dd><p><em>dict</em> or <cite>None</cite> :
Namespace dictionary of Python objects.</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt>dict or <code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt><dd><p>Dictionary of matching ophyd objects, keyed by how the
PV is used by the ophyd signal.  The keys are
<code class="docutils literal notranslate"><span class="pre">read</span></code> and <code class="docutils literal notranslate"><span class="pre">write</span></code>.</p>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="n">findbypv</span><span class="p">(</span><span class="s2">&quot;ad:cam1:Acquire&quot;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;read&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;write&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;adsimdet.cam.acquire&#39;</span><span class="p">]}</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">46</span><span class="p">]:</span> <span class="n">findbypv</span><span class="p">(</span><span class="s2">&quot;ad:cam1:Acquire_RBV&quot;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">46</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;read&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;adsimdet.cam.acquire&#39;</span><span class="p">],</span> <span class="s1">&#39;write&#39;</span><span class="p">:</span> <span class="p">[]}</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="module-apstools.utils.query"></span><section id="searching-databroker-catalogs">
<h3>Searching databroker catalogs<a class="headerlink" href="#searching-databroker-catalogs" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.query.db_query" title="apstools.utils.query.db_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">db_query</span></code></a>(db, query)</p></td>
<td><p>Searches the databroker v2 database.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="apstools.utils.query.db_query">
<span class="sig-prename descclassname"><span class="pre">apstools.utils.query.</span></span><span class="sig-name descname"><span class="pre">db_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/query.html#db_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.query.db_query" title="Permalink to this definition">#</a></dt>
<dd><p>Searches the databroker v2 database.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>db</dt><dd><p><em>object</em> :
Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>.</p>
</dd>
<dt>query</dt><dd><p><em>dict</em> :
Search parameters.</p>
</dd>
</dl>
<p>RETURNS</p>
<dl class="simple">
<dt><em>object</em> :</dt><dd><p>Bluesky database, an instance of <code class="docutils literal notranslate"><span class="pre">databroker.catalog</span></code>
satisfying the <code class="docutils literal notranslate"><span class="pre">query</span></code> parameters.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">databroker.catalog.search()</span></code></p>
</div>
</dd></dl>

<span class="target" id="module-apstools.utils.slit_core"></span><p>Common support of slits</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.slit_core.SlitGeometry" title="apstools.utils.slit_core.SlitGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SlitGeometry</span></code></a>(width, height, x, y)</p></td>
<td><p>Slit size and center as a named tuple</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.slit_core.</span></span><span class="sig-name descname"><span class="pre">SlitGeometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry" title="Permalink to this definition">#</a></dt>
<dd><p>Slit size and center as a named tuple</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry.height">
<span class="sig-name descname"><span class="pre">height</span></span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry.height" title="Permalink to this definition">#</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry.width">
<span class="sig-name descname"><span class="pre">width</span></span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry.width" title="Permalink to this definition">#</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry.x">
<span class="sig-name descname"><span class="pre">x</span></span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry.x" title="Permalink to this definition">#</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="apstools.utils.slit_core.SlitGeometry.y">
<span class="sig-name descname"><span class="pre">y</span></span><a class="headerlink" href="#apstools.utils.slit_core.SlitGeometry.y" title="Permalink to this definition">#</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-apstools.utils.spreadsheet"></span><section id="spreadsheet-support">
<h3>Spreadsheet Support<a class="headerlink" href="#spreadsheet-support" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelDatabaseFileBase" title="apstools.utils.spreadsheet.ExcelDatabaseFileBase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelDatabaseFileBase</span></code></a>([ignore_extra])</p></td>
<td><p>base class: read-only support for Excel files, treat them like databases</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric" title="apstools.utils.spreadsheet.ExcelDatabaseFileGeneric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelDatabaseFileGeneric</span></code></a>(filename[, ...])</p></td>
<td><p>Generic (read-only) handling of Excel spreadsheet-as-database</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#apstools.utils.spreadsheet.ExcelReadError" title="apstools.utils.spreadsheet.ExcelReadError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExcelReadError</span></code></a>(*args, **kwargs)</p></td>
<td><p>Exception when reading Excel spreadsheet.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.spreadsheet.ExcelDatabaseFileBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.spreadsheet.</span></span><span class="sig-name descname"><span class="pre">ExcelDatabaseFileBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ignore_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/spreadsheet.html#ExcelDatabaseFileBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.spreadsheet.ExcelDatabaseFileBase" title="Permalink to this definition">#</a></dt>
<dd><p>base class: read-only support for Excel files, treat them like databases</p>
<p id="index-1">Use this class when creating new, specific spreadsheet support.</p>
<p>EXAMPLE</p>
<p>Show how to read an Excel file where one of the columns
contains a unique key.  This allows for random access to
each row of data by use of the <em>key</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExhibitorsDB</span><span class="p">(</span><span class="n">ExcelDatabaseFileBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    content for exhibitors from the Excel file</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">EXCEL_FILE</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;exhibitors.xlsx&quot;</span>
    <span class="n">LABELS_ROW</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">handle_single_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;any special handling for a row from the Excel file&#39;&#39;&#39;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">handleExcelRowEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;identify unique key (row of the Excel file)&#39;&#39;&#39;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.spreadsheet.ExcelDatabaseFileGeneric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.spreadsheet.</span></span><span class="sig-name descname"><span class="pre">ExcelDatabaseFileGeneric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels_row</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/spreadsheet.html#ExcelDatabaseFileGeneric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric" title="Permalink to this definition">#</a></dt>
<dd><p>Generic (read-only) handling of Excel spreadsheet-as-database</p>
<span class="target" id="index-2"></span><div class="admonition note" id="index-3">
<p class="admonition-title">Note</p>
<p>This is the class to use when reading Excel spreadsheets.</p>
</div>
<p>In the spreadsheet, the first sheet should contain the table to be
used. By default (see keyword parameter <code class="docutils literal notranslate"><span class="pre">labels_row</span></code>), the table
should start in cell A4.  The column labels are given in row 4.  A
blank column should appear to the right of the table (see keyword
parameter <code class="docutils literal notranslate"><span class="pre">ignore_extra</span></code>). The column labels will describe the
action and its parameters.  Additional columns may be added for
metadata or other purposes.</p>
<p>The rows below the column labels should contain actions and
parameters for those actions, one action per row.</p>
<p>To make a comment, place a <code class="docutils literal notranslate"><span class="pre">#</span></code> in the action column.  A comment
should be ignored by the bluesky plan that reads this table. The
table will end with a row of empty cells.</p>
<p>While it’s a good idea to put the <code class="docutils literal notranslate"><span class="pre">action</span></code> column first, that is
not necessary. It is not even necessary to name the column
<code class="docutils literal notranslate"><span class="pre">action</span></code>. You can re-arrange the order of the columns and change
their names <strong>as long as</strong> the column names match what text strings
your Python code expects to find.</p>
<p>A future upgrade <a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> will allow the table boundaries to be named by
Excel when using Excel’s <code class="docutils literal notranslate"><span class="pre">Format</span> <span class="pre">as</span> <span class="pre">Table</span></code> <a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> feature. For now,
leave a blank row and column at the bottom and right edges of the
table.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="github reference external" href="https://github.com/BCDA-APS/apstools/issues/122">BCDA-APS/apstools#122</a></p>
</aside>
<aside class="footnote brackets" id="id4" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Excel’s <code class="docutils literal notranslate"><span class="pre">Format</span> <span class="pre">as</span> <span class="pre">Table</span></code>:
<a class="reference external" href="https://support.office.com/en-us/article/Format-an-Excel-table-6789619F-C889-495C-99C2-2F971C0E2370">https://support.office.com/en-us/article/Format-an-Excel-table-6789619F-C889-495C-99C2-2F971C0E2370</a></p>
</aside>
</aside>
<p>PARAMETERS</p>
<dl>
<dt>filename</dt><dd><p><em>str</em> :
name (absolute or relative) of Excel spreadsheet file</p>
</dd>
<dt>labels_row</dt><dd><p><em>int</em> :
Row (zero-based numbering) of Excel file with column labels,
default: <code class="docutils literal notranslate"><span class="pre">3</span></code> (Excel row 4)</p>
</dd>
<dt>ignore_extra</dt><dd><p><em>bool</em> :
When <code class="docutils literal notranslate"><span class="pre">True</span></code>, ignore any cells outside of the table, default:
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Note that when <code class="docutils literal notranslate"><span class="pre">True</span></code>, a row of cells <em>within</em> the table will
be recognized as the end of the table, even if there are
actions in following rows.  To force an empty row, use
a comment symbol <code class="docutils literal notranslate"><span class="pre">#</span></code> (actually, any non-empty content will work).</p>
<p>When <code class="docutils literal notranslate"><span class="pre">False</span></code>, cells with other information (in Sheet 1) will
be made available, sometimes with unpredictable results.</p>
</dd>
</dl>
<p>EXAMPLE</p>
<p>See section <a class="reference internal" href="../examples/pl_run_command_list.html#example-run-command-file"><span class="std std-ref">The run_command_file() plan – batch scans using a text file</span></a> for more examples.</p>
<p>(See also <a class="reference internal" href="../examples/pl_run_command_list.html#excel-plan-spreadsheet-screen"><span class="std std-ref">example screen shot</span></a>.) Table (on Sheet 1) begins on row
4 in first column:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>  <span class="o">|</span>  <span class="n">some</span> <span class="n">text</span> <span class="n">here</span><span class="p">,</span> <span class="n">maybe</span> <span class="n">a</span> <span class="n">title</span>
<span class="mi">2</span>  <span class="o">|</span>  <span class="p">(</span><span class="n">could</span> <span class="n">have</span> <span class="n">content</span> <span class="n">here</span><span class="p">)</span>
<span class="mi">3</span>  <span class="o">|</span>  <span class="p">(</span><span class="ow">or</span> <span class="n">even</span> <span class="n">more</span> <span class="n">content</span> <span class="n">here</span><span class="p">)</span>
<span class="mi">4</span>  <span class="o">|</span>  <span class="n">action</span>  <span class="o">|</span> <span class="n">sx</span>   <span class="o">|</span> <span class="n">sy</span>   <span class="o">|</span> <span class="n">sample</span>     <span class="o">|</span> <span class="n">comments</span>          <span class="o">|</span>  <span class="o">|</span> <span class="o">&lt;--</span> <span class="n">leave</span> <span class="n">empty</span> <span class="n">column</span>
<span class="mi">5</span>  <span class="o">|</span>  <span class="n">close</span>   <span class="o">|</span>      <span class="o">|</span>                   <span class="o">|</span> <span class="n">close</span> <span class="n">the</span> <span class="n">shutter</span> <span class="o">|</span>  <span class="o">|</span>
<span class="mi">6</span>  <span class="o">|</span>  <span class="n">image</span>   <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="n">dark</span>       <span class="o">|</span> <span class="n">dark</span> <span class="n">image</span>        <span class="o">|</span>  <span class="o">|</span>
<span class="mi">7</span>  <span class="o">|</span>  <span class="nb">open</span>    <span class="o">|</span>      <span class="o">|</span>      <span class="o">|</span>            <span class="o">|</span> <span class="nb">open</span> <span class="n">the</span> <span class="n">shutter</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="mi">8</span>  <span class="o">|</span>  <span class="n">image</span>   <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="n">flat</span>       <span class="o">|</span> <span class="n">flat</span> <span class="n">field</span> <span class="n">image</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="mi">9</span>  <span class="o">|</span>  <span class="n">image</span>   <span class="o">|</span> <span class="mf">5.1</span>  <span class="o">|</span> <span class="o">-</span><span class="mf">3.2</span> <span class="o">|</span> <span class="mi">4140</span> <span class="n">steel</span> <span class="o">|</span> <span class="n">heat</span> <span class="mi">9172634</span>      <span class="o">|</span>  <span class="o">|</span>
<span class="mi">10</span> <span class="o">|</span>  <span class="n">scan</span>    <span class="o">|</span> <span class="mf">5.1</span>  <span class="o">|</span> <span class="o">-</span><span class="mf">3.2</span> <span class="o">|</span> <span class="mi">4140</span> <span class="n">steel</span> <span class="o">|</span> <span class="n">heat</span> <span class="mi">9172634</span>      <span class="o">|</span>  <span class="o">|</span>
<span class="mi">11</span> <span class="o">|</span>  <span class="n">scan</span>    <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="n">blank</span>      <span class="o">|</span>                   <span class="o">|</span>  <span class="o">|</span>
<span class="mi">12</span> <span class="o">|</span>
<span class="mi">13</span> <span class="o">|</span>  <span class="o">^^^</span> <span class="n">leave</span> <span class="n">empty</span> <span class="n">row</span> <span class="o">^^^</span>
<span class="mi">14</span> <span class="o">|</span> <span class="p">(</span><span class="n">could</span> <span class="n">have</span> <span class="n">content</span> <span class="n">here</span><span class="p">)</span>
</pre></div>
</div>
<p>Example python code to read this spreadsheet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">apstools.utils</span> <span class="kn">import</span> <span class="n">ExcelDatabaseFileGeneric</span><span class="p">,</span> <span class="n">cleanupText</span>

<span class="k">def</span> <span class="nf">myExcelPlan</span><span class="p">(</span><span class="n">xl_file</span><span class="p">,</span> <span class="n">md</span><span class="o">=</span><span class="p">{}):</span>
    <span class="n">excel_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">xl_file</span><span class="p">)</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
    <span class="n">xl</span> <span class="o">=</span> <span class="n">ExcelDatabaseFileGeneric</span><span class="p">(</span><span class="n">excel_file</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">xl</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="c1"># prepare the metadata</span>
        <span class="n">_md</span> <span class="o">=</span> <span class="p">{</span><span class="n">cleanupText</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="n">_md</span><span class="p">[</span><span class="s2">&quot;xl_file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xl_file</span>
        <span class="n">_md</span><span class="p">[</span><span class="s2">&quot;excel_row_number&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">_md</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">md</span><span class="p">)</span> <span class="c1"># overlay with user-supplied metadata</span>

        <span class="c1"># determine what action to take</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;action&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;open&quot;</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">bps</span><span class="o">.</span><span class="n">mv</span><span class="p">(</span><span class="n">shutter</span><span class="p">,</span> <span class="s2">&quot;open&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;close&quot;</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">bps</span><span class="o">.</span><span class="n">mv</span><span class="p">(</span><span class="n">shutter</span><span class="p">,</span> <span class="s2">&quot;close&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span>
            <span class="c1"># your code to take an image, given **row as parameters</span>
            <span class="k">yield from</span> <span class="n">my_image</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">,</span> <span class="n">md</span><span class="o">=</span><span class="n">_md</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;scan&quot;</span><span class="p">:</span>
            <span class="c1"># your code to make a scan, given **row as parameters</span>
            <span class="k">yield from</span> <span class="n">my_scan</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">,</span> <span class="n">md</span><span class="o">=</span><span class="n">_md</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;no handling for row </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: action=</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># execute this plan through the RunEngine</span>
<span class="n">RE</span><span class="p">(</span><span class="n">myExcelPlan</span><span class="p">(</span><span class="s2">&quot;spreadsheet.xlsx&quot;</span><span class="p">,</span> <span class="n">md</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">purpose</span><span class="o">=</span><span class="s2">&quot;apstools demo&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="apstools.utils.spreadsheet.ExcelDatabaseFileGeneric.handleExcelRowEntry">
<span class="sig-name descname"><span class="pre">handleExcelRowEntry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/spreadsheet.html#ExcelDatabaseFileGeneric.handleExcelRowEntry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric.handleExcelRowEntry" title="Permalink to this definition">#</a></dt>
<dd><p>use row number as the unique key</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="apstools.utils.spreadsheet.ExcelReadError">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apstools.utils.spreadsheet.</span></span><span class="sig-name descname"><span class="pre">ExcelReadError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apstools/utils/spreadsheet.html#ExcelReadError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apstools.utils.spreadsheet.ExcelReadError" title="Permalink to this definition">#</a></dt>
<dd><p>Exception when reading Excel spreadsheet.</p>
<span class="target" id="index-4"></span></dd></dl>

</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="_plans.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Plans</p>
      </div>
    </a>
    <a class="right-next"
       href="synApps/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">synApps Support: Records, Databases, …</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#utilities-by-activity">Utilities by Activity</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding">Finding</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listing">Listing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reporting">Reporting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-utilities">Other Utilities</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general">General</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-apstools.utils.aps_data_management">Submodules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.aps_data_management.dm_setup"><code class="docutils literal notranslate"><span class="pre">dm_setup()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-databroker-catalogs">Working with databroker catalogs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.copy_filtered_catalog"><code class="docutils literal notranslate"><span class="pre">copy_filtered_catalog()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.findCatalogsInNamespace"><code class="docutils literal notranslate"><span class="pre">findCatalogsInNamespace()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.getDatabase"><code class="docutils literal notranslate"><span class="pre">getDatabase()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.getDefaultDatabase"><code class="docutils literal notranslate"><span class="pre">getDefaultDatabase()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.getStreamValues"><code class="docutils literal notranslate"><span class="pre">getStreamValues()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.catalog.quantify_md_key_use"><code class="docutils literal notranslate"><span class="pre">quantify_md_key_use()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#device-information">Device information</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.device_info.listdevice"><code class="docutils literal notranslate"><span class="pre">listdevice()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#email-support">email Support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.email.EmailNotifications"><code class="docutils literal notranslate"><span class="pre">EmailNotifications</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#statistical-peak-analysis-functions">Statistical peak analysis functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.image_analysis.analyze_1D"><code class="docutils literal notranslate"><span class="pre">analyze_1D()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.image_analysis.analyze_2D"><code class="docutils literal notranslate"><span class="pre">analyze_2D()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-of-the-known-plans">Directory of the known plans</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_plans.listplans"><code class="docutils literal notranslate"><span class="pre">listplans()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-of-bluesky-runs">Directory of bluesky runs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.ListRuns"><code class="docutils literal notranslate"><span class="pre">ListRuns</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.ListRuns.parse_runs"><code class="docutils literal notranslate"><span class="pre">ListRuns.parse_runs()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.ListRuns.to_dataframe"><code class="docutils literal notranslate"><span class="pre">ListRuns.to_dataframe()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.ListRuns.to_table"><code class="docutils literal notranslate"><span class="pre">ListRuns.to_table()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.getRunData"><code class="docutils literal notranslate"><span class="pre">getRunData()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.getRunDataValue"><code class="docutils literal notranslate"><span class="pre">getRunDataValue()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.listRunKeys"><code class="docutils literal notranslate"><span class="pre">listRunKeys()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.listruns"><code class="docutils literal notranslate"><span class="pre">listruns()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.list_runs.summarize_runs"><code class="docutils literal notranslate"><span class="pre">summarize_runs()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#support-for-logging">Support for logging</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.log_utils.file_log_handler"><code class="docutils literal notranslate"><span class="pre">file_log_handler()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.log_utils.get_log_path"><code class="docutils literal notranslate"><span class="pre">get_log_path()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.log_utils.setup_IPython_console_logging"><code class="docutils literal notranslate"><span class="pre">setup_IPython_console_logging()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.log_utils.stream_log_handler"><code class="docutils literal notranslate"><span class="pre">stream_log_handler()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#diagnostic-support-for-memory">Diagnostic Support for Memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.memory.rss_mem"><code class="docutils literal notranslate"><span class="pre">rss_mem()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#miscellaneous-support">Miscellaneous Support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.cleanupText"><code class="docutils literal notranslate"><span class="pre">cleanupText()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.connect_pvlist"><code class="docutils literal notranslate"><span class="pre">connect_pvlist()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.count_child_devices_and_signals"><code class="docutils literal notranslate"><span class="pre">count_child_devices_and_signals()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.dictionary_table"><code class="docutils literal notranslate"><span class="pre">dictionary_table()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.full_dotted_name"><code class="docutils literal notranslate"><span class="pre">full_dotted_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.itemizer"><code class="docutils literal notranslate"><span class="pre">itemizer()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.listobjects"><code class="docutils literal notranslate"><span class="pre">listobjects()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.pairwise"><code class="docutils literal notranslate"><span class="pre">pairwise()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.print_RE_md"><code class="docutils literal notranslate"><span class="pre">print_RE_md()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.redefine_motor_position"><code class="docutils literal notranslate"><span class="pre">redefine_motor_position()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.replay"><code class="docutils literal notranslate"><span class="pre">replay()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.run_in_thread"><code class="docutils literal notranslate"><span class="pre">run_in_thread()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.safe_ophyd_name"><code class="docutils literal notranslate"><span class="pre">safe_ophyd_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.split_quoted_line"><code class="docutils literal notranslate"><span class="pre">split_quoted_line()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.text_encode"><code class="docutils literal notranslate"><span class="pre">text_encode()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.to_unicode_or_bust"><code class="docutils literal notranslate"><span class="pre">to_unicode_or_bust()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.trim_string_for_EPICS"><code class="docutils literal notranslate"><span class="pre">trim_string_for_EPICS()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.misc.unix"><code class="docutils literal notranslate"><span class="pre">unix()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overrideparameters">OverrideParameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters"><code class="docutils literal notranslate"><span class="pre">OverrideParameters</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.pick"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.pick()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.register"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.register()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.reset"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.reset()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.reset_all"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.reset_all()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.set"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.set()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.override_parameters.OverrideParameters.summary"><code class="docutils literal notranslate"><span class="pre">OverrideParameters.summary()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-support">Plot Support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.plotxy"><code class="docutils literal notranslate"><span class="pre">plotxy()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.select_live_plot"><code class="docutils literal notranslate"><span class="pre">select_live_plot()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.select_mpl_figure"><code class="docutils literal notranslate"><span class="pre">select_mpl_figure()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.trim_plot_by_name"><code class="docutils literal notranslate"><span class="pre">trim_plot_by_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.plot.trim_plot_lines"><code class="docutils literal notranslate"><span class="pre">trim_plot_lines()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#support-for-ipython-profiles">Support for IPython profiles</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.profile_support.getDefaultNamespace"><code class="docutils literal notranslate"><span class="pre">getDefaultNamespace()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.profile_support.ipython_profile_name"><code class="docutils literal notranslate"><span class="pre">ipython_profile_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.profile_support.ipython_shell_namespace"><code class="docutils literal notranslate"><span class="pre">ipython_shell_namespace()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#epics-pv-registry">EPICS PV Registry</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.PVRegistry"><code class="docutils literal notranslate"><span class="pre">PVRegistry</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.PVRegistry.ophyd_search"><code class="docutils literal notranslate"><span class="pre">PVRegistry.ophyd_search()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.PVRegistry.search"><code class="docutils literal notranslate"><span class="pre">PVRegistry.search()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.PVRegistry.search_by_mode"><code class="docutils literal notranslate"><span class="pre">PVRegistry.search_by_mode()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.findbyname"><code class="docutils literal notranslate"><span class="pre">findbyname()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.pvregistry.findbypv"><code class="docutils literal notranslate"><span class="pre">findbypv()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-databroker-catalogs">Searching databroker catalogs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.query.db_query"><code class="docutils literal notranslate"><span class="pre">db_query()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry"><code class="docutils literal notranslate"><span class="pre">SlitGeometry</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry.height"><code class="docutils literal notranslate"><span class="pre">SlitGeometry.height</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry.width"><code class="docutils literal notranslate"><span class="pre">SlitGeometry.width</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry.x"><code class="docutils literal notranslate"><span class="pre">SlitGeometry.x</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.slit_core.SlitGeometry.y"><code class="docutils literal notranslate"><span class="pre">SlitGeometry.y</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spreadsheet-support">Spreadsheet Support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.spreadsheet.ExcelDatabaseFileBase"><code class="docutils literal notranslate"><span class="pre">ExcelDatabaseFileBase</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric"><code class="docutils literal notranslate"><span class="pre">ExcelDatabaseFileGeneric</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.spreadsheet.ExcelDatabaseFileGeneric.handleExcelRowEntry"><code class="docutils literal notranslate"><span class="pre">ExcelDatabaseFileGeneric.handleExcelRowEntry()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apstools.utils.spreadsheet.ExcelReadError"><code class="docutils literal notranslate"><span class="pre">ExcelReadError</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/api/_utils.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2017-2023, UChicago Argonne, LLC.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>